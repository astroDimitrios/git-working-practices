<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Git Working Practices: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Git Working Practices
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Git Working Practices
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="fcm-git_cheat_sheet.html">FCM vs Git Cheat Sheet</a></li>
<li><a class="dropdown-item" href="reference.html">Git Cheatsheets for Quick Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Git Working Practices
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-issues.html">1. Issues</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-branching.html">2. Branching Models</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-feature-branch.html">3. Feature Branch Model</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-review.html">4. Review</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="Break.html">5. Break</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-forks.html">6. Forks</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="06-conflict.html">7. Conflicts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-history.html">8. History</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="End.html">9. End</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="08-rebase.html">10. Rebasing</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="09-pre-commit.html">11. Pre-commit</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="fcm-git_cheat_sheet.html">FCM vs Git Cheat Sheet</a></li>
<li><a href="reference.html">Git Cheatsheets for Quick Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-issues"><p>Content from <a href="01-issues.html">Issues</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/01-issues.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What information should go on an Issue?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create an Issue with the correct labels.</li>
<li>Assign yourself to an Issue.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>GitHub Issues (tickets) are where you plan and track work. You can
assign individuals to Issues and label them with a relevant tag such as
<code>bug</code> or <code>enhancement</code>. Before opening a new Issue
check whether there is already one open for the feature or bug by using
GitHub’s search.</p>
<p>Here’s some advice for writing good Issues:</p>
<ul>
<li>Be clear and concise, provide plenty of detail</li>
<li>State the expected outcomes</li>
<li>Tag relevant collaborators</li>
<li>Break up large Issues into several small ones and or use checklists
to track tasks in the Issue</li>
</ul>
<figure><img src="fig/github-issue.png" alt="A screenshot of a GitHub Issue." class="figure mx-auto d-block"></figure><div id="creating-an-issue" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="creating-an-issue" class="callout-inner">
<h3 class="callout-title">Creating an Issue</h3>
<div class="callout-content">
<p>Practice opening up an Issue on your <code>weather</code> repository.
Your Issue will be a feature request for the shipping forecast.</p>
<ol style="list-style-type: decimal">
<li>Make sure you give the Issue an accurate title and description</li>
<li>Assign a label to the Issue</li>
<li>Assign yourself to the Issue</li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Issues are used to track and plan work</li>
</ul>
</div>
</div>
</div></section><section id="aio-02-branching"><p>Content from <a href="02-branching.html">Branching Models</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/02-branching.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Which branching model is best for me?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the Feature Branch and Forking models.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the git-novice lesson you learnt how to develop features on a
branch and use a pull-request to merge the changes back into the
<code>main</code> branch. You were unknowingly using a Git branching
model called <strong>feature branch workflow</strong>.</p>
<p>As a reminder, we develop on branches to ensure that our development
code doesn’t affect the production code on the <code>main</code> branch.
Branches also allow your team to develop features in parallel.</p>
<p>A branching model (sometimes also called strategies or workflows) is
the model your team adopts when writing, merging and deploying code when
using a version control system. It is a set of rules that you must
follow which outline how your team and collaborators interact with a
shared codebase.</p>
<p>Having a clear model helps avoid merge conflicts, more on that later,
and clearly sets out to new collaborators how they can contribute to
your repository.</p>
<p>In this and the following episodes, we will outline some of the
branching models that teams use in order to organize their work. We will
look at their pros and cons and help decide which model you should
choose based on your teams needs.</p>
<p>A branching model aims to:</p>
<ul>
<li>Enhance productivity by ensuring proper coordination among
developers</li>
<li>Enable parallel development</li>
<li>Help organize a series of planned, structured releases</li>
<li>Map a clear path when making changes from development through to
production</li>
<li>Maintain a bug-free code where developers can quickly fix issues and
get these changes back to production without disrupting the development
workflow</li>
</ul>
<section><h2 class="section-heading" id="git-branching-models">Git Branching Models<a class="anchor" aria-label="anchor" href="#git-branching-models"></a>
</h2>
<hr class="half-width">
<p>Some version control systems are more geared towards certain
branching models. When using git you have a wide range of models to pick
from. This means the first rule when collaborating using git is: “Talk
about your branching model.”</p>
<p>A repositories <code>CONTRIBUTING</code> file may include details of
their branching model. This information might also be in a repositories
<code>README</code> file. If in doubt ask! You can also look at how
other people appear to be contributing to the repository.</p>
<p>Below are a few models:</p>
<hr>
<div class="section level3">
<h3 id="feature-branch">Feature Branch<a class="anchor" aria-label="anchor" href="#feature-branch"></a>
</h3>
<p>In this model every small change or “feature” gets its own branch
where the developers make changes. Once the feature is done, they submit
a pull request and merge it into the <code>main</code> branch after
review. Feature branches should be relatively short-lived.</p>
<div class="section level4">
<h4 id="pros">Pros<a class="anchor" aria-label="anchor" href="#pros"></a>
</h4>
<ul>
<li>Each feature is developed away from <code>main</code> so you don’t
affect production code</li>
<li>Multiple features can be developed in parallel feature branches</li>
<li>It’s a simple model that’s easy for those new to git and your
project</li>
<li>Easy to set up with continuous integration testing and
deployment</li>
</ul>
</div>
<div class="section level4">
<h4 id="cons">Cons<a class="anchor" aria-label="anchor" href="#cons"></a>
</h4>
<ul>
<li>If you don’t regularly merge changes to <code>main</code> into your
feature branch it can become outdated, leading to merge conflicts</li>
<li>You may struggle if you need to maintain multiple production
versions simultaneously in the same repository</li>
</ul>
<p>The Feature Branch model is sometimes called GitHub Flow.</p>
<pre class="mermaid"><code>---
config:
  gitGraph:
    showCommitLabel: false
---
    gitGraph
        accDescr {A git graph showing four branches including the default
        &lt;code&gt;main&lt;/code&gt; branch.
        Each circle is a commit.
        A circle with an outline but no fill colour is a merge commit
        where one branch has been merged into another.
        The two feature branches and the &lt;code&gt;bug_fix&lt;/code&gt; branch
        all branch off of &lt;code&gt;main&lt;/code&gt; at the same commit.
        The &lt;code&gt;bug_fix&lt;/code&gt; and &lt;code&gt;small_feature&lt;/code&gt; branches
        are merged back into &lt;code&gt;main&lt;/code&gt; after
        being developed on their branches.
        The &lt;code&gt;large_feature&lt;/code&gt; branch merges in the
        changes to &lt;code&gt;main&lt;/code&gt; to fix any conflicts
        before the feature is ready to be merged
        back into the &lt;code&gt;main&lt;/code&gt; branch via a pull request.}
        commit
        branch bug_fix
        checkout main
        branch small_feature
        checkout main
        branch large_feature
        checkout bug_fix
        commit
        checkout large_feature
        commit
        checkout main
        merge bug_fix
        checkout small_feature
        commit
        checkout large_feature
        commit
        checkout small_feature
        commit
        checkout main
        merge small_feature
        checkout large_feature
        commit
        merge main
        checkout main
        merge large_feature</code></pre>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="forking">Forking<a class="anchor" aria-label="anchor" href="#forking"></a>
</h3>
<p>In this model you make a <a href="https://gitprotect.io/blog/git-forking-workflow/" class="external-link"><strong>fork</strong></a>
(copy) of the whole repository you want to contribute to on GitHub in
your personal space. You develop your changes using this fork. When a
change is ready you open a pull request to contribute the changes back
to the original repository.</p>
<div class="section level4">
<h4 id="pros-1">Pros<a class="anchor" aria-label="anchor" href="#pros-1"></a>
</h4>
<ul>
<li>Removes the need to give all collaborators adequate permissions on
your repository</li>
<li>Only project maintainers can approve new code</li>
<li>You can use any other model within your main repository and forks to
develop changes</li>
</ul>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="git-flow">Git Flow<a class="anchor" aria-label="anchor" href="#git-flow"></a>
</h3>
<p>In this model the main development occurs in a <code>develop</code>
branch. Feature branches are created from this <code>develop</code>
branch. When the <code>develop</code> branch is ready for a release, you
create a <code>release</code> branch which is then tested and merged
onto the <code>develop</code> and <code>main</code> branches.</p>
<div class="section level4">
<h4 id="pros-2">Pros<a class="anchor" aria-label="anchor" href="#pros-2"></a>
</h4>
<ul>
<li>There is a clear purpose for each branch</li>
<li>Handles complex projects well</li>
</ul>
</div>
<div class="section level4">
<h4 id="cons-1">Cons<a class="anchor" aria-label="anchor" href="#cons-1"></a>
</h4>
<ul>
<li>Very steep learning curve, not suitable for novices</li>
</ul>
<pre class="mermaid"><code>    gitGraph
        accDescr {A git graph showing the GitFlow model.}
        commit tag:"0.1"
        branch hotfix
        checkout main
        branch release
        branch develop
        checkout hotfix
        commit
        checkout develop
        commit
        branch small_feature
        checkout develop
        merge hotfix
        branch large_feature
        checkout small_feature
        commit
        checkout large_feature
        commit
        commit
        checkout main
        merge hotfix tag:"0.2"
        checkout small_feature
        commit
        checkout develop
        merge small_feature
        checkout release
        merge develop
        checkout large_feature
        commit
        checkout release
        commit
        commit
        checkout main
        merge release tag:"1.0"
        checkout develop
        merge release</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="recommendations">Recommendations<a class="anchor" aria-label="anchor" href="#recommendations"></a>
</h2>
<hr class="half-width">
<p>For small projects using a Feature Branch model is normally
sufficient. If your team is large, or you expect external collaborators
to contribute then we recommend developing using forks. Most open source
projects require you to submit new code using a fork. The next few
episodes will guide you through examples of both models.</p>
<p>This wasn’t an exhaustive list of branching models! You can find more
information using the links below:</p>
<ul>
<li><a href="https://gitprotect.io/blog/from-novice-to-pro-understanding-git-branching-models/" class="external-link">From
Novice to Pro: Understanding Git Branching Strategies,
GitProtect</a></li>
<li><a href="https://about.gitlab.com/topics/version-control/what-is-git-workflow/#forking-git-workflow" class="external-link">What
is a Git workflow?, GitLab</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A clearly communicated branching model helps developers</li>
<li>For small projects use the Feature Branch flow</li>
<li>For larger projects or those with external collaborators use forks
with feature branches</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-feature-branch"><p>Content from <a href="03-feature-branch.html">Feature Branch Model</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/03-feature-branch.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use version control to collaborate with other people?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the feature branch model to collaborate.</li>
<li>Clone a remote repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode we will use the Feature Branch model to contribute to
each others repositories.</p>
<p>You will need to get into pairs. One person will be the “Owner” and
the other will be the “Collaborator”. The goal is for the Collaborator
to add changes into the Owner’s repository. We will switch roles at the
end, so both persons will play Owner and Collaborator.</p>
<p>While working together be sure to share what you are doing with your
partner.</p>
<div id="practicing-by-yourself" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="practicing-by-yourself" class="callout-inner">
<h3 class="callout-title">Practicing By Yourself</h3>
<div class="callout-content">
<p>If you’re working through this lesson on your own, you can carry on
by opening a second terminal window. This window will represent your
partner, working on another computer. You won’t need to give anyone
access on GitHub, because both ‘partners’ are you.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="repository-access">Repository Access<a class="anchor" aria-label="anchor" href="#repository-access"></a>
</h2>
<hr class="half-width">
<p>The Owner needs to give the Collaborator access. In your repository
page on GitHub, click the “Settings” button on the right, select
“Collaborators”, click “Add people”, and then enter your partner’s
username.</p>
<figure><img src="fig/github-add-collaborators.png" alt='A screenshot of the GitHub Collaborators settings page, which is accessed by clicking "Settings" then "Collaborators"' class="figure mx-auto d-block"></figure><p>To accept access to the Owner’s repo, the Collaborator needs to go to
<a href="https://github.com/notifications" class="external-link">https://github.com/notifications</a>
or check for an email notification. Once there they can accept access to
the Owner’s repo.</p>
</section><section><h2 class="section-heading" id="cloning-a-repo">Cloning a Repo<a class="anchor" aria-label="anchor" href="#cloning-a-repo"></a>
</h2>
<hr class="half-width">
<p>Next, the Collaborator needs to download a copy of the Owner’s
repository to their machine. This is called “cloning a repo”.</p>
<p>The Collaborator doesn’t want to overwrite their own version of
<code>climate</code>, so needs to clone the Owner’s repository to a
different location than their own repository with the same name.</p>
<p>To clone the Owner’s repository into their <code>Desktop</code>
folder, the Collaborator enters:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git clone git@github.com:mo-eormerod/weather.git ~/Desktop/mo-eormerod-weather</span></code></pre>
</div>
<p>Replace ‘mo-eormerod’ with the Owner’s username.</p>
<p>If you choose to clone without the clone path
(<code>~/Desktop/mo-eormerod-weather</code>) specified at the end, you
will clone inside your own weather folder! Make sure to navigate to the
<code>Desktop</code> folder first.</p>
<figure><img src="fig/github-collaboration.svg" alt='A diagram showing that "git clone" can create a copy of a remote GitHub repository, allowing a second person to create their own local repository that they can make changes to.' class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="feature-branches">Feature Branches<a class="anchor" aria-label="anchor" href="#feature-branches"></a>
</h2>
<hr class="half-width">
<p>The Collaborator can now make a change in their clone of the Owner’s
repository. We will use a feature branch in the same way as we’ve been
doing before:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/mo-eormerod-weather</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> 3_shipping-forecast</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch '3_shipping-forecast'</code></pre>
</div>
<p>Notice the name of the branch is prefixed by the number
<code>3</code>. This is the Issue number of the Issue the Owner created
on their repository. Your team may choose a different naming convention
such as prefixing the branch name by <code>feature</code>,
<code>bug</code> etc.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> nano shipping-forecast.md</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> cat shipping-forecast.md</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>New high expected Dover 1028 by 0600 tomorrow.
Low Trafalgar 1013 losing its identity</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git add shipping-forecast.md</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add in the shipping forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[3_shipping-forecast 17a1454] Add in the shipping forecast
 1 file changed, 2 insertions(+)
 create mode 100644 shipping-forecast.md</code></pre>
</div>
<p>Then push the change to the <em>Owner’s repository</em> on
GitHub:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 382 bytes | 191.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
remote:
remote: Create a pull request for '3_shipping-forecast' on GitHub by visiting:
remote:      https://github.com/mo-eormerod/weather/pull/new/3_shipping-forecast
remote:
To github.com:mo-eormerod/weather.git
 * [new branch]      3_shipping-forecast -&gt; 3_shipping-forecast
branch '3_shipping-forecast' set up to track 'origin/3_shipping-forecast'.</code></pre>
</div>
<p>Note that we didn’t have to create a remote called
<code>origin</code>: Git uses this name by default when we clone a
repository. (This is why <code>origin</code> was a sensible choice
earlier when we were setting up remotes by hand.)</p>
<p>Take a look at the Owner’s repository on GitHub again, and you should
be able to see the <code>3_shipping-forecast</code> branch and this new
commit made by the Collaborator. You may need to refresh your browser to
see the new commit.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Some more about remotes
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>In this episode and the previous one, our local repository has had a
single “remote”, called <code>origin</code>. A remote is a copy of the
repository that is hosted somewhere else, that we can push to and pull
from, and there’s no reason that you have to work with only one. For
example, on some large projects you might have your own copy in your own
GitHub account (you’d probably call this <code>origin</code>) and also
the main “upstream” project repository (let’s call this
<code>upstream</code> for the sake of examples). You would pull from
<code>upstream</code> from time to time to get the latest updates that
other people have committed.</p>
<p>Remember that the name you give to a remote only exists locally. It’s
an alias that you choose - whether <code>origin</code>, or
<code>upstream</code>, or <code>mo-eormerod</code> - and not something
intrinsic to the remote repository.</p>
<p>The <code>git remote</code> family of commands is used to set up and
alter the remotes associated with a repository. Here are some of the
most useful ones:</p>
<ul>
<li>
<code>git remote -v</code> lists all the remotes that are configured
(we already used this in the last episode)</li>
<li>
<code>git remote add [name] [url]</code> is used to add a new
remote</li>
<li>
<code>git remote remove [name]</code> removes a remote. Note that it
doesn’t affect the remote repository at all - it just removes the link
to it from the local repo.</li>
<li>
<code>git remote set-url [name] [newurl]</code> changes the URL that
is associated with the remote. This is useful if it has moved, e.g. to a
different GitHub account, or from GitHub to a different hosting service.
Or, if we made a typo when adding it!</li>
<li>
<code>git remote rename [oldname] [newname]</code> changes the local
alias by which a remote is known - its name. For example, one could use
this to change <code>upstream</code> to <code>mo-eormerod</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="open-a-pr">Open a PR<a class="anchor" aria-label="anchor" href="#open-a-pr"></a>
</h2>
<hr class="half-width">
<p>In the git-novice lesson you practised opening a <a href="https://www.astropython.com/git-novice/10-pull-requests.html" class="external-link">pull
request</a>.</p>
<p>You should see a notification appear on GitHub telling you the
<code>3_shipping-forecast</code> branch had recent pushes. The
Collaborator should click on the green <strong>Compare &amp; pull
request</strong> button to open the PR.</p>
<p>If you don’t see this notification click on the branches dropdown ,
the button showing <code>main</code>, and click on the
<code>3_shipping-forecast</code> branch.</p>
<figure><img src="fig/feature-branch-1.png" alt="A screenshot of the GitHub weather repository showing the branch selection dropdown." class="figure mx-auto d-block"></figure><p>You should now see the Code view for the
<code>3_shipping-forecast</code> branch and a
<strong>Contribute</strong> button. Click on the
<strong>Contribute</strong> button and select the green <strong>Open
pull request</strong> option.</p>
<figure><img src="fig/feature-branch-2.png" alt="A screenshot of the GitHub weather repository showing code view for the 3_shipping-forecast branch. The Contribute dropdown is expanded to show the Open pull request option." class="figure mx-auto d-block"></figure><p>You may have noticed when running <code>git push</code> on the
<code>3_shipping-forecast</code> branch for the first time the output
contained:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Create a pull request for '3_shipping-forecast' on GitHub by visiting:
remote:      https://github.com/mo-eormerod/weather/pull/new/3_shipping-forecast</code></pre>
</div>
<p>You could have also followed this link to create a new PR. We
recommend you always open a <strong>draft</strong> PR after your first
push. This gives you access to a diff of your changes against the target
branch (usually <code>main</code>). When the changes are ready for
review you can mark the PR as <strong>Ready for review</strong>.</p>
<div class="section level3">
<h3 id="automatically-closing-issues-via-prs">Automatically closing Issues via PRs<a class="anchor" aria-label="anchor" href="#automatically-closing-issues-via-prs"></a>
</h3>
<p>This PR adds in the shipping forecast which we have an open Issue
for. A PR can automatically close an Issue when it is merged into
<code>main</code>. To use this GitHub functionality add:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>Closes #3</span></code></pre>
</div>
<p>To the first comment of the PR, change <code>3</code> to the Issue
number of the Issue the Owner created on their repository. The <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue" class="external-link">GitHub
Documentation</a> has more information on linking PRs to Issues.</p>
<p>In the next episode we will look at how these changes are reviewed
and merged back into <code>main</code> in more detail.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Add collaborators to your repository by going to the repository
<strong>Settings</strong> then the <strong>Collaborators</strong>
tab.</li>
<li>Cloning a repository gives you a local copy of the repository:
<code>git clone &lt;repository&gt; &lt;directory&gt;</code>
</li>
<li>Automatically close Issues when a PR is merged by adding a
<code>Closes #&lt;Issue number&gt;</code> line to the first comment in
the PR.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-review"><p>Content from <a href="04-review.html">Review</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/04-review.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I see a diff of the changes?</li>
<li>How can I make inline comments or suggested changes?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Review changes made by collaborators.</li>
<li>Respond to a review.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this section we will explore how to properly review code and
suggest changes if necessary. We will continue to work in pairs. The
Owner should navigate back to their own <code>weather</code> repository.
You should see an open PR from your Collaborator.</p>
<section><h2 class="section-heading" id="reviewing-changes">Reviewing Changes<a class="anchor" aria-label="anchor" href="#reviewing-changes"></a>
</h2>
<hr class="half-width">
<p>As the Owner make sure you are on the PR your Collaborator has opened
on your repository.</p>
<p>You can add general science and code review comments in the
<strong>Conversation</strong> tab. To review specific files go to the
<strong>Files changed</strong> tab:</p>
<figure><img src="fig/pr-1.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The diff is shown with Split view." class="figure mx-auto d-block"></figure><p>This tab shows a diff (difference) between your feature branch,
<code>3_shipping-forecast</code>, and the target branch,
<code>main</code>. Your diff might look different, to swap between
<strong><em>Unified</em></strong> and <strong><em>Split</em></strong>
view click on the cog dropdown:</p>
<figure><img src="fig/pr-2.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The cog dropdown has been clicked to show how to change the diff view between Unified and Split." class="figure mx-auto d-block"></figure><p>The default view shows a diff of the source code. We’ll stick with
source code diffs for this lesson but you can change the view to rich
diffs to display rendered changes to Markdown or Jupyter Notebook files.
Click on the file icon on the far right of a diff for the file to swap
to a rich diff:</p>
<figure><img src="fig/pr-rich-diff.png" alt="A screenshot of a PR showing the diff in the Files changed tab using the rich diff view." class="figure mx-auto d-block"></figure><p>To start a review you can click on the green <strong>Review
changes</strong> button:</p>
<figure><img src="fig/pr-3.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The Review changes button has been clicked to show the Review popup." class="figure mx-auto d-block"></figure><p>Normally it is useful to review each file one at a time and make
comments inline first before adding general comments. Close the review
popup and hover next to a line number until it becomes highlighted.
Click on the line to add an inline comment:</p>
<figure><img src="fig/pr-4.png" alt="A screenshot of a PR showing the diff in the Files changed tab. A line has been highlighted to show how to add an inline comment." class="figure mx-auto d-block"></figure><p>You can make suggested changes using inline comments. Click on the
file icon or press <kbd>Ctrl+g</kbd>:</p>
<figure><img src="fig/pr-suggestion.png" alt="A screenshot of a PR showing the diff in the Files changed tab. A line has been highlighted to show how to add an inline comment with a suggestion." class="figure mx-auto d-block"></figure><p>Now click on the green <strong>Finish your review</strong> button,
add a comment, and select <strong>Request changes</strong>. When you’re
finished click the green <strong>Submit review</strong> button.</p>
<figure><img src="fig/pr-suggestion-2.png" alt="A screenshot of a PR showing the diff in the Files changed tab showing the review popup." class="figure mx-auto d-block"></figure><p>The PRs <strong>Conversation</strong> tab now looks like this:</p>
<figure><img src="fig/pr-review-1.png" alt="A screenshot of a PR showing the Conversation tab with a review that has requested changes." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="responding-to-review">Responding to Review<a class="anchor" aria-label="anchor" href="#responding-to-review"></a>
</h2>
<hr class="half-width">
<p>Now it is the Collaborators turn to respond to the review.</p>
<p>You can see merging is blocked because our reviewer has requested
changes. You also have the option to commit the suggested change to your
branch directly via the PR. Click on the <strong>Commit
suggestion</strong> button. In the popup add a description then click on
<strong>Commit changes</strong>:</p>
<figure><img src="fig/pr-review-2.png" alt="A screenshot of a PR showing the Conversation tab with a review that has requested changes." class="figure mx-auto d-block"></figure><p>You could have also committed the change to your feature branch using
your local copy and then marked the conversation with the suggested
change as resolved.</p>
</section><section><h2 class="section-heading" id="approving-changes">Approving Changes<a class="anchor" aria-label="anchor" href="#approving-changes"></a>
</h2>
<hr class="half-width">
<p>Now the Owner can respond to the Collaborators final changes.</p>
<p>The Conversation tab should update to show the suggestion as
<strong>Outdated</strong> because it has been resolved by the
Collaborator. It also gives you the option to view the new changes since
your last review.</p>
<figure><img src="fig/pr-review-3.png" alt="A screenshot of a PR showing the Conversation tab with a requested change that has been resolved." class="figure mx-auto d-block"></figure><p>Click on the <strong>View changes</strong> button. If you are happy
that the Collaborator has addressed your requested changes then you can
approve the PR:</p>
<figure><img src="fig/pr-review-4.png" alt="A screenshot of a PR showing the Files changed tab showing how to Approve a review." class="figure mx-auto d-block"></figure><p>Swap back to the Conversations tab. The PR is now ready to merge and
has no conflicts with the base (<code>main</code> in this case) branch.
Click <strong>Squash and merge</strong>:</p>
<figure><img src="fig/pr-review-5.png" alt="A screenshot of a PR showing the Conversations tab. The PR is ready to merge." class="figure mx-auto d-block"></figure><p>When your PR is merged the Conversations tab will show:</p>
<figure><img src="fig/pr-review-6.png" alt="A screenshot of a PR showing the Conversations tab. The notification tells us our PR has been successfully merged and closed." class="figure mx-auto d-block"></figure><p>You can now delete the branch from GitHub by pressing the
<strong>Delete branch</strong> button. Some repositories will be
automatically set up to delete the feature branch after a PR is
successfully merged.</p>
<p>If you head back to the main page of your repository, the code view
shows our new file <code>shipping-forecast.md</code>. The commit message
for the PR merge is shown next to it. If you hover over the PR number
(in this case <code>#4</code>) a popup will appear with details of the
merged PR. Click on the number to take you to the closed PR.</p>
<figure><img src="fig/pr-review-7.png" alt="A screenshot of the weather repositories main Code tab showing the files in the main branch. The new shipping-forecast.md file can be seen with the commit message from the PR squash and merge commit that created it. The PR number, #4, link is being hovered over to display a popup with brief details of PR #4." class="figure mx-auto d-block"></figure><p>Head over to the repositories <strong>Issues</strong> tab. Check that
your Issue for adding the shipping forecast was closed when you merged
the PR.</p>
<div id="local-cleanup" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="local-cleanup" class="callout-inner">
<h3 class="callout-title">Local Cleanup</h3>
<div class="callout-content">
<p>In the <a href="https://www.astropython.com/git-novice/10-pull-requests.html#updating-your-local-repo" class="external-link">git-novice</a>
lesson you learnt how to pull changes and clean up your branches after
merging a PR.</p>
<p>The Collaborator can now:</p>
<ol style="list-style-type: decimal">
<li>Update their local copy of the <code>weather</code> repository</li>
<li>Delete any branches that are no longer necessary</li>
</ol>
<p>The Owner can now:</p>
<ol style="list-style-type: decimal">
<li>Update their local copy of the <code>weather</code> repository</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Update your local copy of the <code>weather</code> repository</li>
</ol>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git switch main</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> git pull</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 1), reused 0 (delta 0), pack-reused 0 (from 0)
Unpacking objects: 100% (3/3), 1.11 KiB | 87.00 KiB/s, done.
From github.com:mo-eormerod/weather
   e4bdab8..ed14d18  main       -&gt; origin/main
Updating e4bdab8..ed14d18
Fast-forward
 shipping-forecast.md | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 shipping-forecast.md</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Delete any branches that are no longer necessary</li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git remote prune origin</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Pruning origin
URL: git@github.com:mo-eormerod/weather.git
 * [pruned] origin/3_shipping-forecast</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git branch <span class="at">-D</span> 3_shipping-forecast</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Deleted branch 3_shipping-forecast (was 17a1454).</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="switch-roles-and-repeat" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="switch-roles-and-repeat" class="callout-inner">
<h3 class="callout-title">Switch Roles and Repeat</h3>
<div class="callout-content">
<p>Switch roles. Repeat the process of making changes on a feature
branch and reviewing the changes (episodes <a href="./03-feature-branch.html">03</a> and <a href="./04-review.html">04</a>).</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A Pull Request (PR) is where your code and science review takes
place.</li>
<li>General review comments go in the PR <strong>Conversations</strong>
tab.</li>
<li>View a diff of the changes in the PR <strong>Files changed</strong>
tab.</li>
<li>Make inline comments or suggested changes in the <strong>Files
changed</strong> tab using the diff.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-Break"><p>Content from <a href="Break.html">Break</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/Break.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>You’ve now used the Feature Branch model to:</p>
<ol style="list-style-type: decimal">
<li>Open an Issue describing the feature or bug</li>
<li>Give collaborators access to your repo</li>
<li>Clone another repository</li>
<li>Create a branch to develop your changes on</li>
<li>Make changes to your working copy</li>
<li>Open a Pull Request</li>
<li>Review changes</li>
<li>Respond to review</li>
<li>Merge the Pull Request and close the Issue</li>
<li>Tidy up your branches</li>
</ol>
<p>Take a break - get up and move about.</p></section><section id="aio-05-forks"><p>Content from <a href="05-forks.html">Forks</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/05-forks.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a fork?</li>
<li>What are Issue and Pull Request templates?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a fork of a repository.</li>
<li>Contribute to the upstream repository using the fork.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Most open source projects require new collaborators to contribute via
their personal <strong>fork</strong> of the repository. A fork is simply
a copy of the repository that you make on the server, in our GitHub,
side. This avoids having to give repository permissions to every single
collaborator.</p>
<p>In this episode we will create a fork and contribute a change to the
main GitHub repository using the feature branch model we have been
practising.</p>
<p>Your instructor will give you a link to the
<code>git-training-demo</code> repository you will be forking. This is
the <strong>upstream</strong> repository for you fork.</p>
<section><h2 class="section-heading" id="open-an-issue">Open an Issue<a class="anchor" aria-label="anchor" href="#open-an-issue"></a>
</h2>
<hr class="half-width">
<p>Remember we track our work with Issues. Open an Issue on the
<code>git-training-demo</code> repository for adding yourself to the
list of authors in the <code>CITATION.cff</code> file.</p>
<p>Navigate to the <strong>Issues</strong> tab:</p>
<figure><img src="fig/github-fork-issue-open.png" alt="A screenshot of the git-training-demo repository showing the Issues view." class="figure mx-auto d-block"></figure><p>This repositories Issue tab looks different. It uses <a href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository" class="external-link">Issue
templates</a> to provide templates for bugs and feature requests. Click
on the green <strong>Get started</strong> button next to the
<strong>Feature request</strong> option:</p>
<figure><img src="fig/github-fork-issue-1.jpeg" alt="A screenshot of the git-training-demo repository showing an Issue being opened. The template has automatically added text to the description and labelled the Issue as an enhancement." class="figure mx-auto d-block"></figure><p>You can see the Issue has text in the description already. This is
from the template which provides a consistent structure to the Issues on
this repo. The template has also added the <code>enhancement</code>
label for you.</p>
<p>Add in a clear title such as “Add Robert FitzRoy to the list of
authors in the CITATION file”, replace ‘Robert FitzRoy’ with your name.
Click <strong>Submit new issue</strong>.</p>
</section><section><h2 class="section-heading" id="create-a-fork">Create a Fork<a class="anchor" aria-label="anchor" href="#create-a-fork"></a>
</h2>
<hr class="half-width">
<p>On the repository Code tab click on the <strong>Fork</strong>
dropdown arrow and then the <strong>+ Create a new fork</strong>
button:</p>
<figure><img src="fig/github-fork.png" alt="A screenshot of the git-training-demo repository showing the fork dropdown with the Create a new fork button." class="figure mx-auto d-block"></figure><p>GitHub will take you to the <strong>Create a new fork</strong> page.
There is no need to edit anything on this page. Click on the green
<strong>Create fork</strong> button:</p>
<figure><img src="fig/github-fork-2.png" alt="A screenshot of the GitHub Create a new fork page." class="figure mx-auto d-block"></figure><p>You should now see your repository fork. The repository is marked as
a fork by the fork symbol next to the repository organisation and name
in the top navigation bar. Under the main repository name you can see a
link to the repository we forked from. The notification at the bottom of
the screenshot shows whether your forks <code>main</code> branch is up
to date with the upstream repository. If you have commits on your fork
not present upstream you can <strong>Contribute</strong> your changes
upstream via a PR. If your fork is behind the upstream repository you
can <strong>Sync fork</strong> to pull in changes from the upstream
repository.</p>
<figure><img src="fig/github-fork-3.png" alt="A screenshot of a fork of the git-training-demo repository. The repository is marked as a fork by the fork symbol next to the repository name and the link to the original repository under the repository name." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="make-changes">Make Changes<a class="anchor" aria-label="anchor" href="#make-changes"></a>
</h2>
<hr class="half-width">
<p>You will be using this fork to make changes using the feature branch
model from the previous episodes. Clone your fork, replace
<code>mo-fitzroy</code> with your username:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git clone git@github.com:mo-fitzroy/git-training-demo.git</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cloning into 'git-training-demo'...
remote: Enumerating objects: 47, done.
remote: Counting objects: 100% (47/47), done.
remote: Compressing objects: 100% (44/44), done.
remote: Total 47 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
Receiving objects: 100% (47/47), 17.07 KiB | 1.07 MiB/s, done.
Resolving deltas: 100% (3/3), done.</code></pre>
</div>
<p>Create your feature branch:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd git-training-demo</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add-citation-fitzroy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch 'add-citation-fitzroy'</code></pre>
</div>
<p>Add your name to the <code>CITATION.cff</code> file, underneath any
existing author names:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> nano CITATION.cff</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "FitzRoy"
  given-names: "Robert"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Add and commit your changes:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git add CITATION.cff</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds Robert Fitzroy as an author"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add-citation-fitzroy a3c5e13] "Adds Robert Fitzroy as an author"
 1 file changed, 2 insertions(+)</code></pre>
</div>
<p>Push your changes to your GitHub fork:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 354 bytes | 354.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To github.com:mo-fitzroy/git-training-demo.git
   f87bb5c..a3c5e13  add-citation-fitzroy -&gt; add-citation-fitzroy
branch 'add-citation-fitzroy' set up to track 'origin/add-citation-fitzroy'.</code></pre>
</div>
</section><section><h2 class="section-heading" id="open-a-pull-request">Open a Pull Request<a class="anchor" aria-label="anchor" href="#open-a-pull-request"></a>
</h2>
<hr class="half-width">
<p>Head back to your fork on GitHub and open a PR to contribute your
changes upstream to the main <code>git-training-demo</code>
repository.</p>
<figure><img src="fig/github-fork-pr-open.jpeg" alt="A screenshot of a user opening a pull request from their fork back to the upstream git-training-demo repository. The description has been autofilled with the pull request template contents." class="figure mx-auto d-block"></figure><p>Notice the description has filled with a template. Just like this
repository used Issue templates it also uses a <a href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository" class="external-link">PR
template</a>.</p>
<p>Check the Issue you opened earlier for the Issue number.
<code>mo-fitzroy</code> checks theirs and it was Issue <code>#7</code>.
So he changes the line <code>Fixes &lt;#ISSUE_NUMBER&gt;</code> to
<code>Fixes #7</code>. This will automatically close Issue 7 when the PR
is merged. We use the keyword <code>Fixes</code> here instead of the
<code>Closes</code> keyword we used before because this PR comes from a
fork<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>This template has a checklist that needs to be completed before
opening the PR<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. It also has checklists for science and
code review. In the description scroll down to the checklists which look
like this:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> I have read <span class="in">`CONTRIBUTING.md`</span> and added my name as a Code Contributor.</span></code></pre>
</div>
<p>Replace the space in the square checkbox brackets with an
<code>x</code> to mark the task as complete:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ss">- </span><span class="va">[x]</span> I have read <span class="in">`CONTRIBUTING.md`</span> and added my name as a Code Contributor.</span></code></pre>
</div>
<p>Now when you open the PR it should look something like this:</p>
<figure><img src="fig/github-fork-pr-1.jpeg" alt="A screenshot of a users  pull request from their fork back to the upstream git-training-demo repository." class="figure mx-auto d-block"></figure><p>This PR number <code>#8</code> will close/fix Issue number
<code>#7</code> (the top left arrow). You can request a review on the
top right. Some repositories will be set up to automatically assign a
reviewer based on how many reviews each team member currently has open<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. The
middle arrow shows the checklist items we marked as complete.</p>
<p>At the bottom of your PR you can see that a review is required before
merging. All checks have passed, this repository has automatic checks
for trailing whitespace, accidentally adding large files etc. More
information can be found in the optional episode on pre-commit hooks. It
also tells us <strong>This branch has conflicts that must be
resolved</strong> and the conflicting file is
<code>CITATION.cff</code>.</p>
<p>Go to the main <code>git-training-demo</code> repositories code tab
and look at the contents of <code>CITATION.cff</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "Hogan"
  given-names: "Emma"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Someone else has added their name before our PR could be merged.
These changes now conflict with the one you made. In the next episode
you will learn how to deal with conflicts.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Practicing By Yourself </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>If you’re working through this lesson on your own, you won’t see a
conflict. You should still follow the materials through the next episode
on conflicts to learn what to do when you do encounter a conflict.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A fork is a server side (in our case GitHub) copy of the
repository.</li>
<li>Forks allow collaborators to contribute to the main repository
without being given write permissions.</li>
<li>Issue and Pull Request templates provide template text for the first
comment for new Issues of various types, and Pull Requests. They can
auto-label Issues and encourage collaborators to give plenty of
detail.</li>
</ul>
</div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>The <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue" class="external-link">GitHub
Documentation</a> has more information on linking PRs to Issues.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>You can also open a draft PR and then edit the top
comment to mark the checklist tasks as completed.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The <a href="https://docs.github.com/en/organizations/organizing-members-into-teams/managing-code-review-settings-for-your-team" class="external-link">GitHub
Documentation</a> has more information on automatically assigning
reviewers.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div></section><section id="aio-06-conflict"><p>Content from <a href="06-conflict.html">Conflicts</a></p>
<hr>
<p>Last updated on 2024-11-19 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/06-conflict.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What do I do when my changes conflict with someone else’s?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what conflicts are and when they can occur.</li>
<li>Resolve conflicts resulting from a merge.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As soon as people can work in parallel, they’ll likely step on each
other’s toes. This will even happen with a single person: if we are
working on a piece of software on both our laptop and a server in the
lab, we could make different changes to each copy. Version control helps
us manage these <a href="reference.html#conflict">conflicts</a> by
giving us tools to <a href="reference.html#resolve">resolve</a>
overlapping changes.</p>
<p>Good communication can help avoid conflicts. In the last episode if
we had communicated that we each needed to edit the
<code>CITATION.cff</code> file we could have made our changes
sequentially to avoid the conflict we now have.</p>
<section><h2 class="section-heading" id="updating-a-fork">Updating a Fork<a class="anchor" aria-label="anchor" href="#updating-a-fork"></a>
</h2>
<hr class="half-width">
<p>Our fork is now behind the main upstream repository by one commit. We
are going to update our fork. First we need to set the correct upstream
remote in git.</p>
<p>Switch back to your forks <code>main</code> branch:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>Now run:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git remote <span class="at">-v</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>origin	git@github.com:mo-fitzroy/git-training-demo.git (fetch)
origin	git@github.com:mo-fitzroy/git-training-demo.git (push)</code></pre>
</div>
<p>This shows the GitHub remote links for our fork. To set the upstream
remote we can run:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git remote add upstream git@github.com:MetOffice/git-training-demo.git</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">$</span> git remote <span class="at">-v</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>origin	git@github.com:mo-fitzroy/git-training-demo.git (fetch)
origin	git@github.com:mo-fitzroy/git-training-demo.git (push)
upstream	git@github.com:MetOffice/git-training-demo.git (fetch)
upstream	git@github.com:MetOffice/git-training-demo.git (push)</code></pre>
</div>
<p>Now git knows about the forks upstream repository. We can fetch the
changes to the upstream repository by running:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git fetch upstream</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 6, done.
remote: Counting objects: 100% (6/6), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 4 (delta 3), reused 2 (delta 2), pack-reused 0 (from 0)
Unpacking objects: 100% (4/4), 1.10 KiB | 41.00 KiB/s, done.
From github.com:MetOffice/git-training-demo
 * [new branch]      main                   -&gt; upstream/main</code></pre>
</div>
<p>We now have access to the <code>upstream/main</code> branch. To merge
in the changes on <code>upstream/main</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git merge upstream/main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Updating f87bb5c..90808ab
Fast-forward
 CITATION.cff | 2 ++
 1 file changed, 2 insertions(+)</code></pre>
</div>
<p>And push:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
To github.com:mo-fitzroy/git-training-demo.git
   f87bb5c..90808ab  main -&gt; main</code></pre>
</div>
<p>Your forks <code>main</code> branch is now up to date with the main
<code>git-training-demo</code> repositories <code>main</code>
branch.</p>
</section><section><h2 class="section-heading" id="resolving-conflicts">Resolving Conflicts<a class="anchor" aria-label="anchor" href="#resolving-conflicts"></a>
</h2>
<hr class="half-width">
<p>We’re going to resolve the conflict by merging in our
<code>main</code> branch into our feature branch
<code>add-citation-fitzroy</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A git graph showing the &lt;code&gt;main&lt;/code&gt; branch being merged
    into the &lt;code&gt;add-citation-fitzroy&lt;/code&gt; branch to resolve merge conflicts.}
    commit id: 'cdb7fa6'
    branch add-citation-fitzroy
    commit id: 'a3c5e13 Adds Robert Fitzroy as an author'
    checkout main
    commit id: 's7dja9o'
    checkout add-citation-fitzroy
    merge main</code></pre>
<p>Switch to the feature branch:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git switch add-citation-fitzroy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch 'add-citation-fitzroy'</code></pre>
</div>
<p>Merge in the <code>main</code> branch:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> git merge main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Auto-merging CITATION.cff
CONFLICT (content): Merge conflict in CITATION.cff
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>Git is warning us about the conflict. We are still merging, if you
run <code>git status</code> you will see:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch add-citation-fitzroy
Your branch is up to date with 'origin/add-citation-fitzroy'.

You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add &lt;file&gt;..." to mark resolution)
	both modified:   CITATION.cff

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>The message tells us <strong>both modified</strong> the
<code>CITATION.cff</code> file since both <code>main</code> and our
feature branch modified this file.</p>
<p>If we look at the <code>CITATION.cff</code> file now:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
- family-names: "FitzRoy"
  given-names: "Robert"
=======
- family-names: "Hogan"
  given-names: "Emma"
&gt;&gt;&gt;&gt;&gt;&gt;&gt; dabb4c8c450e8475aee9b14b4383acc99f42af1d
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Our change is preceded by
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>. Git has then inserted
<code>=======</code> as a separator between the conflicting changes and
marked the end of the content downloaded from GitHub with
<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>. (The string of letters and
digits after that marker identifies the commit we’ve just
downloaded.)</p>
<p>It is now up to us to edit this file to remove these markers and
reconcile the changes. We can do anything we want: keep the change made
in the local repository, keep the change made in the remote repository,
write something new to replace both, or get rid of the change entirely.
Let’s replace both so that the file looks like this:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "Hogan"
  given-names: "Emma"
- family-names: "FitzRoy"
  given-names: "Robert"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>To finish merging, we add <code>CITATION.cff</code> to the changes
being made by the merge and then commit:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> git add CITATION.cff </span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch add-citation-fitzroy
All conflicts fixed but you are still merging.
  (use "git commit" to conclude merge)

Changes to be committed:

	modified:   CITATION.cff</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> git commit</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add-citation-fitzroy 312c561] Merge branch 'main' into add-citation-fitzroy</code></pre>
</div>
<p>Now we can push our changes to GitHub:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 385 bytes | 128.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To github.com:mo-fitzroy/git-training-demo.git
   a3c5e13..312c561  add-citation-fitzroy -&gt; add-citation-fitzroy</code></pre>
</div>
<p>Your PR on GitHub should now be ready to merge, after review of
course.</p>
</section><section><h2 class="section-heading" id="avoiding-conflict">Avoiding Conflict<a class="anchor" aria-label="anchor" href="#avoiding-conflict"></a>
</h2>
<hr class="half-width">
<p>Git’s ability to resolve conflicts is very useful, but conflict
resolution costs time and effort, and can introduce errors if conflicts
are not resolved correctly. If you find yourself resolving a lot of
conflicts in a project, consider these technical approaches to reducing
them:</p>
<ul>
<li>Pull from upstream more frequently, especially before starting new
work</li>
<li>Use topic branches to segregate work, merging to main via a PR when
complete</li>
<li>Make smaller more atomic commits</li>
<li>Push your work when it is done and encourage your team to do the
same to reduce work in progress and, by extension, the chance of having
conflicts</li>
<li>Where logically appropriate, break large files into smaller ones so
that it is less likely that two authors will alter the same file
simultaneously</li>
</ul>
<p>Conflicts can also be minimized with project management
strategies:</p>
<ul>
<li>Clarify who is responsible for what areas with your
collaborators</li>
<li>Discuss what order tasks should be carried out in with your
collaborators so that tasks expected to change the same lines won’t be
worked on simultaneously</li>
<li>If the conflicts are stylistic churn (e.g. tabs vs. spaces),
establish a project convention that is governing and use code style
tools (e.g. <code>htmltidy</code>, <code>perltidy</code>,
<code>rubocop</code>, etc.) to enforce, if necessary</li>
</ul>
<div id="conflicts-on-non-textual-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="conflicts-on-non-textual-files" class="callout-inner">
<h3 class="callout-title">Conflicts on Non-textual files</h3>
<div class="callout-content">
<p>What does Git do when there is a conflict in an image or some other
non-textual file that is stored in version control?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Let’s try it with your <code>weather</code> repository. Suppose you
take a picture of the television forecast and call it
<code>forecast.jpg</code>. Jimmy has already created a feature branch to
add the image in.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> git switch add_forecast_image</span></code></pre>
</div>
<p>If you do not have an image file of forecast available, you can
create a dummy binary file like this:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">--bytes</span> 1024 /dev/urandom <span class="op">&gt;</span> forecast.jpg</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span> forecast.jpg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-r--r-- 1 mo-eormerod 57095 1.0K Mar  8 20:24 forecast.jpg</code></pre>
</div>
<p><code>ls</code> shows us that this created a 1-kilobyte file. It is
full of random bytes read from the special file,
<code>/dev/urandom</code>.</p>
<p>Now, suppose you add <code>forecast.jpg</code> to your
repository:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add picture of forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 8e4115c] Add picture of forecast
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 forecast.jpg</code></pre>
</div>
<p>Suppose that Jimmy has added a similar picture in the meantime. His
is a picture of a forecast from Chile, but it is <em>also</em> called
<code>forecast.jpg</code>. When you try to push, you get a familiar
message:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>To https://github.com/mo-eormerod/weather.git
 ! [rejected]        add_forecast_image -&gt; add_forecast_image (fetch first)
error: failed to push some refs to 'https://github.com/mo-eormerod/weather.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</code></pre>
</div>
<p>We’ve learned that we must pull first and resolve any conflicts:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> git pull</span></code></pre>
</div>
<p>When there is a conflict on an image or other binary file, git prints
a message like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$ git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://github.com/mo-eormerod/weather.git
 * branch            add_forecast_image     -&gt; FETCH_HEAD
   6a67967..439dc8c  add_forecast_image     -&gt; origin/add_forecast_image
warning: Cannot merge binary files: forecast.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)
Auto-merging forecast.jpg
CONFLICT (add/add): Merge conflict in forecast.jpg
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>The conflict message here is mostly the same as it was for
<code>forecast.md</code>, but there is one key additional line:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>warning: Cannot merge binary files: forecast.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)</code></pre>
</div>
<p>Git cannot automatically insert conflict markers into an image as it
does for text files. So, instead of editing the image file, we must
check out the version we want to keep. Then we can add and commit this
version.</p>
<p>On the key line above, Git has conveniently given us commit
identifiers for the two versions of <code>forecast.jpg</code>. Our
version is <code>HEAD</code>, and Jimmy’s version is
<code>439dc8c0...</code>. If we want to use our version, we can use
<code>git checkout</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD forecast.jpg</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of just the local forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 21032c3] Use image of just the local forecast</code></pre>
</div>
<p>If instead we want to use Jimmy’s version, we can use
<code>git checkout</code> with Jimmy’s commit identifier,
<code>439dc8c0</code>:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 forecast.jpg</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of just the local forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image da21b34] Use image of forecast with nachos instead of just forecast</code></pre>
</div>
<p>We can also keep <em>both</em> images. The catch is that we cannot
keep them under the same name. But, we can check out each version in
succession and <em>rename</em> it, then add the renamed versions. First,
check out each image and rename it:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD forecast.jpg</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="ex">$</span> git mv forecast.jpg forecast-only.jpg</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 forecast.jpg</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="ex">$</span> mv forecast.jpg forecast-chile.jpg</span></code></pre>
</div>
<p>Then, remove the old <code>forecast.jpg</code> and add the two new
files:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> git rm forecast.jpg</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="ex">$</span> git add forecast-only.jpg</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="ex">$</span> git add forecast-chile.jpg</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use two images: local forecast and Chile forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 94ae08c] Use two images: local forecast and Chile forecast
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 forecast-chile.jpg
 rename forecast.jpg =&gt; forecast-only.jpg (100%)</code></pre>
</div>
<p>Now both images of forecast are checked into the repository, and
<code>forecast.jpg</code> no longer exists.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Conflicts occur when two or more people change the same lines of the
same file.</li>
<li>The version control system does not allow people to overwrite each
other’s changes blindly, but highlights conflicts so that they can be
resolved.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-history"><p>Content from <a href="07-history.html">History</a></p>
<hr>
<p>Last updated on 2024-12-02 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/07-history.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why is a linear history useful?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Visualise our git history.</li>
<li>Learn the difference between merge, squash merge, and rebase.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The history of your repository is simply its commits. A more linear
history is easier to understand and can be helpful when using certain
git commands to explore your history.</p>
<section><h2 class="section-heading" id="viewing-history">Viewing History<a class="anchor" aria-label="anchor" href="#viewing-history"></a>
</h2>
<hr class="half-width">
<p>You have already learnt that we can use the <code>git log</code>
command to output the commit history of our repository.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git log</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit acce45c86ece7fd4823ddc6c1addb43edf4c0794
Merge: e3fc783 ca8aca9
Author: Robert FitzRoy &lt;r.fitzroy@mo-weather.uk&gt;
Date:   Mon Sep 23 15:50:15 2024 +0100

    Merge pull request #1 from MetOffice/mo-fitzroy-patch-1

    Create CITATION.cff

commit ca8aca9f2f43a4d799eb5c9ce9596b42360faa8b
Author: Robert FitzRoy &lt;r.fitzroy@mo-weather.uk&gt;
Date:   Mon Sep 23 15:49:36 2024 +0100

    Create CITATION.cff

commit e3fc783648222d5eef0739922b06794b8d690341
Author: Robert FitzRoy &lt;r.fitzroy@mo-weather.uk&gt;
Date:   Fri Sep 20 13:01:05 2024 +0100

    Initial commit</code></pre>
</div>
<p>This shows the first 3 commits to the <code>git-training-demo</code>
repository (the full output isn’t shown here because it’s very long). We
can use certain flags with <code>git log</code> to better visualise the
history in graph form:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>*   d800b46 (HEAD -&gt; main, origin/main, origin/HEAD) Merge pull request #2 from MetOffice/mo-fitzroy-patch-2
|\
| * dbc944d Add pre-commit checks
|/
*   acce45c Merge pull request #1 from MetOffice/mo-fitzroy-patch-1
|\
| * ca8aca9 Create CITATION.cff
|/
* e3fc783 Initial commit</code></pre>
</div>
<p>The <a href="https://git-scm.com/docs/git-log" class="external-link">GitHub Documentation
for git log</a> has information on all the available flags. The key here
is <code>--graph</code> shows us the graphical representation of our
history on the left of the terminal. <code>*</code>’s are commits which
are connected by lines. The vertical lines represent links between
commits. The output above shows two feature branches each with only one
commit which were then merged back into <code>main</code> via a pull
request.</p>
<p>You can either remember the flags using the phrase “git dog”,
<code>d</code> for <code>--decorate</code>, <code>o</code> for
<code>--oneline</code>, <code>g</code> for <code>--graph</code> or you
can set an alias for the <code>git log</code> command:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> alias.dog <span class="st">"log --decorate --oneline --graph"</span></span></code></pre>
</div>
<p>This alias makes these two commands equivalent:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git dog</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<p>You can of course customise the log command with other keywords and
set more aliases for different log views. Some useful examples can be
found on <a href="https://stackoverflow.com/questions/1838873/visualizing-branch-topology-in-git/34467298#34467298" class="external-link">this
Stackoverflow comment</a>.</p>
<div id="ide-git-history-extensions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ide-git-history-extensions" class="callout-inner">
<h3 class="callout-title">IDE Git History Extensions</h3>
<div class="callout-content">
<p>Your IDE may have extensions which render your git history as easy to
read graphs. If you use VSCode we recommend the <a href="https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph" class="external-link">Git
Graph extension</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="merge-options">Merge Options<a class="anchor" aria-label="anchor" href="#merge-options"></a>
</h2>
<hr class="half-width">
<p>When you opened your PRs you were given three options for merging
your feature branch into <code>main</code>. We will now explore how each
merging method affects the history of your repository. In all the
examples below we start with the same git history.</p>
<div class="section level3">
<h3 id="merge">Merge<a class="anchor" aria-label="anchor" href="#merge"></a>
</h3>
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with a &lt;code&gt;feature&lt;/code&gt; branch branching off at the second commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Using merge creates a merge commit joining the two branches:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of merging a &lt;code&gt;feature&lt;/code&gt; branch with the &lt;code&gt;main&lt;/code&gt; branch. The history is non-linear in this case and difficult to read.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'
    checkout main
    merge feature</code></pre>
<p>This results in a non-linear history which can be hard to navigate.
You can avoid this non-linear history by rebasing your
<code>feature</code> branch before you merge. Rebasing a branch before
you submit a PR for review is covered in the next episode.</p>
<p>Some teams choose to use Merge because it keeps all the individual
commits that made up your change so more accurately represents the
history of your repository.</p>
</div>
<div class="section level3">
<h3 id="squash-and-merge">Squash and Merge<a class="anchor" aria-label="anchor" href="#squash-and-merge"></a>
</h3>
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with a &lt;code&gt;feature&lt;/code&gt; branch branching off at the second commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Squashing before merging squashes all the commits on the feature
branch into one commit which is then merged onto main:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of squashing then merging a &lt;code&gt;feature&lt;/code&gt; branch with the &lt;code&gt;main&lt;/code&gt; branch.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    commit id: '62440f8'
    commit id: '5rtw8bq Squash &amp; Merge Cool feature'</code></pre>
<p>The last commit on main
<code>5rtw8bq Squash &amp; Merge Cool feature</code> is the two feature
branch commits squashed together into a new one.</p>
<p>Here the history is linear but all our commits have been squashed
into one. If you have a very large branch with many commits you might
not want to squash them all into one commit. Squashing in this case will
make bug hunting harder. Remember you should try and break work down
into small pieces so you avoid huge branches.</p>
</div>
<div class="section level3">
<h3 id="rebase">Rebase<a class="anchor" aria-label="anchor" href="#rebase"></a>
</h3>
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with a &lt;code&gt;feature&lt;/code&gt; branch branching off at the second commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Rebase re-writes your git history removing the <code>feature</code>
branch commits from the <code>feature</code> branch and adding them to
<code>main</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of rebasing a &lt;code&gt;feature&lt;/code&gt; branch with the &lt;code&gt;main&lt;/code&gt; branch.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    commit id: '62440f8'
    commit id: '7cec787 Cool feature'
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<div id="rebase-re-writes-history" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="rebase-re-writes-history" class="callout-inner">
<h3 class="callout-title">Rebase Re-Writes History</h3>
<div class="callout-content">
<p>Rebasing re-writes your git history. Do <strong>NOT</strong> rebase
shared branches such as <code>main</code>.</p>
</div>
</div>
</div>
<p>Since rebase re-writes your history you have to force push to the
GitHub remote to override your remotes history. The history in this case
is linear and retains all the commits which makes it easier to search
for a commit that introduced a bug.</p>
<p>Your team will decide what approach is right for your project.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>git log --decorate --oneline --graph</code> lets you visualise
your repository history in graph form.</li>
<li>There are three options for merging your feature branch into
<code>main</code>.</li>
<li>merge: creates a merge commit and results in a non-linear history
unless you first rebase your feature branch</li>
<li>squash and merge: squashes all your feature branch commits into one
merge commit on <code>main</code>. Your history is linear.</li>
<li>rebase: re-writes your git history so that all the feature branch
commits are now on <code>main</code>. Your history is linear.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-End"><p>Content from <a href="End.html">End</a></p>
<hr>
<p>Last updated on 2024-12-02 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/End.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>This marks the end of the the workshop. Please remember to fill out
your post-workshop feedback. This feedback is vital for us to keep
improving the lesson for other learners.</p>
<p>Episodes after this <strong>End</strong> page are optional. Your
instructor may choose to teach these episodes if time permits. Otherwise
feel free to work through the episodes in your own time.</p>
<div class="section level3">
<h3 id="where-to-next">Where to next?<a class="anchor" aria-label="anchor" href="#where-to-next"></a>
</h3>
<p>We’ve covered a lot over the last two workshops but there is always
more to learn especially when it comes to GitHub!</p>
<ul>
<li>
<a href="https://learn.microsoft.com/en-us/training/github/" class="external-link">Microsoft
Learn</a> has a wide variety of GitHub training.</li>
<li>In this lesson you saw automated testing of PRs using <a href="https://learn.microsoft.com/en-us/training/modules/introduction-to-github-actions/" class="external-link">GitHub
Actions</a> which you might like to explore more.</li>
<li>The optional <a href="./08-rebase.html">rebasing episode</a> guides
you through rebasing a branch.</li>
<li>These PR tests ran <a href="https://pre-commit.com/" class="external-link">pre-commit</a>
checks which you can set up locally to run before you commit. The
optional <a href="./09-pre-commit.html">pre-commit episode</a> outlines
how to set up some basic checks.</li>
</ul>
</div></section><section id="aio-08-rebase"><p>Content from <a href="08-rebase.html">Rebasing</a></p>
<hr>
<p>Last updated on 2024-12-02 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/08-rebase.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>When should I rebase?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Rebase a feature branch to clean up its history.</li>
<li>Use rebase to update a feature branch to the <code>HEAD</code> of
<code>main</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Rebasing a branch re-writes your git history and should be used with
caution. You might want to rebase if:</p>
<ul>
<li>You need to tidy up your branches history before performing a normal
merge via a PR. This will help keep the history of the <code>main</code>
branch linear.</li>
<li>You need to update your branch with changes from the
<code>main</code> branch.</li>
</ul>
<section><h2 class="section-heading" id="tidying-your-commit-history">Tidying your Commit History<a class="anchor" aria-label="anchor" href="#tidying-your-commit-history"></a>
</h2>
<hr class="half-width">
<p>Consider the following scenario. You want to add a plotting script to
the <code>git-training-demo</code> repository. You make a branch for the
feature:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add_plot_script main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch 'add_plot_script'</code></pre>
</div>
<p>And over the course of development you make three commits to the file
<code>plot_lfric.py</code>. Use the commands in each tab make the same
commits to your repository:</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Commit 1
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  Commit 2
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-3" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-3" type="button" role="tab" aria-controls="nav-tabpanel-1-3" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-3">
  Commit 3
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-1">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds in a Python script to plot LFRic data"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 64ac261] Adds in a Python script to plot LFRic data
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 plot_lfric.py</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-2">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Extends the LFRic data plotting script to plot 2D fields"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 7053de7] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-3" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-3">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Fixes the axis labels spelling in the LFRic data plotting script"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 0bb7871] Fixes the axis labels spelling in the LFRic data plotting script
 1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
</div>
</div>
<p>Before you push to the remote and open a PR you check your git
history. The git history now looks something like this:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with the &lt;code&gt;add_plot_script&lt;/code&gt; branch branching off at the first commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: 'ed14d18'
    branch add_plot_script
    checkout add_plot_script
    commit id: '64ac261'
    commit id: '7053de7'
    commit id: '0bb7871'</code></pre>
<p>We can also visualise these changes with <code>git log</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>* 0bb7871 (HEAD -&gt; add_plot_script) Fixes the axis labels spelling in the LFRic data plotting script
* 7053de7 Extends the LFRic data plotting script to plot 2D fields
* 64ac261 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
</div>
<p>You realise that perhaps the spelling fix in the third commit should
have been a correction to the first commit which added in the script. We
can use rebase to re-write our history and combine these two
commits.</p>
<div id="backup-your-branch" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="backup-your-branch" class="callout-inner">
<h3 class="callout-title">Backup your Branch</h3>
<div class="callout-content">
<p>It is a good idea to create a backup of your feature branch just in
case something goes wrong during the rebase:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git branch add_plot_script.backup</span></code></pre>
</div>
</div>
</div>
</div>
<p>We will rebase interactively using the <code>-i</code> flag. To
rebase our three commits we need to provide the commit hash for the
commit before our three feature branch commits which is
<code>ed14d18</code> from the log above:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">-i</span> ed14d18</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pick 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
pick 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script

# Rebase ed14d18..0bb7871 onto ed14d18 (3 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup [-C | -c] &lt;commit&gt; = like "squash" but keep only the previous
#                    commit's log message, unless -C is used, in which case
#                    keep only this commit's message; -c is same as -C but
#                    opens the editor
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with 'git rebase --continue')
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .	  create a merge commit using the original merge commit's
# .	  message (or the oneline, if no original merge commit was
# .	  specified); use -c &lt;commit&gt; to reword the commit message
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#</code></pre>
</div>
<p>This file shows our three commits in order from oldest to newest. It
also gives us options for each commit. You can re-arrange commit lines
to re-order your history.</p>
<div id="aborting-a-rebase" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="aborting-a-rebase" class="callout-inner">
<h3 class="callout-title">Aborting a Rebase</h3>
<div class="callout-content">
<p>If you want to cancel the rebase at the above stage either do nothing
to the file or delete all the commit lines.</p>
<p>After you save and close the file, if your rebase has conflicts, you
can abort at anytime using:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">--abort</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>We are going to drop our spelling fix and amend our first commit to
fix the spelling:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
</div>
<p>Save and close the file.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Stopped at 64ac261...  Adds in a Python script to plot LFRic data
You can amend the commit now, with

  git commit --amend

Once you are satisfied with your changes, run

  git rebase --continue
[git-training-demo]:(add_plot_script|REBASE 1/3)$</code></pre>
</div>
<p>The rebase has stopped at 64ac261, the commit which added in the
<code>plot_lfric.py</code> file, because we asked to amend the commit.
We can now open up the plotting script and make our changes.</p>
<p>Opening up the file now shows:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre>
</div>
<p>Modify and save the file so that it reads:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span></code></pre>
</div>
<p>Add the file and confirm the amendment:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git commit <span class="at">--amend</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[detached HEAD 76fd423] Adds in a Python script to plot LFRic data
 Date: Mon Nov 18 10:49:25 2024 +0000
 1 file changed, 1 insertion(+)
 create mode 100644 plot_lfric.py</code></pre>
</div>
<p>For the last few commands we have included the full terminal prompt
showing the git status provided by the <code>git-prompt.sh</code> script
you set up in the <a href="https://www.astropython.com/git-novice/index.html#git-autocomplete" class="external-link">git-novice
lesson</a>. You can see the prompt clearly states we are rebasing,
<code>REBASE</code>, and that it is on line <code>1/3</code> of the
rebase to-do file we edited earlier.</p>
<p>Now we have amended the commit we can continue with the rebase:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="ex">Auto-merging</span> plot_lfric.py</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="ex">CONFLICT</span> <span class="er">(</span><span class="ex">content</span><span class="kw">)</span><span class="bu">:</span> Merge conflict in plot_lfric.py</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="ex">error:</span> could not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="ex">hint:</span> Resolve all conflicts manually, mark them as resolved with</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a><span class="ex">hint:</span> <span class="st">"git add/rm &lt;conflicted_files&gt;"</span>, then run <span class="st">"git rebase --continue"</span>.</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="ex">hint:</span> You can instead skip this commit: run <span class="st">"git rebase --skip"</span>.</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="ex">hint:</span> To abort and get back to the state before <span class="st">"git rebase"</span>, run <span class="st">"git rebase --abort"</span>.</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a><span class="ex">Could</span> not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> </span></code></pre>
</div>
<p>The rebase has tried to apply the second commit which still has the
spelling mistake resulting in a merge error. Open the file again and
resolve the conflict:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py </span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="op">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> HEAD</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="op">=======</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co"># more Python</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="op">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="dv">3343</span><span class="er">f91</span></span></code></pre>
</div>
<p>Modify and save the file so that it reads:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<p>Add the file and continue with the rebase:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[detached HEAD d7def6a] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)
Successfully rebased and updated refs/heads/add_plot_script.
[git-training-demo]:(add_plot_script)$ </code></pre>
</div>
<p>We have now successfully rebased our feature branch. Our history
shows:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>* d7def6a (HEAD -&gt; add_plot_script) Extends the LFRic data plotting script to plot 2D fields
* e56ed99 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
</div>
<div id="detached-head" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="detached-head" class="callout-inner">
<h3 class="callout-title">detached HEAD</h3>
<div class="callout-content">
<p>You may have noticed in some of the terminal outputs above the phrase
<code>detached HEAD</code>. Remember <code>HEAD</code> simply points to
the latest commit in a branch. You can’t re-write the commit history of
a branch while you are on the branch! <code>git rebase</code> moved you
into a <code>detached HEAD</code> space where you aren’t on any branch
to perform the rebase. When the rebase successfully completed git
re-attached <code>HEAD</code> to point to the new most recent commit,
<code>d7def6a</code> in the output above, on the feature branch.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="updating-a-branch">Updating a Branch<a class="anchor" aria-label="anchor" href="#updating-a-branch"></a>
</h2>
<hr class="half-width">
<p>You can also use rebase to move your changes to branch off the
<code>HEAD</code> of <code>main</code>. While we rebased our feature
branch another PR was merged with <code>main</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with the &lt;code&gt;add_plot_script&lt;/code&gt; branch branching off at the first commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: 'ed14d18'
    branch add_plot_script
    checkout add_plot_script
    commit id: 'e56ed99'
    commit id: 'd7def6a'
    checkout main
    commit id: '4rtzk8g'</code></pre>
<p>We can use rebasing to move our feature branch so it branches off the
<code>HEAD</code> of <code>main</code>, fixing any conflicts that arise.
This is what we are aiming for:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the &lt;code&gt;main&lt;/code&gt; branch with the &lt;code&gt;add_plot_script&lt;/code&gt; branch branching off at the second commit of &lt;code&gt;main&lt;/code&gt;.}
    commit id: 'ed14d18'
    commit id: '4rtzk8g'
    branch add_plot_script
    checkout add_plot_script
    commit id: 'e56ed99'
    commit id: 'd7def6a'</code></pre>
<p>Go back to your fork on GitHub and click on the <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork" class="external-link"><strong>Sync
fork</strong></a> button. Then run <code>git pull</code> to fetch the
changes:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<p>To rebase we run:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> git rebase main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Successfully rebased and updated refs/heads/add_plot_script.</code></pre>
</div>
<p>That’s it! There were no merge conflicts to resolve this time. If you
are going to use rebase in this way consider rebasing on a regular
basis.</p>
<div id="merge-rebase" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="merge-rebase" class="callout-inner">
<h3 class="callout-title">Merge &amp; Rebase</h3>
<div class="callout-content">
<p>Stick to one strategy if you can, or rebase before merging. Rebasing
a branch with merge commits is difficult to impossible.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="updating-the-remote">Updating the Remote<a class="anchor" aria-label="anchor" href="#updating-the-remote"></a>
</h2>
<hr class="half-width">
<p>If you are rebasing a feature branch you have already pushed to the
GitHub remote you will need to overwrite the remote branch.</p>
<ul>
<li>
<strong>Always</strong> check you have updated your local branch
from the remote <strong>before</strong> rebasing.</li>
<li>
<strong>Always</strong> check before pushing to the remote after
rebasing that no new commits were added to the remote as these will be
lost.</li>
</ul>
<p>You can fetch any changes to the remote:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> git fetch</span></code></pre>
</div>
<p>And inspect the last commit with the log or <code>git show</code> to
make sure it’s the commit you expect:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> git show origin/add_plot_script</span></code></pre>
</div>
<p>If the rebasing was successful and there have been no new commits to
the remote feature branch by any collaborators it is safe to push the
rebased feature branch to the GitHub remote, overwriting it’s
history.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--force-with-lease</span></span></code></pre>
</div>
<p>The <code>--force-with-lease</code> flag will warn you if there are
commits on the remote branch you would override by pushing if you forgot
to check yourself.</p>
</section><section><h2 class="section-heading" id="pulling-a-rebased-branch">Pulling a Rebased Branch<a class="anchor" aria-label="anchor" href="#pulling-a-rebased-branch"></a>
</h2>
<hr class="half-width">
<p>If you have rebased a feature branch and then overwritten the remote
branch on GitHub your collaborators may need to pull these changes to
their local copies.</p>
<p>If the collaborator already had a copy of your branch from before the
rebase; attempting a normal pull will result in a lot of conflicts due
to the incompatible histories of the original and the rebased
branches.</p>
<p>The collaborator should first switch to the local branch they want to
overwrite with the rebased remote version:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> git switch add_plot_script</span></code></pre>
</div>
<p>Now fetch but don’t attempt to merge the remote branch:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> git fetch origin add_plot_script</span></code></pre>
</div>
<p>Reset the local branch to match the remote origin:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> git reset <span class="at">--hard</span> origin/add_plot_script</span></code></pre>
</div>
<p>Now their local branch matches the rebased feature branch from GitHub
and everyone’s branches are in sync.</p>
<div id="modifying-commit-messages" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="modifying-commit-messages" class="callout-inner">
<h3 class="callout-title">Modifying Commit Messages</h3>
<div class="callout-content">
<p><code>git rebase</code> can also be used to modify commit
messages.</p>
<p>Look again at the output of the interactive rebase in this lesson.
Which keyword lets you edit the commit message?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Edit the commit message:</p>
<pre class="text"><code><span><span class="co"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="re-ordering-commits" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="re-ordering-commits" class="callout-inner">
<h3 class="callout-title">Re-ordering Commits</h3>
<div class="callout-content">
<p>In the first example removing the spelling mistake we used the
following keywords in our rebase to-do list:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
</div>
<p>You can also re-order the lines in this file to re-order commits.
Look at the possible rebase options again. What other combination of
keywords and/or line-reordering would have given us the same result?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pick 64ac261 Adds in a Python script to plot LFRic data
fixup 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields</code></pre>
</div>
<p>This is one possibility. We move the last commit just underneath the
first which introduced the mistake. We use the <code>fixup</code>
keyword to fix this change up into the previous commit.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Rebasing helps keep your git history linear which can be useful when
using commands such as git bisect to find the commit that introduced a
bug.</li>
<li>Rebasing re-writes your git history. Make a backup of your branch
before rebasing. <code>git branch &lt;branch-name&gt;.backup</code>
</li>
<li>Use an interactive rebase with the <code>-i</code> flag when you
want to tidy your git history.</li>
<li>Use <code>git rebase main</code> to rebase your feature branch onto
the <code>HEAD</code> of the <code>main</code> branch.</li>
<li>
<strong>Always</strong> check you have updated your local branch
from the remote <strong>before</strong> rebasing.</li>
<li>
<strong>Always</strong> check before pushing to the remote after
rebasing that no new commits were added to the remote as these will be
lost.</li>
<li>Use <code>git push --force-with-lease</code> to update the remote
branch.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09-pre-commit"><p>Content from <a href="09-pre-commit.html">Pre-commit</a></p>
<hr>
<p>Last updated on 2024-12-02 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/09-pre-commit.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What quality assurance checks can I run using pre-commit
checks?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what pre-commit hooks are.</li>
<li>Install and run a pre-commit hook.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><a href="https://git-scm.com/book/ms/v2/Customizing-Git-Git-Hooks" class="external-link">Git
hooks</a> let you run certain scripts before git actions. In this
optional episode we are going to set up a <a href="https://pre-commit.com/" class="external-link">pre-commit</a> hook which runs quality
assurance checks on our code before we are allowed to make a commit.</p>
<p><a href="https://pre-commit.com/" class="external-link">pre-commit</a> is a Python package
that makes it easier to set up git hooks. To install it using pip or
conda:</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  pip
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  conda
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-1">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pip install pre-commit</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-2">
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> conda install pre-commit</span></code></pre>
</div>
</div>
</div>
</div>
<p>In the <code>git-training-demo</code> we provided an example
pre-commit configuration. These pre-commit checks were run as part of
your pull requests. We can install the pre-commit hook scripts so they
run before we can commit locally:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> =<span class="kw">)</span><span class="ex">$</span> pre-commit install</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pre-commit installed at .git/hooks/pre-commit</code></pre>
</div>
<p>It’s good practice to run the pre-commit checks on all your files
after installing them.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> =<span class="kw">)</span><span class="ex">$</span> pre-commit run <span class="at">--all-files</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[INFO] Initializing environment for https://github.com/pre-commit/pre-commit-hooks.
[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.
[INFO] Once installed this environment will be reused.
[INFO] This may take a few minutes...
don't commit to branch ...................................................Passed
check for added large files ..............................................Passed
check for case conflicts .................................................Passed
check for merge conflicts ................................................Passed
check toml ...........................................(no files to check)Skipped
check yaml ...............................................................Passed
fix end of files .........................................................Passed
trim trailing whitespace .................................................Passed</code></pre>
</div>
<p>The next time the pre-commit scripts run they will re-use the Python
environment that was just installed, making the run faster.</p>
<p>The <a href="https://pre-commit.com/hooks.html" class="external-link">pre-commit.com
site</a> has a reference of useful hooks. Your organisation may have
their own pre-commit hooks which you can use and or block third party
hooks for security.</p>
<div id="committing-to-main" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="committing-to-main" class="callout-inner">
<h3 class="callout-title">Committing to Main</h3>
<div class="callout-content">
<p>With the pre-commit installed try adding any change to the
<code>main</code> branch and then run <code>git commit</code>.</p>
<p>What happens with the pre-commit hooks installed?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The pre-commit check for not committing to main fails so
<code>git commit</code> wasn’t run. Your changes are still staged.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> +=<span class="kw">)</span><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Attempts to commit to main"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>don't commit to branch...................................................Failed
- hook id: no-commit-to-branch
- exit code: 1
check for added large files..............................................Passed
check for case conflicts.................................................Passed
check for merge conflicts................................................Passed
check toml...........................................(no files to check)Skipped
check yaml...............................................................Passed
fix end of files.........................................................Passed
trim trailing whitespace.................................................Passed</code></pre>
</div>
<p>To move the staged changes to a new branch use
<code>git switch</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> +=<span class="kw">)</span><span class="ex">$</span> git switch <span class="at">-c</span> <span class="op">&lt;</span>branch-name<span class="op">&gt;</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch 'challenge'</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">challenge</span> +<span class="kw">)</span><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch challenge
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	modified:   .pre-commit-config.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>pre-commit checks help prevent accidental commits to
<code>main</code> and provide an extra layer of quality assurance.</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/metoffice/git-working-practices/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/metoffice/git-working-practices/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/metoffice/git-working-practices/" class="external-link">Source</a></p>
				<p><a href="https://github.com/metoffice/git-working-practices/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:d.theodorakis@metoffice.gov.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/astroDimitrios/sandpaper/tree/af2c7cf119fb973a234d054e29e2428c167b1afd" class="external-link">sandpaper (0.16.9)</a>, <a href="https://github.com/carpentries/pegboard/tree/bad0be19a12f0c6545801b276ddf26c945f8bfd1" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/astroDimitrios/varnish/tree/7db4d0cf3b110a511778c5f855a8ef9e71f34b02" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://metoffice.github.io/git-working-practices/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://metoffice.github.io/git-working-practices/aio.html",
  "identifier": "https://metoffice.github.io/git-working-practices/aio.html",
  "dateCreated": "2024-11-11",
  "dateModified": "2024-12-02",
  "datePublished": "2024-12-02"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

