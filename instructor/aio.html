<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Git and GitHub Working Practices: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Git and GitHub Working Practices
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Git and GitHub Working Practices
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="fcm-git_cheat_sheet.html">FCM vs Git Cheat Sheet</a></li>
<li><a class="dropdown-item" href="reference.html">Git Cheatsheets for Quick Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Git and GitHub Working Practices
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-repo-access.html">1. Repository Access</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-issues.html">2. Issues</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-branching.html">3. Branching Models</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-feature-branch.html">4. Feature Branch Model</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-review.html">5. Review</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="Break.html">6. Break</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-history.html">7. History</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="05-forks.html">8. Forks</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="06-conflict.html">9. Conflicts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="End.html">10. End</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="08-rebase.html">11. Rebasing</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="09-pre-commit.html">12. Pre-commit</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="fcm-git_cheat_sheet.html">FCM vs Git Cheat Sheet</a></li>
<li><a class="dropdown-item" href="reference.html">Git Cheatsheets for Quick Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-00-repo-access"><p>Content from <a href="00-repo-access.html">Repository Access</a></p>
<hr>
<p>Last updated on 2025-03-03 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/00-repo-access.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What levels of repository permissions are there?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Know how to give a collaborator access to your repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>To be able to contribute to the <code>git-training-demo</code>
repository your instructors will have to give you access. They are going
to showcase this now. The steps are:</p>
<p>In the repository page on GitHub, click the “Settings” button on the
right, select “Collaborators”, click “Add people”, and enter a
username/s.</p>
<figure><img src="../fig/github-add-collaborators.png" alt='A screenshot of the GitHub Collaborators settings page, which is accessed by clicking "Settings" then "Collaborators".' class="figure mx-auto d-block"><div class="figcaption">A screenshot of the GitHub Collaborators
settings page for a public personal repository, which is accessed by
clicking “Settings” then “Collaborators”.</div>
</figure><p>To accept access to the repository, you will need to go to <a href="https://github.com/notifications" class="external-link">https://github.com/notifications</a>
or check for an email notification. Once there you can accept access to
the repository.</p>
<section><h2 class="section-heading" id="permission-levels">Permission Levels<a class="anchor" aria-label="anchor" href="#permission-levels"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="personal-repositories">Personal Repositories<a class="anchor" aria-label="anchor" href="#personal-repositories"></a>
</h3>
<p>Repositories on personal accounts only have two levels of
permissions, the Owner and Collaborators<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. To use the branching
model in this lesson you would need adding as a collaborator. You can
still contribute to a public repository without being added as a
collaborator by using the forking model.</p>
<div class="section level4">
<h4 id="checking-access">Checking Access<a class="anchor" aria-label="anchor" href="#checking-access"></a>
</h4>
<p>As a collaborator you will be able to edit files on GitHub.</p>
<ol style="list-style-type: decimal">
<li>Go to the GitHub repository.</li>
<li>Scroll down to the top of the rendered README.</li>
<li>In the top right corner of the README click on the <strong>Edit
file</strong> pencil icon.</li>
</ol>
<p>If you aren’t a collaborator you will see the message:</p>
<blockquote>
<p>You need to fork this repository to propose changes. Sorry, you’re
not able to edit this repository directly</p>
</blockquote>
<p>Or if you have made a fork of the repository already you may see the
GitHub editor and a banner message stating:</p>
<blockquote>
<p>You’re making changes in a project you don’t have write access
to…</p>
</blockquote>
<p>If you are a collaborator, GitHub’s online editor will appear.</p>
</div>
</div>
<div class="section level3">
<h3 id="organisational-repositories">Organisational Repositories<a class="anchor" aria-label="anchor" href="#organisational-repositories"></a>
</h3>
<p>Repositories in organisations have more levels of permissions<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Team
members require at least <strong>write</strong> access to use the
branching model. For all lower levels of access use the forking
model.</p>
<div class="section level4">
<h4 id="checking-access-for-organisational-repositories">Checking Access for Organisational Repositories<a class="anchor" aria-label="anchor" href="#checking-access-for-organisational-repositories"></a>
</h4>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-Read" name="Read" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-Read" type="button" role="tab" aria-controls="nav-tabpanel-1-Read" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-Read">
  Read
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-Triage" name="Triage" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-Triage" type="button" role="tab" aria-controls="nav-tabpanel-1-Triage" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-Triage">
  Triage
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-Write" name="Write" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-Write" type="button" role="tab" aria-controls="nav-tabpanel-1-Write" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-Write">
  Write
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-MaintainandAdmin" name="MaintainandAdmin" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-MaintainandAdmin" type="button" role="tab" aria-controls="nav-tabpanel-1-MaintainandAdmin" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-MaintainandAdmin">
  Maintain and Admin
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-Read" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-Read">
<p>If you can see the repository on GitHub you have read access (or
higher).</p>
<p>If you click on a link to a repository and get GitHub’s 404 not found
page:</p>
<ol style="list-style-type: decimal">
<li>Check if you have SSO (Single Sign On) to the relevant
organisation.</li>
<li>Ask the repository admins for read access.</li>
</ol>
</div>
<div id="nav-tabpanel-1-Triage" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-Triage">
<p>If you can add labels and assign yourself to Issues and PRs you have
triage access (or higher).</p>
</div>
<div id="nav-tabpanel-1-Write" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-Write">
<p>With write access you will be able to edit files on GitHub.</p>
<ol style="list-style-type: decimal">
<li>Go to the GitHub repository.</li>
<li>Scroll down to the top of the rendered README.</li>
<li>In the top right corner of the README click on the <strong>Edit
file</strong> pencil icon.</li>
</ol>
<p>If you don’t have write access this message is displayed in a
banner:</p>
<p>You need to fork this repository to propose changes. You’re making
changes in a project you don’t have write access to.</p>
<p>If you have write access (or higher), GitHub’s online editor will
appear.</p>
</div>
<div id="nav-tabpanel-1-MaintainandAdmin" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-MaintainandAdmin">
<p>If you have Maintain or Admin privileges you can edit the
repositories settings. Navigate to the top right
<strong>Settings</strong> tab from the repository homepage.</p>
<p>See the <a href="https://docs.github.com/en/organizations/managing-user-access-to-your-organizations-repositories/managing-repository-roles/repository-roles-for-an-organization" class="external-link">GitHub
documentation</a> for the differences between Maintainers and
Admins.</p>
</div>
</div>
</div>
<div id="add-a-comment-to-the-confirm-access-issue" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="add-a-comment-to-the-confirm-access-issue" class="callout-inner">
<h3 class="callout-title">Add a comment to the Confirm Access Issue</h3>
<div class="callout-content">
<p>Your instructors have set up an Issue on the git-training-demo
repository with the title <strong>Confirm Access</strong>.</p>
<p>Navigate to the Issue and add a comment saying: <strong>I’m
here!</strong>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>On a repository you own or are an admin on navigate to <a href="https://github.com/%3Corganisation%3E/%3Crepository%3E/settings/access" class="external-link"><code>https://github.com/&lt;organisation&gt;/&lt;repository&gt;/settings/access</code></a>
to control access for collaborators.</li>
<li>You can give individuals or teams access to a repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>The <a href="https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-user-account-settings/permission-levels-for-a-personal-account-repository" class="external-link">GitHub
documentation</a> has more information on permissions for a repository
on a personal account.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The <a href="https://docs.github.com/en/organizations/managing-user-access-to-your-organizations-repositories/managing-repository-roles/repository-roles-for-an-organization" class="external-link">GitHub
documentation</a> has more information on the different permission
levels for repositories in organisations.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div></section><section id="aio-01-issues"><p>Content from <a href="01-issues.html">Issues</a></p>
<hr>
<p>Last updated on 2025-02-26 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/01-issues.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What information should go on an Issue?</li>
<li>What are Issue templates?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create an Issue with the correct labels.</li>
<li>Assign yourself to an Issue.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>GitHub Issues (tickets) are where you plan and track work. You can
assign individuals to Issues and label them with a relevant tag such as
<code>bug</code> or <code>enhancement</code>. Before opening a new Issue
check whether there is already one open for the feature or bug by using
GitHub’s search.</p>
<p>Here’s some advice for writing good Issues:</p>
<ul>
<li>Be clear and concise, provide plenty of detail</li>
<li>State the expected outcomes</li>
<li>Tag relevant collaborators</li>
<li>Break up large Issues into several small ones and or use checklists
to track tasks in the Issue</li>
</ul>
<p>Open an Issue on the <code>git-training-demo</code> repository to add
a file stating your favourite cloud type.</p>
<p>Navigate to the <strong>Issues</strong> tab:</p>
<figure><img src="../fig/github-fork-issue-open.png" alt="A screenshot of the git-training-demo repository showing the Issues view." class="figure mx-auto d-block"></figure><p>This repositories Issue tab looks different to the
<code>weather</code> repository you worked on in the Introduction to Git
&amp; GitHub lesson. It uses <a href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository" class="external-link">Issue
templates</a> to provide templates for bugs and feature requests. Click
on the green <strong>Get started</strong> button next to the
<strong>Feature request</strong> option:</p>
<figure><img src="../fig/github-fork-issue-1.png" alt="A screenshot of the git-training-demo repository showing an Issue being opened. The template has automatically added text to the description and labelled the Issue as an enhancement." class="figure mx-auto d-block"></figure><p>You can see the Issue has text in the description already. This is
from the template which provides a consistent structure to the Issues on
this repo. The template has also added the <code>enhancement</code>
label for you.</p>
<p>Add in a clear title such as “Add mo-fitzroy’s favourite cloud type”,
replace ‘mo-fitzroy’ with your GitHub username. Click <strong>Submit new
issue</strong>.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>It’s a good idea to remind learners that images can be dropped
straight into the Issue description. An image of a cloud should do!</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="projects-milestones-and-labels">Projects, milestones, and labels<a class="anchor" aria-label="anchor" href="#projects-milestones-and-labels"></a>
</h3>
<p>Your instructor has set up a Project and some custom milestones for
you to add to your Issue.</p>
<ul>
<li>
<a href="https://docs.github.com/en/issues/using-labels-and-milestones-to-track-work/managing-labels" class="external-link">Labels</a>
help you classify Issues and PRs.</li>
<li>
<a href="https://docs.github.com/en/issues/using-labels-and-milestones-to-track-work/about-milestones" class="external-link">Milestones</a>
group Issues and PRs, tracking their progress towards a common milestone
automatically.</li>
<li>
<a href="https://docs.github.com/en/issues/planning-and-tracking-with-projects/learning-about-projects/about-projects" class="external-link">Projects</a>
are a tool for planning and tracking work via GitHub. Multiple
repositories can be linked to a single project. Projects can have
multiple views depending on your needs; some have kanban boards and
gantt charts, others separate out an individual colleagues Issues to
avoid clutter.</li>
</ul>
<div id="assign-yourself-a-project-and-a-milestone-to-your-issue" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="assign-yourself-a-project-and-a-milestone-to-your-issue" class="callout-inner">
<h3 class="callout-title">Assign yourself, a project, and a milestone to your Issue</h3>
<div class="callout-content">
<p>On the right hand side of the Issue you can:</p>
<ol style="list-style-type: decimal">
<li>Assign yourself to the Issue so that others know you are working on
it.</li>
<li>Add the Issue to a Project by clicking on the cog next to the
Projects section. (If you don’t see a project related to the training
you might not have been granted permissions, ask your instructors for
help)</li>
<li>Assign the Issue to a milestone.</li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Issues are used to track and plan work.</li>
<li>Issue templates provide template text for the first comment for new
Issues of various types. They can auto-label Issues and encourage
collaborators to give plenty of detail.</li>
</ul>
</div>
</div>
</div>
</div></section><section id="aio-02-branching"><p>Content from <a href="02-branching.html">Branching Models</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/02-branching.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Which branching model is best for me?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the Feature Branch and Forking models.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the git-novice lesson you learnt how to develop features on a
branch and use a pull-request to merge the changes back into the
<code>main</code> branch. You were unknowingly using a Git branching
model called <strong>feature branch workflow</strong>.</p>
<p>As a reminder, we develop on branches to ensure that our development
code doesn’t affect the production code on the <code>main</code> branch.
Branches also allow your team to develop features in parallel.</p>
<p>A branching model (sometimes also called strategies or workflows) is
the model your team adopts when writing, merging and deploying code when
using a version control system. It is a set of rules that you must
follow which outline how your team and collaborators interact with a
shared codebase.</p>
<p>Having a clear model helps avoid merge conflicts, more on that later,
and clearly sets out to new collaborators how they can contribute to
your repository.</p>
<p>In this and the following episodes, we will outline some of the
branching models that teams use in order to organize their work. We will
look at their pros and cons and help decide which model you should
choose based on your teams needs.</p>
<p>A branching model aims to:</p>
<ul>
<li>Enhance productivity by ensuring proper coordination among
developers</li>
<li>Enable parallel development</li>
<li>Help organize a series of planned, structured releases</li>
<li>Map a clear path when making changes from development through to
production</li>
<li>Maintain a bug-free code where developers can quickly fix issues and
get these changes back to production without disrupting the development
workflow</li>
</ul>
<section><h2 class="section-heading" id="git-branching-models">Git Branching Models<a class="anchor" aria-label="anchor" href="#git-branching-models"></a>
</h2>
<hr class="half-width">
<p>Some version control systems are more geared towards certain
branching models. When using git you have a wide range of models to pick
from. This means the first rule when collaborating using git is: “Talk
about your branching model.”</p>
<p>A repository’s <code>CONTRIBUTING</code> file may include details of
their branching model. This information might also be in a repository’s
<code>README</code> file. If in doubt ask! You can also look at how
other people appear to be contributing to the repository.</p>
<p>Below are a few models:</p>
<hr>
<div class="section level3">
<h3 id="feature-branch">Feature Branch<a class="anchor" aria-label="anchor" href="#feature-branch"></a>
</h3>
<p>In this model every small change or “feature” gets its own branch
where the developers make changes. Once the feature is done, they submit
a pull request and merge it into the <code>main</code> branch after
review. Feature branches should be relatively short-lived. Each
collaborator must have <strong>write</strong> level, or higher,
permissions on the repository. There are 2 repositories for each person
to be mindful of, <strong><em>local</em></strong> and
<strong><em>origin</em></strong>.</p>
<div class="section level4">
<h4 id="pros">Pros<a class="anchor" aria-label="anchor" href="#pros"></a>
</h4>
<ul>
<li>Developers create each feature away from <code>main</code> so you
don’t affect production code.</li>
<li>Developers can create many features in parallel feature
branches.</li>
<li>It’s a simple model that’s easy for those new to git and your
project.</li>
<li>Easy to set up with continuous integration testing and
deployment.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cons">Cons<a class="anchor" aria-label="anchor" href="#cons"></a>
</h4>
<ul>
<li>If you don’t regularly merge changes to <code>main</code> into your
feature branch it can become outdated, leading to merge conflicts.</li>
<li>You may struggle if you need to maintain multiple production
versions simultaneously in the same repository.</li>
</ul>
<p>The Feature Branch model is sometimes called GitHub Flow. Note that
all branches and commits exist within the single GitHub, origin
repository. They are visible to anyone who has read access to the
repository. Any contributor can write to any branch that is not
explicitly protected.</p>
<pre class="mermaid"><code>---
title: Feature Branch Model
---
flowchart TD
  accDescr {A flowchart showing the feature branch model.
    Here developers work on their local copies of the
    GitHub repository. All developers have write access
    or higher. Developers work on feature branches,
    and push these branches to the origin repository.}
  subgraph subGraph0["Remote Server (GitHub)"]
    r1[("MetOffice/git-training-demo Origin Repository")]
  end
  subgraph subGraph1["&lt;div style=margin-top:&gt;Computer 3&lt;/div&gt;"]
    r2[("Local Repository")]
  end
  subgraph subGraph2["&lt;div style=margin-top:&gt;Computer 2&lt;/div&gt;"]
    r3[(" Local Repository")]
  end
  subgraph subGraph3["&lt;div style=margin-top:&gt;Computer 1&lt;/div&gt;"]
    r4[("Local Repository")]
  end
    r1 -- fetch/pull --&gt; r2 &amp; r3 &amp; r4
    r2 -. push .-&gt; r1
    r3 -. push .-&gt; r1
    r4 -. push .-&gt; r1

style subGraph1 fill:#A9640A
style subGraph2 fill:#A9640A
style subGraph3 fill:#A9640A</code></pre>
<pre class="mermaid"><code>---
config:
  gitGraph:
    showCommitLabel: false
---
    gitGraph
        accDescr {A git graph showing four branches including the default
        main branch.
        Each circle is a commit.
        A circle with an outline but no fill colour is a merge commit
        where one branch has been merged into another.
        The two feature branches and the bug_fix branch
        all branch off of main at the same commit.
        The bug_fix and small_feature branches
        are merged back into main after
        being developed on their branches.
        The large_feature branch merges in the
        changes to main to fix any conflicts
        before the feature is ready to be merged
        back into the main branch via a pull request.}
        commit
        branch bug_fix
        checkout main
        branch small_feature
        checkout main
        branch large_feature
        checkout bug_fix
        commit
        checkout large_feature
        commit
        checkout main
        merge bug_fix
        checkout small_feature
        commit
        checkout large_feature
        commit
        checkout small_feature
        commit
        checkout main
        merge small_feature
        checkout large_feature
        commit
        merge main
        checkout main
        merge large_feature</code></pre>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="forking">Forking<a class="anchor" aria-label="anchor" href="#forking"></a>
</h3>
<p>In this model you make a <a href="https://gitprotect.io/blog/git-forking-workflow/" class="external-link"><strong>fork</strong></a>
(copy) of the whole repository you want to contribute to on GitHub in
your personal space. You develop your changes using this fork. When a
change is ready you open a pull request to contribute the changes back
to the original repository. There are 3 repositories for each person to
be mindful of, <strong><em>local</em></strong>,
<strong><em>origin</em></strong> (your fork), and
<strong><em>upstream</em></strong> (the original repository).</p>
<div class="section level4">
<h4 id="pros-1">Pros<a class="anchor" aria-label="anchor" href="#pros-1"></a>
</h4>
<ul>
<li>Removes the need to give all collaborators write level or higher
permissions on your repository. Anyone with read access to a repository
can contribute.</li>
<li>Only project maintainers can approve new code.</li>
<li>You can use any other model within your main repository and forks to
develop changes.</li>
</ul>
<p>All branches and commits exist within the collaborators fork, not the
<strong><em>upstream</em></strong> repository. They are harder to find
for anyone who has read access to the upstream repository.</p>
<p>Collaborators can use their fork to test more complex changes. For
example testing github actions within a dummy-PR.</p>
<pre class="mermaid"><code>---
title: Forking + Feature Branch
---
flowchart TB
  accDescr {A flowchart showing the use of forks
    and the feature branch model.
    Here developers work on their forks (GitHub copies, labelled origin) of the
    main GitHub repository (upstream).
    Developers work on feature branches in their fork,
    and push these branches to the origin repository.
    Pull requests are used to contribute changes from
    the origin to the upstream repository.
    Only one developers fork and local repository
    are shown in this diagram.}
  subgraph top["Remote Server (GitHub)"]
    direction LR
    r1[("MetOffice/git-training-demo Upstream Repository")]
    r2[("username/git-training-demo Origin Repository")]

    r2 -. Pull Request .-&gt; r1
  end
  subgraph bottom["Computer"]
    r3[("Local Repository")]
  end
    r1 -- fetch/pull --&gt; r3
    r3 -- push --&gt; r2
    r2 -- fetch/pull --&gt; r3

style bottom fill:#A9640A</code></pre>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="git-flow">Git Flow<a class="anchor" aria-label="anchor" href="#git-flow"></a>
</h3>
<p>In this model the main development occurs in a <code>develop</code>
branch. Feature branches are created from this <code>develop</code>
branch. When the <code>develop</code> branch is ready for a release, you
create a <code>release</code> branch which is then tested and merged
onto the <code>develop</code> and <code>main</code> branches.</p>
<div class="section level4">
<h4 id="pros-2">Pros<a class="anchor" aria-label="anchor" href="#pros-2"></a>
</h4>
<ul>
<li>There is a clear purpose for each branch.</li>
<li>Handles complex projects well.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cons-1">Cons<a class="anchor" aria-label="anchor" href="#cons-1"></a>
</h4>
<ul>
<li>Steeper learning curve, novices may require more help.</li>
</ul>
<pre class="mermaid"><code>    gitGraph
        accDescr {A git graph showing the GitFlow model.}
        commit tag:"0.1"
        branch hotfix
        checkout main
        branch release
        branch develop
        checkout hotfix
        commit
        checkout develop
        commit
        branch small_feature
        checkout develop
        merge hotfix
        branch large_feature
        checkout small_feature
        commit
        checkout large_feature
        commit
        commit
        checkout main
        merge hotfix tag:"0.2"
        checkout small_feature
        commit
        checkout develop
        merge small_feature
        checkout release
        merge develop
        checkout large_feature
        commit
        checkout release
        commit
        commit
        checkout main
        merge release tag:"1.0"
        checkout develop
        merge release</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="recommendations">Recommendations<a class="anchor" aria-label="anchor" href="#recommendations"></a>
</h2>
<hr class="half-width">
<p>For repositories where collaborators are a small and trusted group
the Feature Branch model is normally sufficient.</p>
<p>A Forking model may be preferable if:</p>
<ul>
<li>There are more collaborators, because the number of branches may
become unwieldy.</li>
<li>There are external collaborators whose contribution is valued, but
the repository owners need to retain control of the original. For this
reason most open source projects use a Forking Model.</li>
</ul>
<p>These working pattern are conventions not rules. It is easy to switch
from one working pattern to the other. Or even to use the feature branch
pattern for trusted colleagues and the forking pattern for outside
contributors.</p>
<p>This wasn’t an exhaustive list of branching models! You can find more
information using the links below:</p>
<ul>
<li><a href="https://gitprotect.io/blog/from-novice-to-pro-understanding-git-branching-strategies/" class="external-link">From
Novice to Pro: Understanding Git Branching Strategies,
GitProtect</a></li>
<li><a href="https://about.gitlab.com/topics/version-control/what-is-git-workflow/#forking-git-workflow" class="external-link">What
is a Git workflow?, GitLab</a></li>
</ul>
<div id="terminology" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="terminology" class="callout-inner">
<h3 class="callout-title">Terminology</h3>
<div class="callout-content">
<p>Use the glossary to explain the differences between the
following:</p>
<ul>
<li>A branch</li>
<li>A remote</li>
<li>A fork</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Learners are often confused by the difference between branches,
remotes, and forks.</p>
<ul>
<li>Branches are pointers to commits in a repository. A repository will
have multiple branches where developers can work on features in
parallel.</li>
<li>Remotes are <strong>links</strong> to other repositories. These
remotes usually link to repositories on cloud platforms such as GitHub.
A repository typically has one or more remotes, with the first called
<strong>origin</strong>.</li>
<li>A fork is a copy of a repository created on GitHub. When linking
your local repository your fork becomes the origin remote. The original
repository you forked from becomes the upstream remote.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A clearly communicated branching model helps developers.</li>
<li>For small projects use the Feature Branch flow.</li>
<li>For larger projects or those with external collaborators use forks
with feature branches.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-feature-branch"><p>Content from <a href="03-feature-branch.html">Feature Branch Model</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/03-feature-branch.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I use version control to collaborate with other people?</li>
<li>What are Pull Request templates?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the feature branch model to collaborate.</li>
<li>Clone a remote repository.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode we will use the Feature Branch model to contribute to
the <code>git-training-demo</code> repository.</p>
<p>You will need to get into pairs so that you can review each others
code changes. Your instructor may have already paired you with another
learner.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Working through the material independently
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>If you are working through the material in your own time, you will be
able to complete all the steps in this episode without another learner.
At the end of this episode you will need to wait for a repository admin
to review your work.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="cloning-a-repository">Cloning a Repository<a class="anchor" aria-label="anchor" href="#cloning-a-repository"></a>
</h2>
<hr class="half-width">
<p>You will both need to download a copy of the
<code>git-training-demo</code> repository. This is called “cloning a
repository”.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git clone git@github.com:metoffice/git-training-demo.git</span></code></pre>
</div>
<p>Make sure to navigate to the <code>Desktop</code> folder first.</p>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Commands that communicate between repositories
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>In the Introduction to Version Control with Git and GitHub course you
learnt that only certain git commands communicate between
repositories.</p>
<p>They were:</p>
<ul>
<li>
<code>git fetch</code>: To fetch changes from a remote.</li>
<li>
<code>git pull</code>: To fetch changes from a remote and merge them
into a branch.</li>
<li>
<code>git push</code>: To push changes to a remote.</li>
</ul>
<p><code>git clone</code> also communicates with a remote. However it is
only used once to make a local copy of a remote.</p>
<p>There are also other git commands that interact with remote
repositories (e.g. <code>git ls-remote</code>), but none that appear in
this course.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="feature-branches">Feature Branches<a class="anchor" aria-label="anchor" href="#feature-branches"></a>
</h2>
<hr class="half-width">
<p>You can now make changes to the <code>git-training-demo</code>
repository using your clone. We will use a feature branch to develop our
change on:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd git-training-demo</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> 1_favourite_cloud</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch '1_favourite_cloud'</code></pre>
</div>
<p>Notice the name of the branch is prefixed by the number
<code>1</code>. This is the Issue number of the Issue you created in
Episode 2 Issues. Your team may choose a different naming convention
such as prefixing the branch name by <code>feature</code>,
<code>bug</code> etc.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Older Versions of Git / JASMIN Users
  </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p>The <code>git switch</code> command was added in Git version
<strong>2.23</strong>. To check your version run:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git <span class="at">--version</span></span></code></pre>
</div>
<p>If your version of Git is lower than <strong>2.23</strong> you should
use the <code>git checkout</code> command to swap branches. To create a
branch:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git checkout <span class="at">-b</span> 1_favourite_cloud</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch '1_favourite_cloud'</code></pre>
</div>
<p>To swap to a branch leave out the <code>-b</code> flag:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git checkout 1_favourite_cloud</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch '1_favourite_cloud'</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Add in a new file <code>cloud-mo-fitzroy.md</code>, replace
<code>mo-fitzroy</code> with your username:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> nano cloud-mo-fitzroy.md</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">$</span> cat cloud-mo-fitzroy.md</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># My Favourite Cloud

Light and fluffy cumulus.    </code></pre>
</div>
<div id="add-in-whitespace" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="add-in-whitespace" class="callout-inner">
<h3 class="callout-title">Add in whitespace!</h3>
<div class="callout-content">
<p>To demonstrate automated testing via GitHub, add some spaces to the
end of a line in your file.</p>
</div>
</div>
</div>
<p>Add and commit your changes:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git add cloud-mo-fitzroy.md</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds Robert Fitzroy's favourite cloud"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1_favourite_cloud b7f26e6] Adds Robert Fitzroy's favourite cloud
 1 file changed, 3 insertions(+)
 create mode 100644 cloud-mo-fitzroy.md</code></pre>
</div>
<p>Then push the changes to GitHub:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 4 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 357 bytes | 178.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
remote:
remote: Create a pull request for '1_favourite_cloud' on GitHub by visiting:
remote:      https://github.com/MetOffice/git-training-demo/pull/new/1_favourite_cloud
remote:
To github.com:metoffice/git-training-demo.git
 * [new branch]      1_favourite_cloud -&gt; 1_favourite_cloud
branch '1_favourite_cloud' set up to track 'origin/1_favourite_cloud'.</code></pre>
</div>
<p>Note that we didn’t have to create a remote called
<code>origin</code>: Git uses this name by default when we clone a
repository. This is why <code>origin</code> was a sensible choice in the
git-novice lesson when we were setting up remotes by hand.</p>
<p>Take a look at the repository on GitHub again, and you should be able
to see the <code>1_favourite_cloud</code> branch. You may need to
refresh your browser to see the new branch.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  fatal: no upstream branch
  </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler4" aria-labelledby="headingSpoiler4">
<div class="accordion-body">
<p>If you see a message similar to the following:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>fatal: The current branch 1_favourite_cloud has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin 1_favourite_cloud

To have this happen automatically for branches without a tracking
upstream, see 'push.autoSetupRemote' in 'git help config'.</code></pre>
</div>
<p>You will need to set the name of the upstream GitHub branch using the
recommended <code>git push</code> command.</p>
<p>You can get git to automatically set the upstream branch. This avoids
having to run git push with the –set-upstream flag the first time you
push from a new branch.</p>
<p>Change your git config using:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> push.autoSetupRemote true</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Some more about remotes
  </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler5" aria-labelledby="headingSpoiler5">
<div class="accordion-body">
<p>In this episode and in the git-novice lesson, our local repository
only had a single “remote”, called <code>origin</code>. A remote is a
copy of the repository that is hosted somewhere else, that we can push
to and pull from, and there’s no reason that you have to work with only
one. For example, on some large projects you might have your own copy in
your own GitHub account (you’d probably call this <code>origin</code>)
and also the main “upstream” project repository (let’s call this
<code>upstream</code> for the sake of examples). You would pull from
<code>upstream</code> from time to time to get the latest updates that
other people have committed. We will practice using an
<code>upstream</code> repository later in the forking model.</p>
<p>Remember that the name you give to a remote only exists locally. It’s
an alias that you choose - whether <code>origin</code>, or
<code>upstream</code>, or <code>mo-fitzroy</code> - and not something
intrinsic to the remote repository.</p>
<p>The <code>git remote</code> family of commands is used to set up and
alter the remotes associated with a repository. Here are some of the
most useful ones:</p>
<ul>
<li>
<code>git remote -v</code> lists all the remotes that are configured
(we already used this in the last episode)</li>
<li>
<code>git remote add [name] [url]</code> is used to add a new
remote</li>
<li>
<code>git remote remove [name]</code> removes a remote. Note that it
doesn’t affect the remote repository at all - it just removes the link
to it from the local repo.</li>
<li>
<code>git remote set-url [name] [newurl]</code> changes the URL that
is associated with the remote. This is useful if it has moved, e.g. to a
different GitHub account, or from GitHub to a different hosting service.
Or, if we made a typo when adding it!</li>
<li>
<code>git remote rename [oldname] [newname]</code> changes the local
alias by which a remote is known - its name. For example, one could use
this to change <code>upstream</code> to <code>mo-fitzroy</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="open-a-pr">Open a PR<a class="anchor" aria-label="anchor" href="#open-a-pr"></a>
</h2>
<hr class="half-width">
<p>In the git-novice lesson you practised opening a <a href="https://www.astropython.com/git-novice/10-pull-requests.html" class="external-link">pull
request</a>.</p>
<p>You should see a notification appear on GitHub telling you the
<code>1_favourite_cloud</code> branch had recent pushes. The
Collaborator should click on the green <strong>Compare &amp; pull
request</strong> button to open the PR.</p>
<p>If you don’t see this notification click on the branches dropdown,
the button showing <code>main</code>, and click on the
<code>1_favourite_cloud</code> branch.</p>
<figure><img src="../fig/feature-branch-1.png" alt="A screenshot of the GitHub weather repository showing the branch selection dropdown." class="figure mx-auto d-block"></figure><p>You should now see the Code view for the
<code>1_favourite_cloud</code> branch and a <strong>Contribute</strong>
button. Click on the <strong>Contribute</strong> button and select the
green <strong>Open pull request</strong> option.</p>
<figure><img src="../fig/feature-branch-2.png" alt="A screenshot of the GitHub weather repository showing code view for the 1_favourite_cloud branch. The Contribute dropdown is expanded to show the Open pull request option." class="figure mx-auto d-block"></figure><p>You may have noticed when running <code>git push</code> on the
<code>1_favourite_cloud</code> branch for the first time the output
contained:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Create a pull request for '1_favourite_cloud' on GitHub by visiting:
remote:      https://github.com/MetOffice/git-training-demo/pull/new/1_favourite_cloud</code></pre>
</div>
<p>You could have also followed this link to create a new PR. We
recommend you always open a <strong>draft</strong> PR after your first
push. This gives you access to a diff of your changes against the target
branch (usually <code>main</code>). When the changes are ready for
review you can mark the PR as <strong>Ready for review</strong>.</p>
</section><section><h2 class="section-heading" id="pull-request-templates">Pull Request Templates<a class="anchor" aria-label="anchor" href="#pull-request-templates"></a>
</h2>
<hr class="half-width">
<p>Notice the description has filled with a template. Just like this
repository used Issue templates it also uses a <a href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository" class="external-link">PR
template</a>.</p>
<p>This template has a checklist that needs to be completed before
opening the PR<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. It also has checklists for science and
code review. In the description scroll down to the checklists which look
like this:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> I have read <span class="in">`CONTRIBUTING.md`</span>.</span></code></pre>
</div>
<p>Some open source projects require you to add your name to a list of
contributors. We will do this later so for now mark the task as
complete. Replace the space in the square checkbox brackets with an
<code>x</code> to mark the task as complete:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ss">- </span><span class="va">[x]</span> I have read <span class="in">`CONTRIBUTING.md`</span>.</span></code></pre>
</div>
<p>Now when you open the PR it should look something like this:</p>
<figure><img src="../fig/github-fork-pr-1.png" alt="A screenshot of a users  pull request from their fork back to the upstream git-training-demo repository." class="figure mx-auto d-block"></figure><p>This image shows PR number <code>#2</code>. This PR will close/fix
Issue number <code>#1</code> (the top left arrow). You can request a
review on the top right. Some repositories will be set up to
automatically assign a reviewer based on how many reviews each team
member currently has open<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. The middle arrow is where you assign
yourself to the PR. The bottom arrow shows the checklist items we marked
as complete.</p>
<p>At the bottom of your PR you can see that a review is required before
merging and some checks were not successful. This repository has
automatic checks for trailing whitespace, accidentally adding large
files etc. More information on setting up these checks can be found in
the optional episode on <a href="./09-pre-commit.html">pre-commit
hooks</a>.</p>
<div id="automatically-closing-issues-via-prs" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="automatically-closing-issues-via-prs" class="callout-inner">
<h3 class="callout-title">Automatically closing Issues via PRs</h3>
<div class="callout-content">
<p>A PR can automatically close an Issue when it is merged into
<code>main</code>. To use this GitHub functionality replace the
templates <code>Fixes &lt;#ISSUE_NUMBER&gt;</code> line with either:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>Closes #1</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">MD<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode md" tabindex="0"><code class="sourceCode markdown"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>Fixes #1</span></code></pre>
</div>
<p>Make sure you change <code>1</code> to your Issue number. The <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue" class="external-link">GitHub
Documentation</a> has more information on linking PRs to Issues.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="fixing-failing-checks">Fixing Failing Checks<a class="anchor" aria-label="anchor" href="#fixing-failing-checks"></a>
</h2>
<hr class="half-width">
<p>Your changes did not pass the automatic pre-commit checks. The
quickest way to check why a test failed is to click on the <strong>Pull
request checks / pre-commit</strong> link near the bottom of the PR. Or
you can navigate to the <strong>Checks</strong> tab in the PR, then
select <strong>Pull request checks</strong> and click on the failing
test.</p>
<figure><img src="../fig/pre-commit-check-fail-1.png" alt="A screenshot of a users failing pre-commit check showing the whitespace test has failed." class="figure mx-auto d-block"></figure><p>You can see in the test output trailing whitespace has been found.
This caused the tests to fail. Lower down in the output you will see the
filename, and a diff of the line with the whitespace.</p>
<p>Go back to your local repository and remove the whitespace:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> nano cloud-mo-fitzroy.md</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">$</span> cat cloud-mo-fitzroy.md</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># My Favourite Cloud

Light and fluffy cumulus.</code></pre>
</div>
<p>Add and commit your changes:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> git add cloud-mo-fitzroy.md</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Removes whitespace"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1_favourite_cloud c74c7e1] Removes whitespace
 1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div>
<p>Push these changes to GitHub:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<p>Navigate back to your PR. You should now see a message saying all
checks have passed. Merging is still blocked until a colleague reviews
our code.</p>
<p>In the next episode we will look at how these changes are reviewed
and merged back into <code>main</code>.</p>
<div id="assign-a-reviewer" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="assign-a-reviewer" class="callout-inner">
<h3 class="callout-title">Assign a Reviewer</h3>
<div class="callout-content">
<p>Assign the other learner in your pair as the reviewer by clicking on
the cog to the right of the Reviewers section.</p>
<p>On the right hand side of the PR you can also:</p>
<ol style="list-style-type: decimal">
<li>Assign yourself to the PR.</li>
<li>Add labels to the PR.</li>
<li>Add the PR to a Project by clicking on the cog next to the Projects
section. (If you don’t see a project related to the training you might
not have been granted permissions, ask your instructors for help)</li>
<li>Assign the PR to a milestone.</li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Cloning a repository gives you a local copy of the repository:
<code>git clone &lt;repository&gt; &lt;directory&gt;</code>
</li>
<li>Automatically close Issues when a PR is merged by adding a
<code>Closes #&lt;Issue number&gt;</code> line to the first comment in
the PR.</li>
<li>Pull Request templates provide template text for the first comment
for new Issues of various types, and Pull Requests. They can auto-label
Issues and encourage collaborators to give plenty of detail.</li>
</ul>
</div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>You can also open a draft PR and then edit the top
comment to mark the checklist tasks as completed.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The <a href="https://docs.github.com/en/organizations/organizing-members-into-teams/managing-code-review-settings-for-your-team" class="external-link">GitHub
Documentation</a> has more information on automatically assigning
reviewers.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div></section><section id="aio-04-review"><p>Content from <a href="04-review.html">Review</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/04-review.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 70 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I see a diff of the changes?</li>
<li>How can I make inline comments or suggested changes?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Review changes made by collaborators.</li>
<li>Respond to a review.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this section we will explore how to properly review code and
suggest changes if necessary. Both science and code reviews happen in a
Pull Request. The general process is outlined in the diagram below:</p>
<pre class="mermaid"><code>sequenceDiagram
   accDescr {A sequence diagram showing the process of reviewing.}
   autonumber
   actor Developer
   actor Reviewer

   Developer-&gt;&gt;Reviewer: Request a reviewer
   Reviewer-&gt;&gt;Reviewer: #32;
   Note over Reviewer: Add the reviewer&lt;br/&gt;to the pull request
   Reviewer-&gt;&gt;Reviewer: #32;
   Note over Reviewer: Perform the review
   loop
      Reviewer-&gt;&gt;Developer: Submit the review
      Developer-&gt;&gt;Developer: #32;
      Note over Developer: Respond to each&lt;br/&gt;review comment
      Developer-&gt;&gt;Reviewer: Re-request a review
      Reviewer-&gt;&gt;Reviewer: #32;
      Note over Reviewer: Respond to each review&lt;br/&gt;comment response
   end
   Reviewer-&gt;&gt;Developer: Approve the pull request</code></pre>
<p>Make sure you know who is in your pair. Find your colleagues open PR
on the <code>git-training-demo</code> repository using the Pull Requests
tab or find the request for review in your notifications.</p>
<section><h2 class="section-heading" id="reviewing-changes">Reviewing Changes<a class="anchor" aria-label="anchor" href="#reviewing-changes"></a>
</h2>
<hr class="half-width">
<p>You can add general science and code review comments in the
<strong>Conversation</strong> tab. To review specific files go to the
<strong>Files changed</strong> tab:</p>
<figure><img src="../fig/pr-1.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The diff is shown with Split view." class="figure mx-auto d-block"></figure><p>This tab shows a diff (difference) between your feature branch,
<code>1_favourite_cloud</code>, and the target branch,
<code>main</code>. Your diff might look different, to swap between
<strong><em>Unified</em></strong> and <strong><em>Split</em></strong>
view click on the cog dropdown:</p>
<figure><img src="../fig/pr-2.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The cog dropdown has been clicked to show how to change the diff view between Unified and Split." class="figure mx-auto d-block"></figure><p>The default view shows a diff of the source code. We’ll stick with
source code diffs for this lesson but you can change the view to rich
diffs to display rendered changes to Markdown or Jupyter Notebook files.
Click on the file icon on the far right of a diff for the file to swap
to a rich diff:</p>
<figure><img src="../fig/pr-rich-diff.png" alt="A screenshot of a PR showing the diff in the Files changed tab using the rich diff view." class="figure mx-auto d-block"></figure><p>To start a review you can click on the green <strong>Review
changes</strong> button:</p>
<figure><img src="../fig/pr-3.png" alt="A screenshot of a PR showing the diff in the Files changed tab. The Review changes button has been clicked to show the Review popup." class="figure mx-auto d-block"></figure><p>Normally it is useful to review each file one at a time and make
comments inline first before adding general comments. Close the review
popup and hover next to a line number until it becomes highlighted.
Click on the line to add an inline comment:</p>
<figure><img src="../fig/pr-4.png" alt="A screenshot of a PR showing the diff in the Files changed tab. A line has been highlighted to show how to add an inline comment." class="figure mx-auto d-block"></figure><p>Inline comments can cover multiple lines. Click on the first line
number then drag your mouse down to the last line your comment
covers.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Ensure you show learners how to create multiline comments. It doesn’t
matter if learners choose to leave a single or multiline
comment/suggestion for their review.</p>
</div>
</div>
</div>
</div>
<p>You can make suggested changes using inline comments. Click on the
file icon or press <kbd>Ctrl+g</kbd>:</p>
<figure><img src="../fig/pr-suggestion.png" alt="A screenshot of a PR showing the diff in the Files changed tab. A line has been highlighted to show how to add an inline comment with a suggestion." class="figure mx-auto d-block"></figure><p>Add in a suggested change for your review. Click on the green
<strong>Start a review</strong> button. Now click on the green button in
the top right which says <strong>Finish your review</strong> or
<strong>Review Changes</strong>, add a comment, and select
<strong>Request changes</strong>. When you’re finished click the green
<strong>Submit review</strong> button.</p>
<figure><img src="../fig/pr-suggestion-2.png" alt="A screenshot of a PR showing the diff in the Files changed tab showing the review popup." class="figure mx-auto d-block"></figure><p>The PRs <strong>Conversation</strong> tab now looks like this towards
the bottom of the page:</p>
<figure><img src="../fig/pr-review-1.png" alt="A screenshot of a PR showing the Conversation tab with a review that has requested changes." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="responding-to-review">Responding to Review<a class="anchor" aria-label="anchor" href="#responding-to-review"></a>
</h2>
<hr class="half-width">
<p>Now you will respond to the review on the PR that you opened.</p>
<p>You can see merging is blocked because our reviewer has requested
changes. You also have the option to commit the suggested change to your
branch directly via the PR. Click on the <strong>Commit
suggestion</strong> button. In the popup add a description then click on
<strong>Commit changes</strong>:</p>
<figure><img src="../fig/pr-review-2.png" alt="A screenshot of a PR showing the Conversation tab with a review that has requested changes." class="figure mx-auto d-block"></figure><p>You could have also committed the suggested changes to your feature
branch using your local copy, pushed the changes to GitHub and then
marked the conversation with the suggested change as resolved.</p>
<p>Re-request a review by clicking on the two arrows forming a circle
next to the reviewers name at the top of the PR.</p>
<div id="help-some-checks-have-failed" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="help-some-checks-have-failed" class="callout-inner">
<h3 class="callout-title">Help: Some checks have failed</h3>
<div class="callout-content">
<p>Since our PR is running automatic checks it’s best not to make large
changes by accepting suggestions this way. Instead make changes to your
feature branch using your local copy, run the <a href="09-pre-commit.html">checks locally</a>, push the changes to GitHub
and then mark the conversations with the suggested changes as resolved.
You can add a commit hash in the conversation which will automatically
link to the commit responding to any review comments.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="approving-changes">Approving Changes<a class="anchor" aria-label="anchor" href="#approving-changes"></a>
</h2>
<hr class="half-width">
<p>Head back to your partners PR, if they re-requested a review you will
have received another notification.</p>
<p>The Conversation tab should update to show the suggestion as
<strong>Outdated</strong> because it has been resolved. It also gives
you the option to view the new changes since your last review.</p>
<figure><img src="../fig/pr-review-3.png" alt="A screenshot of a PR showing the Conversation tab with a requested change that has been resolved." class="figure mx-auto d-block"></figure><p>Click on the <strong>View changes</strong> button. If you are happy
that your requested changes have been addressed then you can approve the
PR:</p>
<figure><img src="../fig/pr-review-4.png" alt="A screenshot of a PR showing the Files changed tab showing how to Approve a review." class="figure mx-auto d-block"></figure><p>Swap back to the Conversations tab. The PR is now ready to merge and
has no conflicts with the base (<code>main</code> in this case)
branch.</p>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor2" aria-labelledby="headingInstructor2">
<div class="accordion-body">
<p>Important!</p>
<blockquote>
<p>Click any of the 3 merge options</p>
</blockquote>
<p>The two instructors can select squash and merge, and rebase and
merge. Some learners will have skipped ahead and already clicked on a
normal merge. This guarantees the repository history shows all three
merge types.</p>
</div>
</div>
</div>
</div>
<p>Click any of the 3 merge options; don’t forget to move the PR number
to the start of the commit message like you did in the Version Control
with Git lesson:</p>
<figure><img src="../fig/pr-review-5.png" alt="A screenshot of a PR showing the Conversations tab. The PR is ready to merge." class="figure mx-auto d-block"></figure><div id="who-presses-the-merge-button" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="who-presses-the-merge-button" class="callout-inner">
<h3 class="callout-title">Who presses the merge button?</h3>
<div class="callout-content">
<p>In this case both the contributor and reviewer have write access to
the repository. This means they can both merge and close the PR and it
is up to your team to decide whether the contributor or the reviewer
does the merge as part of your working practices.</p>
<p>When using the forking model later the reviewer always merges the PR
as the contributor will not have sufficient permissions.</p>
</div>
</div>
</div>
<p>When your PR is merged the Conversations tab will show:</p>
<figure><img src="../fig/pr-review-6.png" alt="A screenshot of a PR showing the Conversations tab. The notification tells us our PR has been successfully merged and closed." class="figure mx-auto d-block"></figure><p>You can now delete the branch from GitHub by pressing the
<strong>Delete branch</strong> button. Some repositories will be
automatically set up to delete the feature branch after a PR is
successfully merged.</p>
<p>If you head back to the main page of the
<code>git-training-demo</code> repository you will see your new file in
the code view for the <code>main</code> branch. The commit message for
the PR merge is shown next to it. If you hover over the PR number (in
this case <code>#2</code>) a popup will appear with details of the
merged PR. Click on the number to take you to the closed PR.</p>
<figure><img src="../fig/pr-review-7.png" alt="A screenshot of the weather repositories main Code tab showing the files in the main branch. The new shipping-forecast.md file can be seen with the commit message from the PR squash and merge commit that created it. The PR number, #4, link is being hovered over to display a popup with brief details of PR #4." class="figure mx-auto d-block"></figure><p>Head over to the repositories <strong>Issues</strong> tab. Check that
your Issue for adding your favourite cloud file was closed when you
merged the PR.</p>
<div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor3" aria-labelledby="headingInstructor3">
<div class="accordion-body">
<p>There may not be time for learners to complete the challenge
(updating their local main branch and deleting their local feature
branch). You should update your local main branch and use
<code>git log --oneline --graph</code> to demonstrate the messy history
that has been created due to each learner selecting a random merge
strategy in their PRs.</p>
<p>You can also show learners the Network Graph on the Insights tab in
GitHub. This will show the history of the repository and can be
contrasted with forking in the afternoon sessions.</p>
</div>
</div>
</div>
</div>
<div id="local-cleanup" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="local-cleanup" class="callout-inner">
<h3 class="callout-title">Local Cleanup</h3>
<div class="callout-content">
<p>In the <a href="https://www.astropython.com/git-novice/10-pull-requests.html#updating-your-local-repo" class="external-link">git-novice</a>
lesson you learnt how to pull changes and clean up your branches after
merging a PR.</p>
<p>You can now:</p>
<ol style="list-style-type: decimal">
<li>Update your local copy of the <code>git-training-demo</code>
repository</li>
<li>Delete any branches that are no longer necessary</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Update your local copy of the <code>git-training-demo</code>
repository</li>
</ol>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> git switch main</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">$</span> git pull</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 1), reused 0 (delta 0), pack-reused 0 (from 0)
Unpacking objects: 100% (3/3), 1.07 KiB | 20.00 KiB/s, done.
From github.com:metoffice/git-training-demo
   39720d8..9bdd3b8  main       -&gt; origin/main
Updating 39720d8..9bdd3b8
Fast-forward
 cloud-mo-fitzroy.md | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 cloud-mo-fitzroy.md</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Delete any branches that are no longer necessary</li>
</ol>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git remote prune origin</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Pruning origin
URL: git@github.com:metoffice/git-training-demo.git
 * [pruned] origin/1_favourite_cloud</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> git branch <span class="at">-D</span> 1_favourite_cloud</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Deleted branch 1_favourite_cloud (was b7f26e6).</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="how-was-your-pr-merged" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="how-was-your-pr-merged" class="callout-inner">
<h3 class="callout-title">How was your PR merged?</h3>
<div class="callout-content">
<p>In this episode you merged each others PRs. The reviewer used a
random merge strategy to merge each PR.</p>
<p>Explore the history of the repository with <code>git log</code> and
find your PR merge. How has the chosen merge strategy affected the
repositories history?</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A Pull Request (PR) is where your code and science review takes
place.</li>
<li>General review comments go in the PR <strong>Conversations</strong>
tab.</li>
<li>View a diff of the changes in the PR <strong>Files changed</strong>
tab.</li>
<li>Make inline comments or suggested changes in the <strong>Files
changed</strong> tab using the diff.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-Break"><p>Content from <a href="Break.html">Break</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/Break.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>You’ve now used the Feature Branch model to:</p>
<ol style="list-style-type: decimal">
<li>Open an Issue describing the feature or bug</li>
<li>Clone a repository</li>
<li>Create a branch to develop your changes on</li>
<li>Make changes to your working copy</li>
<li>Open a Pull Request</li>
<li>Respond to review</li>
<li>Update your local copy and tidy up your branches</li>
</ol>
<pre class="mermaid"><code>sequenceDiagram
    accDescr {A sequence diagram showing the steps for the branching model.}
    autonumber
    participant GHM as origin main
    participant GHF as origin feature
    participant M as main
    GHM --&gt;&gt; GHM: #f
    Note over GHM: Open an Issue for the change
    GHM --&gt;&gt; M: #f
    Note right of GHM: First time: git clone&lt;br/&gt;Then: git pull
    create participant F as feature
    M -&gt;&gt; F: Create a feature branch:&lt;br/&gt;git switch -c feature
    loop
        F -&gt;&gt; F: #f
        Note over F: Develop changes:&lt;br/&gt;git add&lt;br/&gt;git commit
    end
    F --&gt;&gt; GHF: #f
    Note left of F: Push to GitHub: git push&lt;br/&gt;The first push creates origin feature!
    destroy GHF
    GHF -&gt;&gt; GHM: #f
    Note left of GHF: Pull Request and then Merge.&lt;br/&gt;Delete origin feature branch.
    GHM --&gt;&gt; M: #f
    Note right of GHM: git pull
    Note over F: Delete branch:&lt;br/&gt;git branch -D feature
    box GitHub Remote
    participant GHM
    participant GHF
    end
    box Local
    participant M
    participant F
    end</code></pre>
<p>Take a break - get up and move about.</p></section><section id="aio-07-history"><p>Content from <a href="07-history.html">History</a></p>
<hr>
<p>Last updated on 2025-04-03 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/07-history.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why is a linear history useful?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Visualise our git history.</li>
<li>Learn the difference between merge, squash merge, and rebase.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The history of your repository is simply its commits. A more linear
history is easier to understand and can be helpful when using certain
git commands to explore your history.</p>
<p>Your Git history will look different depending on the merge strategy
you use when merging PRs and whether you allow merging <code>main</code>
into a feature branch. It’s up to you and your team to decide which
strategy is best for your repository.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Viewing History
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>In the <a href="https://www.astropython.com/git-novice/05-history.html" class="external-link">Introduction
to Version Control with Git</a> lesson you learnt that we can use the
<code>git log</code> command to view the commit history of our
repository.</p>
<p>We can use certain flags with <code>git log</code> to better
visualise the history in graph form:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<p>The <a href="https://git-scm.com/docs/git-log" class="external-link">GitHub Documentation
for git log</a> has information on all the available flags. Some useful
examples of <code>git log</code> alias’s and flags can be found on <a href="https://stackoverflow.com/questions/1838873/visualizing-branch-topology-in-git/34467298#34467298" class="external-link">this
Stackoverflow comment</a>.</p>
</div>
</div>
</div>
</div>
<div id="ide-git-history-extensions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ide-git-history-extensions" class="callout-inner">
<h3 class="callout-title">IDE Git History Extensions</h3>
<div class="callout-content">
<p>Your IDE may have extensions which render your git history as easy to
read graphs. If you use VSCode we recommend the <a href="https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph" class="external-link">Git
Graph extension</a>.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="merge-options">Merge Options<a class="anchor" aria-label="anchor" href="#merge-options"></a>
</h2>
<hr class="half-width">
<p>When you open a PR you are given three options for merging your
feature branch into <code>main</code>. We will now explore how each
merging method affects the history of your repository. In all the
examples below we start with the same git history.</p>
</section><section><h2 class="section-heading" id="merge">Merge<a class="anchor" aria-label="anchor" href="#merge"></a>
</h2>
<hr class="half-width">
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with a feature branch branching off at the second commit of main.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Using merge creates a merge commit joining the two branches:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of merging a feature branch with the main branch. The history is non-linear in this case and difficult to read.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'
    checkout main
    merge feature</code></pre>
<p>This results in a non-linear history which can be hard to navigate.
You can avoid this non-linear history by rebasing your
<code>feature</code> branch before you merge. Rebasing a branch before
you submit a PR for review is covered in the next episode.</p>
<p>Some teams choose to use Merge because it keeps all the individual
commits that made up your change so more accurately represents the
history of your repository.</p>
</section><section><h2 class="section-heading" id="squash-and-merge">Squash and Merge<a class="anchor" aria-label="anchor" href="#squash-and-merge"></a>
</h2>
<hr class="half-width">
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with a feature branch branching off at the second commit of main.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Squashing before merging squashes all the commits on the feature
branch into one commit which is then merged onto main:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of squashing then merging a feature branch with the main branch.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    commit id: '62440f8'
    commit id: '5rtw8bq Squash &amp; Merge Cool feature'</code></pre>
<p>The last commit on main
<code>5rtw8bq Squash &amp; Merge Cool feature</code> is the two feature
branch commits squashed together into a new one.</p>
<p>Here the history is linear but all our commits have been squashed
into one. If you have a very large branch with many commits you might
not want to squash them all into one commit. Squashing in this case will
make bug hunting harder. Remember you should try and break work down
into small pieces so you avoid huge branches.</p>
</section><section><h2 class="section-heading" id="rebase">Rebase<a class="anchor" aria-label="anchor" href="#rebase"></a>
</h2>
<hr class="half-width">
<p>Starting with:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with a feature branch branching off at the second commit of main.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    branch feature
    checkout feature
    commit id: '7cec787 Cool feature'
    checkout main
    commit id: '62440f8'
    checkout feature
    commit id: 'cd2db46 Cool feature docs'</code></pre>
<p>Rebase re-writes your git history removing the <code>feature</code>
branch commits from the <code>feature</code> branch and adding them to
<code>main</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the result of rebasing a feature branch with the main branch.}
    commit id: '4631ebc'
    commit id: 'ee406ac'
    commit id: '62440f8'
    commit id: '9bfg54s Cool feature'
    commit id: '1vyd742 Cool feature docs'</code></pre>
<div id="rebase-re-writes-history" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="rebase-re-writes-history" class="callout-inner">
<h3 class="callout-title">Rebase Re-Writes History</h3>
<div class="callout-content">
<p>Rebasing re-writes your git history. Do <strong>NOT</strong> rebase
shared branches such as <code>main</code>.</p>
</div>
</div>
</div>
<p>Since rebase re-writes your history you have to force push to the
GitHub remote to override your remotes history. The history in this case
is linear and retains all the commits which makes it easier to search
for a commit that introduced a bug. Rebasing a feature branch can be
difficult / impossible if you have merged <code>main</code> into your
feature branch to update it with the latest changes or resolve
conflicts. You should choose to move your feature branch to the
<code>HEAD</code> of <code>main</code> using rebasing instead.</p>
<p>Your team will decide what approach is right for your project.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>git log --decorate --oneline --graph</code> lets you visualise
your repository history in graph form.</li>
<li>There are three options for merging your feature branch into
<code>main</code>.</li>
<li>merge: creates a merge commit and results in a non-linear history
unless you first rebase your feature branch.</li>
<li>squash and merge: squashes all your feature branch commits into one
merge commit on <code>main</code>. Your history is linear.</li>
<li>rebase: re-writes your git history so that all the feature branch
commits are now on <code>main</code>. Your history is linear.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-forks"><p>Content from <a href="05-forks.html">Forks</a></p>
<hr>
<p>Last updated on 2025-03-20 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/05-forks.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a fork?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a fork of a repository.</li>
<li>Contribute to the upstream repository using the fork.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Most open source projects require new collaborators to contribute via
a <strong>fork</strong> of the repository. A fork is simply a copy of
the repository that you make on the server, in our case GitHub, side.
This avoids having to give repository permissions to every single
collaborator<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. You may only have one fork of a repository
in your personal space or organisation.</p>
<p>In this episode we will create a fork and contribute a change to the
main GitHub repository using the feature branch model we have been
practising.</p>
<p>We will continue working on the <code>git-training-demo</code>
repository. Your permissions have been reduced so that you can no longer
push to the main Met Office repository, you will have to use a fork! The
main Met Office repository is now the <strong>upstream</strong>
repository for you fork.</p>
<section><h2 class="section-heading" id="open-an-issue">Open an Issue<a class="anchor" aria-label="anchor" href="#open-an-issue"></a>
</h2>
<hr class="half-width">
<p>Open a new issue like you did earlier to add more detail to your
favourite cloud file.</p>
</section><section><h2 class="section-heading" id="create-a-fork">Create a Fork<a class="anchor" aria-label="anchor" href="#create-a-fork"></a>
</h2>
<hr class="half-width">
<p>On the repository Code tab click on the <strong>Fork</strong>
dropdown arrow and then the <strong>+ Create a new fork</strong>
button:</p>
<figure><img src="../fig/github-fork.png" alt="A screenshot of the git-training-demo repository showing the fork dropdown with the Create a new fork button." class="figure mx-auto d-block"></figure><p>GitHub will take you to the <strong>Create a new fork</strong> page.
There is no need to edit anything on this page. Click on the green
<strong>Create fork</strong> button:</p>
<figure><img src="../fig/github-fork-2.png" alt="A screenshot of the GitHub Create a new fork page." class="figure mx-auto d-block"></figure><p>You should now see your repository fork. The repository is marked as
a fork by the fork symbol next to the repository organisation and name
in the top navigation bar. Under the main repository name you can see a
link to the repository we forked from. The notification at the bottom of
the screenshot shows whether your forks <code>main</code> branch is up
to date with the upstream repository. If you have commits on your fork
not present upstream you can <strong>Contribute</strong> your changes
upstream via a PR. If your fork is behind the upstream repository you
can <strong>Sync fork</strong> to pull in changes from the upstream
repository.</p>
<figure><img src="../fig/github-fork-3.png" alt="A screenshot of a fork of the git-training-demo repository. The repository is marked as a fork by the fork symbol next to the repository name and the link to the original repository under the repository name." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="make-changes">Make Changes<a class="anchor" aria-label="anchor" href="#make-changes"></a>
</h2>
<hr class="half-width">
<p>To avoid overwriting your local version of the original Met Office
<code>git-training-demo</code> repository you need to clone your fork to
a different location.</p>
<p>To clone the repository into your <code>Desktop</code> folder:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git clone git@github.com:mo-fitzroy/git-training-demo.git ~/Desktop/mo-fitzroy-git-training-demo</span></code></pre>
</div>
<p>Replace ‘mo-fitzroy’ with the Owner’s username.</p>
<p>If you choose to clone without the clone path
(<code>~/Desktop/mo-fitzroy-weather</code>) specified at the end, you
will clone inside the <code>git-training-demo</code> folder!</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Cloning into '~/Desktop/mo-fitzroy-git-training-demo'...
remote: Enumerating objects: 16, done.
remote: Counting objects: 100% (16/16), done.
remote: Compressing objects: 100% (16/16), done.
remote: Total 16 (delta 1), reused 11 (delta 0), pack-reused 0 (from 0)
Receiving objects: 100% (16/16), 5.01 KiB | 1.00 MiB/s, done.
Resolving deltas: 100% (1/1), done.</code></pre>
</div>
<p>Create your feature branch:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/mo-fitzroy-git-training-demo</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> 2_update_favourite_cloud</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch '2_update_favourite_cloud'</code></pre>
</div>
<p>Add more detail to your favourite cloud file:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> nano cloud-mo-fitzroy.md</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> cat cloud-mo-fitzroy.md</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># My Favourite Cloud

Light and fluffy cumulus.
Nice to sail under.</code></pre>
</div>
<p>Add and commit your changes:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git add cloud-mo-fitzroy.md</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds more details to Robert FitzRoy's favourite cloud file"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2_update_favourite_cloud 1b05798] Adds more details to Robert FitzRoy's favourite cloud file
 1 file changed, 1 insertion(+)</code></pre>
</div>
<p>Push the changes to your GitHub fork:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 369 bytes | 123.00 KiB/s, done.
Total 3 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
remote:
remote: Create a pull request for '2_update_favourite_cloud' on GitHub by visiting:
remote:      https://github.com/mo-fitzroy/git-training-demo/pull/new/2_update_favourite_cloud
remote:
To github.com:mo-fitzroy/git-training-demo.git
 * [new branch]      2_update_favourite_cloud -&gt; 2_update_favourite_cloud
branch '2_update_favourite_cloud' set up to track 'origin/2_update_favourite_cloud'.</code></pre>
</div>
</section><section><h2 class="section-heading" id="open-a-pull-request">Open a Pull Request<a class="anchor" aria-label="anchor" href="#open-a-pull-request"></a>
</h2>
<hr class="half-width">
<p>Head back to your fork on GitHub and open a PR to contribute your
changes upstream to the main <code>git-training-demo</code> repository.
You must use the <strong>Fixes</strong> keyword this time to
automatically close your Issue when the PR is merged since you are
contributing the change from a Fork<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
<figure><img src="../fig/github-fork-pr-open.png" alt="A screenshot of a user opening a pull request from their fork back to the upstream git-training-demo repository. The description has been autofilled with the pull request template contents." class="figure mx-auto d-block"></figure><p>The PR will now need to be approved and merged by your
instructors.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Take a break here! This will give you and your co-instructor time to
approve, and squash and merge the PRs.</p>
<p>Show learners the Insights -&gt; Network Graph on GitHub again.
Contrast this to the section of the graph from the morning sessions.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="updating-a-fork">Updating a Fork<a class="anchor" aria-label="anchor" href="#updating-a-fork"></a>
</h2>
<hr class="half-width">
<p>Our fork is now behind the main upstream repository by one commit. We
are going to update our fork. First we need to set the correct upstream
remote in git.</p>
<p>Switch back to your forks <code>main</code> branch:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>Now run:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git remote <span class="at">-v</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>origin	git@github.com:mo-fitzroy/git-training-demo.git (fetch)
origin	git@github.com:mo-fitzroy/git-training-demo.git (push)</code></pre>
</div>
<p>This shows the GitHub remote links for our fork. To set the upstream
remote we can run:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git remote add upstream git@github.com:MetOffice/git-training-demo.git</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">$</span> git remote <span class="at">-v</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>origin	git@github.com:mo-fitzroy/git-training-demo.git (fetch)
origin	git@github.com:mo-fitzroy/git-training-demo.git (push)
upstream	git@github.com:MetOffice/git-training-demo.git (fetch)
upstream	git@github.com:MetOffice/git-training-demo.git (push)</code></pre>
</div>
<p>Now git knows about the forks upstream repository. We can fetch the
changes to the upstream repository by running:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git fetch upstream</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>remote: Enumerating objects: 6, done.
remote: Counting objects: 100% (6/6), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 4 (delta 3), reused 2 (delta 2), pack-reused 0 (from 0)
Unpacking objects: 100% (4/4), 1.10 KiB | 41.00 KiB/s, done.
From github.com:MetOffice/git-training-demo
 * [new branch]      main                   -&gt; upstream/main</code></pre>
</div>
<p>We now have access to the <code>upstream/main</code> branch. To merge
in the changes on <code>upstream/main</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git merge upstream/main</span></code></pre>
</div>
<p>And push:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
To github.com:mo-fitzroy/git-training-demo.git
   f87bb5c..90808ab  main -&gt; main</code></pre>
</div>
<p>Your forks <code>main</code> branch is now up to date with the
original <code>git-training-demo</code> repositories <code>main</code>
branch.</p>
<div id="sync-via-github" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sync-via-github" class="callout-inner">
<h3 class="callout-title">Sync via GitHub</h3>
<div class="callout-content">
<p>This is equivalent of syncing your fork via the GitHub banner shown
earlier:</p>
<figure><img src="../fig/github-fork-sync-fork-button.png" alt="A screenshot of a users repository showing just the banner announcing the repository is a fork and that is up to date with the upstream repository." class="figure mx-auto d-block"></figure><p>If your fork is <strong>behind</strong> the upstream repository
GitHub will alert you on the banner. You can use the <strong>Sync
fork</strong> button to update your fork like we did above. After
syncing your fork this way run <code>git pull</code> on your local
<code>main</code> branch.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="summary-diagram">Summary Diagram<a class="anchor" aria-label="anchor" href="#summary-diagram"></a>
</h2>
<hr class="half-width">
<p>The workflow for forking is similar to that for branching. There are
only a few differences after you’ve set up your fork for the first
time:</p>
<ul>
<li>You should open Issues on the upstream repository not your
fork.</li>
<li>After merging in a PR on the upstream repository you need the added
step of syncing your forks <code>main</code> branch.</li>
</ul>
<pre class="mermaid"><code>sequenceDiagram
    accDescr {A sequence diagram showing the steps for using
    Forks with the branching model.}
    autonumber
    participant UM as upstream main
    participant GHM as origin main
    participant GHF as origin feature
    participant M as main
    UM -&gt;&gt; UM: #f
    Note over UM: Open an Issue for the change
    UM --&gt;&gt; GHM: #f
    Note right of UM: First time: Fork the repository
    GHM --&gt;&gt; M: #f
    Note right of GHM: First time: git clone&lt;br/&gt;Then: git pull
    create participant F as feature
    M -&gt;&gt; F: Create a feature branch:&lt;br/&gt;git switch -c feature
    loop
        F -&gt;&gt; F: #f
        Note over F: Develop changes:&lt;br/&gt;git add&lt;br/&gt;git commit
    end
    F --&gt;&gt; GHF: #f
    Note left of F: Push to GitHub: git push&lt;br/&gt;The first push creates origin feature!
    destroy GHF
    GHF --&gt;&gt; UM: #f
    Note left of GHF: Pull Request and then Merge.&lt;br/&gt;Delete origin feature branch.
    UM --&gt;&gt; GHM: #f
    Note right of UM: Sync your fork
    GHM --&gt;&gt; M: #f
    Note right of GHM: git pull
    Note over F: Delete branch:&lt;br/&gt;git branch -d feature
    box Met Office Repo - GitHub
    participant UM
    end
    box Your Fork - GitHub
    participant GHM
    participant GHF
    end
    box Your Working Copy - Local
    participant M
    participant F
    end</code></pre>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A fork is a server side, in our case GitHub, copy of the
repository.</li>
<li>Forks allow collaborators to contribute to the main repository
without being given collaborator access or write permissions.</li>
</ul>
</div>
</div>
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>If the repository is private collaborators will need to
be given access to see the repository and create a fork. The same is
true for private repositories in organisations.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/using-issues/linking-a-pull-request-to-an-issue" class="external-link">GitHub
Documentation</a> has more information on linking PRs to Issues.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div></section><section id="aio-06-conflict"><p>Content from <a href="06-conflict.html">Conflicts</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/06-conflict.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What do I do when my changes conflict with someone else’s?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what conflicts are and when they can occur.</li>
<li>Resolve conflicts resulting from a merge.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As soon as people start working in parallel, they’ll likely step on
each other’s toes. This will even happen with a single person: if we are
working on a piece of software on both our laptop and a server in the
lab, we could make different changes to each copy. Version control helps
us manage these <a href="reference.html#conflict">conflicts</a> by
giving us tools to <a href="reference.html#resolve">resolve</a>
overlapping changes. You will encounter conflicts no matter which
branching model you choose. No model is more or less likely to produce
conflicts. No model will make conflicts easier (or harder) to resolve.
Using forks has no impact on how likely conflicts are to occur.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>To create the conflict for all learners your co-instructor should
follow along making the same changes the learners make. The
co-instructors PR should be merged just before the learners open their
PRs. If the co-instructor has the relevant permissions they can do this
themselves while the instructor is still teaching.</p>
</div>
</div>
</div>
</div>
<p>To learn how to resolve conflicts we are going to create one on
purpose. We will do this by getting everyone to edit the same line of
the same file at once. Open an Issue on the
<code>git-training-demo</code> repository for adding yourself to the
list of authors in the <code>CITATION.cff</code> file. Make a note of
the Issue number to use as the prefix for your feature branch name.</p>
<p>Make sure you are on the <code>main</code> branch. Create your
feature branch:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> 7_add-citation-fitzroy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch '7_add-citation-fitzroy'</code></pre>
</div>
<p>Add your name to the <code>CITATION.cff</code> file, underneath any
existing author names:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> nano CITATION.cff</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "FitzRoy"
  given-names: "Robert"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Add and commit your changes:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git add CITATION.cff</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds Robert Fitzroy as an author"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[7_add-citation-fitzroy a3c5e13] "Adds Robert Fitzroy as an author"
 1 file changed, 2 insertions(+)</code></pre>
</div>
<p>Push your changes to your GitHub fork:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 354 bytes | 354.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To github.com:mo-fitzroy/git-training-demo.git
   f87bb5c..a3c5e13  7_add-citation-fitzroy -&gt; 7_add-citation-fitzroy
branch '7_add-citation-fitzroy' set up to track 'origin/7_add-citation-fitzroy'.</code></pre>
</div>
<section><h2 class="section-heading" id="open-a-pull-request">Open a Pull Request<a class="anchor" aria-label="anchor" href="#open-a-pull-request"></a>
</h2>
<hr class="half-width">
<p>Head back to your fork on GitHub and open a PR to contribute your
changes upstream to the main <code>git-training-demo</code> repository.
Fill out the template like you did in the previous episode.</p>
<p>At the bottom of your PR GitHub is telling us <strong>This branch has
conflicts that must be resolved</strong> and the conflicting file is
<code>CITATION.cff</code>.</p>
<p>Go to the main <code>git-training-demo</code> repositories code tab
and look at the contents of <code>CITATION.cff</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "Hogan"
  given-names: "Emma"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Someone else has added their name before our PR could be merged.
These changes now conflict with the one you made.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Practising By Yourself </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>If you’re working through this lesson on your own, you won’t see a
conflict. You should still follow the materials to learn what to do when
you encounter a conflict.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="blame">Blame<a class="anchor" aria-label="anchor" href="#blame"></a>
</h3>
<p>GitHub lets you see who made changes to the file you are looking at
in the Code viewer. Click on the <strong>Blame</strong> button:</p>
<figure><img src="../fig/github-blame.png" alt="A screenshot of a users weather repository showing blame on the forecast.md file in the Code viewer." class="figure mx-auto d-block"></figure><p>The image above shows blame on the <code>weather</code> repositories
<code>forecast.md</code> file. The far left shows how long ago the
commit was that changed those lines. Then the commit message is
displayed before the file contents. Click on the little page icon after
a commit message to see previous commits which altered the same lines.
Try using blame on the <code>CITATION.cff</code> file to see who added
the conflicting change.</p>
</div>
<div class="section level3">
<h3 id="compare-changes">Compare changes<a class="anchor" aria-label="anchor" href="#compare-changes"></a>
</h3>
<p>In the git-novice lesson we learnt how to diff between commits on the
same branch. You can also look at diffs between branches even if they
are on a different fork using GitHub.</p>
<p>To see a difference for a repository add <code>/compare</code> to the
end of the repository url.</p>
<ol style="list-style-type: decimal">
<li>Navigate to: <a href="https://github.com/MetOffice/git-training-demo/compare/" class="external-link"><code>https://github.com/MetOffice/git-training-demo/compare/</code></a>,
and click on the <strong>compare across forks</strong> link.</li>
<li>Click on the <strong>head repository</strong> dropdown and find your
fork.</li>
<li>Click on the <strong>compare</strong> dropdown and select your
feature branch.</li>
</ol>
<p>A diff should appear comparing your fork’s feature branch with the
upstream repositories <code>main</code> branch.</p>
</div>
</section><section><h2 class="section-heading" id="resolving-conflicts">Resolving Conflicts<a class="anchor" aria-label="anchor" href="#resolving-conflicts"></a>
</h2>
<hr class="half-width">
<p>We’re going to resolve the conflict by merging in the
<code>main</code> branch into our feature branch
<code>7_add-citation-fitzroy</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A git graph showing the main branch being merged
    into the 7_add-citation-fitzroy branch to resolve merge conflicts.}
    commit id: 'cdb7fa6'
    branch 7_add-citation-fitzroy
    commit id: 'a3c5e13 Adds Robert Fitzroy as an author'
    checkout main
    commit id: 's7dja9o'
    checkout 7_add-citation-fitzroy
    merge main</code></pre>
<p>First we need to make sure our fork’s <code>main</code> branch is in
sync with the upstream repository. Navigate to your fork on GitHub and
click on the <strong>Sync fork</strong> button.</p>
<p>In your local copy of your fork, update the <code>main</code>
branch:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git switch main</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> git pull</span></code></pre>
</div>
<p>Switch back to the feature branch:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git switch 7_add-citation-fitzroy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch '7_add-citation-fitzroy'</code></pre>
</div>
<p>Merge in the <code>main</code> branch:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git merge main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Auto-merging CITATION.cff
CONFLICT (content): Merge conflict in CITATION.cff
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>Git is warning us about the conflict. We are still merging, if you
run <code>git status</code> you will see:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch 7_add-citation-fitzroy
Your branch is up to date with 'origin/7_add-citation-fitzroy'.

You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add &lt;file&gt;..." to mark resolution)
	both modified:   CITATION.cff

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<p>The message tells us <strong>both modified</strong> the
<code>CITATION.cff</code> file since both <code>main</code> and our
feature branch modified this file.</p>
<p>If we look at the <code>CITATION.cff</code> file now:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
- family-names: "FitzRoy"
  given-names: "Robert"
=======
- family-names: "Hogan"
  given-names: "Emma"
&gt;&gt;&gt;&gt;&gt;&gt;&gt; dabb4c8c450e8475aee9b14b4383acc99f42af1d
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>Our change is preceded by
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>. Git has then inserted
<code>=======</code> as a separator between the conflicting changes and
marked the end of the content downloaded from GitHub with
<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>. (The string of letters and
digits after that marker identifies the commit we’ve just
downloaded.)</p>
<p>It is now up to us to edit this file to remove these markers and
reconcile the changes. We can do anything we want: keep the change made
in the local repository, keep the change made in the remote repository,
write something new to replace both, or get rid of the change entirely.
Let’s replace both so that the file looks like this:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> cat CITATION.cff</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cff-version: 1.2.0
message: "Met Office Colleagues and Partners"
authors:
- family-names: "Theodorakis"
  given-names: "Dimitrios"
  orcid: "https://orcid.org/0000-0001-9288-1332"
- family-names: "Hogan"
  given-names: "Emma"
- family-names: "FitzRoy"
  given-names: "Robert"
title: "Met Office Git Training Demo"
version: 2.0.4
doi: 10.4321/zenodo.1234
date-released: 2024-09-23
url: "https://github.com/MetOffice/git-training-demo"</code></pre>
</div>
<p>To finish merging, we add <code>CITATION.cff</code> to the changes
being made by the merge and then commit:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> git add CITATION.cff </span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch 7_add-citation-fitzroy
All conflicts fixed but you are still merging.
  (use "git commit" to conclude merge)

Changes to be committed:

	modified:   CITATION.cff</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> git commit</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[7_add-citation-fitzroy 312c561] Merge branch 'main' into 7_add-citation-fitzroy</code></pre>
</div>
<p>Now we can push our changes to GitHub:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 4 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 385 bytes | 128.00 KiB/s, done.
Total 3 (delta 2), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To github.com:mo-fitzroy/git-training-demo.git
   a3c5e13..312c561  7_add-citation-fitzroy -&gt; 7_add-citation-fitzroy</code></pre>
</div>
<p>Your PR on GitHub should now be ready to merge, after review of
course.</p>
</section><section><h2 class="section-heading" id="avoiding-conflict">Avoiding Conflict<a class="anchor" aria-label="anchor" href="#avoiding-conflict"></a>
</h2>
<hr class="half-width">
<p>Git’s ability to resolve conflicts is very useful, but conflict
resolution costs time and effort, and can introduce errors if conflicts
are not resolved correctly. If you find yourself resolving a lot of
conflicts in a project, consider these technical approaches to reducing
them:</p>
<ul>
<li>Pull from upstream more frequently, especially before starting new
work</li>
<li>Use topic branches to segregate work, merging to main via a PR when
complete</li>
<li>Make smaller more atomic commits</li>
<li>Push your work when it is done and encourage your team to do the
same to reduce work in progress and, by extension, the chance of having
conflicts</li>
<li>Where logically appropriate, break large files into smaller ones so
that it is less likely that two authors will alter the same file
simultaneously</li>
</ul>
<p>Conflicts can also be minimized with project management
strategies:</p>
<ul>
<li>Clarify who is responsible for what areas with your
collaborators</li>
<li>Discuss what order tasks should be carried out in with your
collaborators so that tasks expected to change the same lines won’t be
worked on simultaneously</li>
<li>If the conflicts are stylistic churn (e.g. tabs vs. spaces),
establish a project convention that is governing and use code style
tools (e.g. <code>htmltidy</code>, <code>perltidy</code>,
<code>rubocop</code>, etc.) to enforce, if necessary</li>
</ul>
<div id="conflicts-on-non-textual-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="conflicts-on-non-textual-files" class="callout-inner">
<h3 class="callout-title">Conflicts on Non-textual files</h3>
<div class="callout-content">
<p>What does Git do when there is a conflict in an image or some other
non-textual file that is stored in version control?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Let’s try it with your <code>weather</code> repository. Suppose you
take a picture of the television forecast and call it
<code>forecast.jpg</code>. Jimmy has already created a feature branch to
add the image in.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> git switch add_forecast_image</span></code></pre>
</div>
<p>If you do not have an image file of forecast available, you can
create a dummy binary file like this:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">--bytes</span> 1024 /dev/urandom <span class="op">&gt;</span> forecast.jpg</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-lh</span> forecast.jpg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-r--r-- 1 mo-eormerod 57095 1.0K Mar  8 20:24 forecast.jpg</code></pre>
</div>
<p><code>ls</code> shows us that this created a 1-kilobyte file. It is
full of random bytes read from the special file,
<code>/dev/urandom</code>.</p>
<p>Now, suppose you add <code>forecast.jpg</code> to your
repository:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add picture of forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 8e4115c] Add picture of forecast
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 forecast.jpg</code></pre>
</div>
<p>Suppose that Jimmy has added a similar picture in the meantime. His
is a picture of a forecast from Chile, but it is <em>also</em> called
<code>forecast.jpg</code>. When you try to push, you get a familiar
message:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> git push</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>To https://github.com/mo-eormerod/weather.git
 ! [rejected]        add_forecast_image -&gt; add_forecast_image (fetch first)
error: failed to push some refs to 'https://github.com/mo-eormerod/weather.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.</code></pre>
</div>
<p>We’ve learned that we must pull first and resolve any conflicts:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> git pull</span></code></pre>
</div>
<p>When there is a conflict on an image or other binary file, git prints
a message like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$ git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://github.com/mo-eormerod/weather.git
 * branch            add_forecast_image     -&gt; FETCH_HEAD
   6a67967..439dc8c  add_forecast_image     -&gt; origin/add_forecast_image
warning: Cannot merge binary files: forecast.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)
Auto-merging forecast.jpg
CONFLICT (add/add): Merge conflict in forecast.jpg
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
<p>The conflict message here is mostly the same as it was for
<code>forecast.md</code>, but there is one key additional line:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>warning: Cannot merge binary files: forecast.jpg (HEAD vs. 439dc8c08869c342438f6dc4a2b615b05b93c76e)</code></pre>
</div>
<p>Git cannot automatically insert conflict markers into an image as it
does for text files. So, instead of editing the image file, we must
check out the version we want to keep. Then we can add and commit this
version.</p>
<p>On the key line above, Git has conveniently given us commit
identifiers for the two versions of <code>forecast.jpg</code>. Our
version is <code>HEAD</code>, and Jimmy’s version is
<code>439dc8c0...</code>. If we want to use our version, we can use
<code>git checkout</code>:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD forecast.jpg</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of just the local forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 21032c3] Use image of just the local forecast</code></pre>
</div>
<p>If instead we want to use Jimmy’s version, we can use
<code>git checkout</code> with Jimmy’s commit identifier,
<code>439dc8c0</code>:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 forecast.jpg</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="ex">$</span> git add forecast.jpg</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use image of just the local forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image da21b34] Use image of forecast with nachos instead of just forecast</code></pre>
</div>
<p>We can also keep <em>both</em> images. The catch is that we cannot
keep them under the same name. But, we can check out each version in
succession and <em>rename</em> it, then add the renamed versions. First,
check out each image and rename it:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> git checkout HEAD forecast.jpg</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="ex">$</span> git mv forecast.jpg forecast-only.jpg</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="ex">$</span> git checkout 439dc8c0 forecast.jpg</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="ex">$</span> mv forecast.jpg forecast-chile.jpg</span></code></pre>
</div>
<p>Then, remove the old <code>forecast.jpg</code> and add the two new
files:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> git rm forecast.jpg</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="ex">$</span> git add forecast-only.jpg</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="ex">$</span> git add forecast-chile.jpg</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use two images: local forecast and Chile forecast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_forecast_image 94ae08c] Use two images: local forecast and Chile forecast
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 forecast-chile.jpg
 rename forecast.jpg =&gt; forecast-only.jpg (100%)</code></pre>
</div>
<p>Now both images of forecast are checked into the repository, and
<code>forecast.jpg</code> no longer exists.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Conflicts occur when two or more people change the same lines of the
same file.</li>
<li>The version control system does not allow people to overwrite each
other’s changes blindly, but highlights conflicts so that they can be
resolved.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-End"><p>Content from <a href="End.html">End</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/End.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>This marks the end of the the workshop. Please remember to fill out
your post-workshop feedback. This feedback is vital for us to keep
improving the lesson for other learners.</p>
<p>Episodes after this <strong>End</strong> page are optional. Your
instructor may choose to teach these episodes if time permits. Otherwise
feel free to work through the episodes in your own time.</p>
<div class="section level3">
<h3 id="decision-time">Decision Time<a class="anchor" aria-label="anchor" href="#decision-time"></a>
</h3>
<p>What will the working practices look like for your repositories?
Things to think about:</p>
<ul>
<li>Who needs access to your repos? Should there be a second admin to
help you? Review <a href="00-repo-access.html">Episode 1</a> Repository
Access.</li>
<li>What branching model will you use? Review <a href="03-feature-branch.html">Episode 3</a> Branching Models.</li>
<li>Will you use forks with your branching model? Review <a href="02-branching.html#forking">Episode 3 Forks</a>
</li>
<li>Who presses the merge button as part of a Pull Request, the
developer or the reviewer?</li>
<li>Will you need Issue and Pull Request templates or other project
management features such as milestones and Projects?</li>
<li>What automated tests might help your development process?</li>
</ul>
<p>Don’t try and make all these decisions at once! Revisit the material
and seek out further advice if needed before deciding. Remember you can
change your mind anytime and evolve your working practices as your
projects grow.</p>
</div>
<div class="section level3">
<h3 id="where-to-next">Where to next?<a class="anchor" aria-label="anchor" href="#where-to-next"></a>
</h3>
<p>We’ve covered a lot over the last two workshops but there is always
more to learn especially when it comes to GitHub!</p>
<ul>
<li>
<a href="https://learn.microsoft.com/en-us/training/github/" class="external-link">Microsoft
Learn</a> has a wide variety of GitHub training.</li>
<li>In this lesson you saw automated testing of PRs using <a href="https://learn.microsoft.com/en-us/training/modules/introduction-to-github-actions/" class="external-link">GitHub
Actions</a> which you might like to explore more.</li>
<li>The optional <a href="./08-rebase.html">rebasing episode</a> guides
you through rebasing a branch.</li>
<li>Your Pull Requests ran automated tests using <a href="https://pre-commit.com/" class="external-link">pre-commit</a> checks which you can set
up locally to run before you commit. The optional <a href="./09-pre-commit.html">pre-commit episode</a> outlines how to set
up some basic checks.</li>
</ul>
</div></section><section id="aio-08-rebase"><p>Content from <a href="08-rebase.html">Rebasing</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/08-rebase.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 75 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>When should I rebase?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Rebase a feature branch to clean up its history.</li>
<li>Use rebase to update a feature branch to the <code>HEAD</code> of
<code>main</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Rebasing a branch re-writes your git history and should be used with
caution. You might want to rebase if:</p>
<ul>
<li>You need to tidy up your branches history before performing a normal
merge via a PR. This will help keep the history of the <code>main</code>
branch linear.</li>
<li>You need to update your branch with changes from the
<code>main</code> branch.</li>
</ul>
<section><h2 class="section-heading" id="tidying-your-commit-history">Tidying your Commit History<a class="anchor" aria-label="anchor" href="#tidying-your-commit-history"></a>
</h2>
<hr class="half-width">
<p>Consider the following scenario. You want to add a plotting script to
the <code>git-training-demo</code> repository. You make a branch for the
feature:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add_plot_script main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to branch 'add_plot_script'</code></pre>
</div>
<p>And over the course of development you make three commits to the file
<code>plot_lfric.py</code>. Use the commands in each tab make the same
commits to your repository:</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Commit 1
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  Commit 2
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-3" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-3" type="button" role="tab" aria-controls="nav-tabpanel-1-3" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-3">
  Commit 3
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-1">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds in a Python script to plot LFRic data"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 64ac261] Adds in a Python script to plot LFRic data
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 plot_lfric.py</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-2">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Extends the LFRic data plotting script to plot 2D fields"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 7053de7] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div id="nav-tabpanel-1-3" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-3">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Fixes the axis labels spelling in the LFRic data plotting script"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[add_plot_script 0bb7871] Fixes the axis labels spelling in the LFRic data plotting script
 1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
</div>
</div>
<p>Before you push to the remote and open a PR you check your git
history. The git history now looks something like this:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the first commit of main.}
    commit id: 'ed14d18'
    branch add_plot_script
    checkout add_plot_script
    commit id: '64ac261'
    commit id: '7053de7'
    commit id: '0bb7871'</code></pre>
<p>We can also visualise these changes with <code>git log</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>* 0bb7871 (HEAD -&gt; add_plot_script) Fixes the axis labels spelling in the LFRic data plotting script
* 7053de7 Extends the LFRic data plotting script to plot 2D fields
* 64ac261 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
</div>
<p>You realise that perhaps the spelling fix in the third commit should
have been a correction to the first commit which added in the script. We
can use rebase to re-write our history and combine these two
commits.</p>
<div id="backup-your-branch" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="backup-your-branch" class="callout-inner">
<h3 class="callout-title">Backup your Branch</h3>
<div class="callout-content">
<p>It is a good idea to create a backup of your feature branch just in
case something goes wrong during the rebase:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git branch add_plot_script.backup</span></code></pre>
</div>
<p>If at anytime you want to restore the branch from your backup switch
to the backup:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> git switch add_plot_script.backup</span></code></pre>
</div>
<p>Delete the branch where rebasing was attempted:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> git branch <span class="at">-D</span> add_plot_script</span></code></pre>
</div>
<p>Re-create the original branch while still on the backup branch:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add_plot_script</span></code></pre>
</div>
</div>
</div>
</div>
<p>We will rebase interactively using the <code>-i</code> flag. To
rebase our three commits we need to provide the commit hash for the
commit before our three feature branch commits which is
<code>ed14d18</code> from the log above:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">-i</span> ed14d18</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pick 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
pick 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script

# Rebase ed14d18..0bb7871 onto ed14d18 (3 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup [-C | -c] &lt;commit&gt; = like "squash" but keep only the previous
#                    commit's log message, unless -C is used, in which case
#                    keep only this commit's message; -c is same as -C but
#                    opens the editor
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with 'git rebase --continue')
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .	  create a merge commit using the original merge commit's
# .	  message (or the oneline, if no original merge commit was
# .	  specified); use -c &lt;commit&gt; to reword the commit message
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#</code></pre>
</div>
<p>This file shows our three commits in order from oldest to newest. It
also gives us options for each commit. You can re-arrange commit lines
to re-order your history.</p>
<div id="aborting-a-rebase" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="aborting-a-rebase" class="callout-inner">
<h3 class="callout-title">Aborting a Rebase</h3>
<div class="callout-content">
<p>If you want to cancel the rebase at the above stage either do nothing
to the file or delete all the commit lines.</p>
<p>After you save and close the file, if your rebase has conflicts, you
can abort at anytime using:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">--abort</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>We are going to drop our spelling fix and amend our first commit to
fix the spelling:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
</div>
<p>Save and close the file.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Stopped at 64ac261...  Adds in a Python script to plot LFRic data
You can amend the commit now, with

  git commit --amend

Once you are satisfied with your changes, run

  git rebase --continue
[git-training-demo]:(add_plot_script|REBASE 1/3)$</code></pre>
</div>
<p>The rebase has stopped at 64ac261, the commit which added in the
<code>plot_lfric.py</code> file, because we asked to amend the commit.
We can now open up the plotting script and make our changes.</p>
<p>Opening up the file now shows:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre>
</div>
<p>Modify and save the file so that it reads:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span></code></pre>
</div>
<p>Add the file and confirm the amendment:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git commit <span class="at">--amend</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[detached HEAD 76fd423] Adds in a Python script to plot LFRic data
 Date: Mon Nov 18 10:49:25 2024 +0000
 1 file changed, 1 insertion(+)
 create mode 100644 plot_lfric.py</code></pre>
</div>
<p>For the last few commands we have included the full terminal prompt
showing the git status provided by the <code>git-prompt.sh</code> script
you set up in the <a href="https://www.astropython.com/git-novice/index.html#git-autocomplete" class="external-link">git-novice
lesson</a>. You can see the prompt clearly states we are rebasing,
<code>REBASE</code>, and that it is on line <code>1/3</code> of the
rebase to-do file we edited earlier.</p>
<p>Now we have amended the commit we can continue with the rebase:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="ex">Auto-merging</span> plot_lfric.py</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="ex">CONFLICT</span> <span class="er">(</span><span class="ex">content</span><span class="kw">)</span><span class="bu">:</span> Merge conflict in plot_lfric.py</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="ex">error:</span> could not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="ex">hint:</span> Resolve all conflicts manually, mark them as resolved with</span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a><span class="ex">hint:</span> <span class="st">"git add/rm &lt;conflicted_files&gt;"</span>, then run <span class="st">"git rebase --continue"</span>.</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="ex">hint:</span> You can instead skip this commit: run <span class="st">"git rebase --skip"</span>.</span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="ex">hint:</span> To abort and get back to the state before <span class="st">"git rebase"</span>, run <span class="st">"git rebase --abort"</span>.</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a><span class="ex">Could</span> not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> </span></code></pre>
</div>
<p>The rebase has tried to apply the second commit which still has the
spelling mistake resulting in a merge error. Open the file again and
resolve the conflict:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py </span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="op">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> HEAD</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="op">=======</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="co"># more Python</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="op">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="dv">3343</span><span class="er">f91</span></span></code></pre>
</div>
<p>Modify and save the file so that it reads:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre>
</div>
<p>Add the file and continue with the rebase:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[detached HEAD d7def6a] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)
Successfully rebased and updated refs/heads/add_plot_script.
[git-training-demo]:(add_plot_script)$ </code></pre>
</div>
<p>We have now successfully rebased our feature branch. Our history
shows:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>* d7def6a (HEAD -&gt; add_plot_script) Extends the LFRic data plotting script to plot 2D fields
* e56ed99 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
</div>
<p>It’s a good idea here to diff against your backup branch to check
that you haven’t accidentally removed changes.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> git diff add_plot_script.backup add_plot_script</span></code></pre>
</div>
<p>This command should show <strong>no</strong> output.</p>
<div id="detached-head" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="detached-head" class="callout-inner">
<h3 class="callout-title">detached HEAD</h3>
<div class="callout-content">
<p>You may have noticed in some of the terminal outputs above the phrase
<code>detached HEAD</code>. Remember <code>HEAD</code> simply points to
the latest commit in a branch. You can’t re-write the commit history of
a branch while you are on the branch! <code>git rebase</code> moved you
into a <code>detached HEAD</code> space where you aren’t on any branch
to perform the rebase. When the rebase successfully completed git
re-attached <code>HEAD</code> to point to the new most recent commit,
<code>d7def6a</code> in the output above, on the feature branch.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="updating-a-branch">Updating a Branch<a class="anchor" aria-label="anchor" href="#updating-a-branch"></a>
</h2>
<hr class="half-width">
<p>You can also use rebase to move your changes to branch off the
<code>HEAD</code> of <code>main</code>. While we rebased our feature
branch another PR was merged with <code>main</code>:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the first commit of main.}
    commit id: 'ed14d18'
    branch add_plot_script
    checkout add_plot_script
    commit id: 'e56ed99'
    commit id: 'd7def6a'
    checkout main
    commit id: '4rtzk8g'</code></pre>
<p>We can use rebasing to move our feature branch so it branches off the
<code>HEAD</code> of <code>main</code>, fixing any conflicts that arise.
This is what we are aiming for:</p>
<pre class="mermaid"><code>gitGraph
    accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the second commit of main.}
    commit id: 'ed14d18'
    commit id: '4rtzk8g'
    branch add_plot_script
    checkout add_plot_script
    commit id: 'e56ed99'
    commit id: 'd7def6a'</code></pre>
<p>Run <code>git pull</code> to fetch the changes from GitHub:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre>
</div>
<p>To rebase we run:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> git rebase main</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Successfully rebased and updated refs/heads/add_plot_script.</code></pre>
</div>
<p>That’s it! There were no merge conflicts to resolve this time. If you
are going to use rebase in this way consider rebasing on a regular
basis.</p>
<div id="merge-rebase" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<div id="merge-rebase" class="callout-inner">
<h3 class="callout-title">Merge &amp; Rebase</h3>
<div class="callout-content">
<p>Stick to one strategy if you can, or rebase before merging. Rebasing
a branch with merge commits is difficult to impossible.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="updating-a-branch-with-upstream-changes">Updating a Branch with Upstream Changes<a class="anchor" aria-label="anchor" href="#updating-a-branch-with-upstream-changes"></a>
</h3>
<p>Go back to your fork on GitHub and click on the <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork" class="external-link"><strong>Sync
fork</strong></a> button.</p>
<p>Then you can follow the steps above to update your branch.</p>
<p>It’s a good idea to diff your origin feature branch here.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> git diff feature origin/feature</span></code></pre>
</div>
<p>You should only see the changes brought in from the upstream
repository <strong>not</strong> your feature branch changes.</p>
</div>
</section><section><h2 class="section-heading" id="updating-the-remote">Updating the Remote<a class="anchor" aria-label="anchor" href="#updating-the-remote"></a>
</h2>
<hr class="half-width">
<p>If you are rebasing a feature branch you have already pushed to the
GitHub remote you will need to overwrite the remote branch.</p>
<ul>
<li>
<strong>Always</strong> check you have updated your local branch
from the remote <strong>before</strong> rebasing.</li>
<li>
<strong>Always</strong> check before pushing to the remote after
rebasing that no new commits were added to the remote as these will be
lost.</li>
</ul>
<p>You can fetch any changes to the remote:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> git fetch</span></code></pre>
</div>
<p>And inspect the last commit with the log or <code>git show</code> to
make sure it’s the commit you expect:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> git show origin/add_plot_script</span></code></pre>
</div>
<p>If the rebasing was successful and there have been no new commits to
the remote feature branch by any collaborators it is safe to push the
rebased feature branch to the GitHub remote, overwriting it’s
history.</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--force-with-lease</span></span></code></pre>
</div>
<p>The <code>--force-with-lease</code> flag will warn you if there are
commits on the remote branch you would override by pushing if you forgot
to check yourself.</p>
</section><section><h2 class="section-heading" id="pulling-a-rebased-branch">Pulling a Rebased Branch<a class="anchor" aria-label="anchor" href="#pulling-a-rebased-branch"></a>
</h2>
<hr class="half-width">
<p>If you have rebased a feature branch and then overwritten the remote
branch on GitHub your collaborators may need to pull these changes to
their local copies.</p>
<p>If the collaborator already had a copy of your branch from before the
rebase; attempting a normal pull will result in a lot of conflicts due
to the incompatible histories of the original and the rebased
branches.</p>
<p>The collaborator should first switch to the local branch they want to
overwrite with the rebased remote version:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> git switch add_plot_script</span></code></pre>
</div>
<p>Now fetch but don’t attempt to merge the remote branch:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> git fetch origin add_plot_script</span></code></pre>
</div>
<p>Reset the local branch to match the remote origin:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="ex">$</span> git reset <span class="at">--hard</span> origin/add_plot_script</span></code></pre>
</div>
<p>Now their local branch matches the rebased feature branch from GitHub
and everyone’s branches are in sync.</p>
<div id="modifying-commit-messages" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="modifying-commit-messages" class="callout-inner">
<h3 class="callout-title">Modifying Commit Messages</h3>
<div class="callout-content">
<p><code>git rebase</code> can also be used to modify commit
messages.</p>
<p>Look again at the output of the interactive rebase in this lesson.
Which keyword lets you edit the commit message?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Edit the commit message:</p>
<pre class="text"><code><span><span class="co"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="re-ordering-commits" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="re-ordering-commits" class="callout-inner">
<h3 class="callout-title">Re-ordering Commits</h3>
<div class="callout-content">
<p>In the first example removing the spelling mistake we used the
following keywords in our rebase to-do list:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
</div>
<p>You can also re-order the lines in this file to re-order commits.
Look at the possible rebase options again. What other combination of
keywords and/or line-reordering would have given us the same result?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pick 64ac261 Adds in a Python script to plot LFRic data
fixup 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields</code></pre>
</div>
<p>This is one possibility. We move the last commit just underneath the
first which introduced the mistake. We use the <code>fixup</code>
keyword to fix this change up into the previous commit.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Rebasing helps keep your git history linear which can be useful when
using commands such as git bisect to find the commit that introduced a
bug.</li>
<li>Rebasing re-writes your git history. Make a backup of your branch
before rebasing. <code>git branch &lt;branch-name&gt;.backup</code>
</li>
<li>Use an interactive rebase with the <code>-i</code> flag when you
want to tidy your git history.</li>
<li>Use <code>git rebase main</code> to rebase your feature branch onto
the <code>HEAD</code> of the <code>main</code> branch.</li>
<li>
<strong>Always</strong> check you have updated your local branch
from the remote <strong>before</strong> rebasing.</li>
<li>
<strong>Always</strong> check before pushing to the remote after
rebasing that no new commits were added to the remote as these will be
lost, use the <code>--force-with-lease</code> flag with
<code>git push</code> to help prevent this.</li>
<li>Use <code>git push --force-with-lease</code> to update the remote
branch.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09-pre-commit"><p>Content from <a href="09-pre-commit.html">Pre-commit</a></p>
<hr>
<p>Last updated on 2025-03-12 |

        <a href="https://github.com/metoffice/git-working-practices/edit/main/episodes/09-pre-commit.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 25 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What quality assurance checks can I run using pre-commit
checks?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what pre-commit hooks are.</li>
<li>Install and run a pre-commit hook.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><a href="https://git-scm.com/book/ms/v2/Customizing-Git-Git-Hooks" class="external-link">Git
hooks</a> let you run certain scripts before git actions. In this
optional episode we are going to set up a <a href="https://pre-commit.com/" class="external-link">pre-commit</a> hook which runs quality
assurance checks on our code before we are allowed to make a commit.</p>
<p><a href="https://pre-commit.com/" class="external-link">pre-commit</a> is a Python package
that makes it easier to set up git hooks. To install it using pip or
conda:</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  pip
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  conda
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-1">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pip install pre-commit</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-2">
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> conda install pre-commit</span></code></pre>
</div>
</div>
</div>
</div>
<p>In the <code>git-training-demo</code> we provided an example
pre-commit configuration. These pre-commit checks were run as part of
your pull requests. We can install the pre-commit hook scripts so they
run before we can commit locally:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> =<span class="kw">)</span><span class="ex">$</span> pre-commit install</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pre-commit installed at .git/hooks/pre-commit</code></pre>
</div>
<p>It’s good practice to run the pre-commit checks on all your files
after installing them.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> =<span class="kw">)</span><span class="ex">$</span> pre-commit run <span class="at">--all-files</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[INFO] Initializing environment for https://github.com/pre-commit/pre-commit-hooks.
[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.
[INFO] Once installed this environment will be reused.
[INFO] This may take a few minutes...
don't commit to branch ...................................................Passed
check for added large files ..............................................Passed
check for case conflicts .................................................Passed
check for merge conflicts ................................................Passed
check toml ...........................................(no files to check)Skipped
check yaml ...............................................................Passed
fix end of files .........................................................Passed
trim trailing whitespace .................................................Passed</code></pre>
</div>
<p>The next time the pre-commit scripts run they will re-use the Python
environment that was just installed, making the run faster.</p>
<p>The <a href="https://pre-commit.com/hooks.html" class="external-link">pre-commit.com
site</a> has a reference of useful hooks. Your organisation may have
their own pre-commit hooks which you can use and or block third party
hooks for security.</p>
<div id="committing-to-main" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="committing-to-main" class="callout-inner">
<h3 class="callout-title">Committing to Main</h3>
<div class="callout-content">
<p>With the pre-commit installed try adding any change to the
<code>main</code> branch and then run <code>git commit</code>.</p>
<p>What happens with the pre-commit hooks installed?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The pre-commit check for not committing to main fails so
<code>git commit</code> wasn’t run. Your changes are still staged.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> +=<span class="kw">)</span><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Attempts to commit to main"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>don't commit to branch...................................................Failed
- hook id: no-commit-to-branch
- exit code: 1
check for added large files..............................................Passed
check for case conflicts.................................................Passed
check for merge conflicts................................................Passed
check toml...........................................(no files to check)Skipped
check yaml...............................................................Passed
fix end of files.........................................................Passed
trim trailing whitespace.................................................Passed</code></pre>
</div>
<p>To move the staged changes to a new branch use
<code>git switch</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">main</span> +=<span class="kw">)</span><span class="ex">$</span> git switch <span class="at">-c</span> <span class="op">&lt;</span>branch-name<span class="op">&gt;</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Switched to a new branch 'challenge'</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">challenge</span> +<span class="kw">)</span><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch challenge
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	modified:   .pre-commit-config.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>pre-commit checks help prevent accidental commits to
<code>main</code> and provide an extra layer of quality assurance.</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/metoffice/git-working-practices/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/metoffice/git-working-practices/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/metoffice/git-working-practices/" class="external-link">Source</a></p>
				<p><a href="https://github.com/metoffice/git-working-practices/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:d.theodorakis@metoffice.gov.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/astroDimitrios/sandpaper/tree/4aa05d502eeb4de64fbcd430b468e22dd4952718" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/5e0d711121a581777d83cf270e298c933f112d52" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/astroDimitrios/varnish/tree/7c1ab925aa2bd2e6769ba68caa820231306b105b" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://metoffice.github.io/git-working-practices/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, Git, GitHub",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://metoffice.github.io/git-working-practices/instructor/aio.html",
  "identifier": "https://metoffice.github.io/git-working-practices/instructor/aio.html",
  "dateCreated": "2024-11-11",
  "dateModified": "2025-04-15",
  "datePublished": "2025-04-15"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

