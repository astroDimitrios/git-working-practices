<!DOCTYPE html>
<html lang="en" data-bs-theme="auto"><head>
<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/quarto-contrib/carpentries-theme-toggle-1.0.0/themetoggle.js"></script>
<script src="site_libs/quarto-contrib/carpentries-theme-toggle-1.0.0/scripts.js"></script>
<link href="site_libs/quarto-contrib/carpentries-css-1.0.0/styles.css" rel="stylesheet"><meta charset="utf-8">
            <meta name="generator" content="quarto-1.6.42">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

                    
        <title>Rebasing â€“ Git &amp; GitHub Working Practices</title>

        <!--     <script src="site_libs/quarto-contrib/carpentries-theme-toggle-1.0.0/themetoggle.js"></script>
        <script src="site_libs/quarto-contrib/carpentries-theme-toggle-1.0.0/scripts.js"></script>
        <link href="site_libs/quarto-contrib/carpentries-css-1.0.0/styles.css" rel="stylesheet">
         -->

        <!-- <script src="quarto-nav/quarto-nav.js"></script>
        <script src="quarto-nav/headroom.min.js"></script>
        <script src="clipboard/clipboard.min.js"></script>
        <script src="quarto-search/autocomplete.umd.js"></script>
        <script src="quarto-search/fuse.min.js"></script>
        <script src="quarto-search/quarto-search.js"></script>
        <script src="quarto-html/quarto.js"></script>
        <script src="quarto-html/popper.min.js"></script>
        <script src="quarto-html/tippy.umd.min.js"></script>
        <script src="quarto-html/anchor.min.js"></script>
        <link href="quarto-html/tippy.css" rel="stylesheet"> -->

        <!-- Responsive Favicon for The Carpentries -->
        <link rel="apple-touch-icon" sizes="180x180" href="site_libs/quarto-contrib/carpentries-favicons-1.0.0/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="site_libs/quarto-contrib/carpentries-favicons-1.0.0/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="site_libs/quarto-contrib/carpentries-favicons-1.0.0/favicons/favicon-16x16.png">
        <link rel="manifest" href="site_libs/quarto-contrib/carpentries-manifest-1.0.0/site.webmanifest">
        <link rel="mask-icon" href="site_libs/quarto-contrib/carpentries-favicons-1.0.0/favicons/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
        <meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">

        <!--           <script id="quarto-search-options" type="application/json">{
                         "location": "sidebar",
                         "copy-button": false,
                         "collapse-after": 3,
                         "panel-placement": "start",
                         "type": "textbox",
                         "limit": 50,
                         "keyboard-shortcut": [
                           "f",
                           "/",
                           "s"
                         ],
                         "show-item-context": false,
                         "language": {
                           "search-no-results-text": "No results",
                           "search-matching-documents-text": "matching documents",
                           "search-copy-link-title": "Copy link to search",
                           "search-hide-matches-text": "Hide additional matches",
                           "search-more-match-text": "more match in this document",
                           "search-more-matches-text": "more matches in this document",
                           "search-clear-button-title": "Clear",
                           "search-text-placeholder": "",
                           "search-detached-cancel-button-title": "Cancel",
                           "search-submit-button-title": "Submit",
                           "search-label": "Search"
                         }
                       }</script>
              <script  src="site_libs/quarto-diagram/mermaid.min.js"></script>
              <script  src="site_libs/quarto-diagram/mermaid-init.js"></script>
              <link  href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet" />
             -->  </head>
  <body>
        <div id="quarto-search-results"></div>
        <!-- content -->
        <div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
        <!-- sidebar -->
        <!-- margin-sidebar -->
            <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
                <nav id="TOC" role="doc-toc" class="toc-active">
                                                       <h2 id="toc-title">On this page</h2>
                                                    
                                                   <ul>
                                                   <li><a href="#tidying-your-commit-history" id="toc-tidying-your-commit-history" class="nav-link active" data-scroll-target="#tidying-your-commit-history">Tidying your Commit History</a></li>
                                                   <li><a href="#backup-your-branch" id="toc-backup-your-branch" class="nav-link" data-scroll-target="#backup-your-branch">Backup your Branch</a></li>
                                                   <li><a href="#aborting-a-rebase" id="toc-aborting-a-rebase" class="nav-link" data-scroll-target="#aborting-a-rebase">Aborting a Rebase</a></li>
                                                   <li><a href="#updating-a-branch" id="toc-updating-a-branch" class="nav-link" data-scroll-target="#updating-a-branch">Updating a Branch</a></li>
                                                   <li><a href="#merge-rebase" id="toc-merge-rebase" class="nav-link" data-scroll-target="#merge-rebase">Merge &amp; Rebase</a></li>
                                                   <li><a href="#updating-a-branch-with-upstream-changes" id="toc-updating-a-branch-with-upstream-changes" class="nav-link" data-scroll-target="#updating-a-branch-with-upstream-changes">Updating a Branch with Upstream Changes</a></li>
                                                   <li><a href="#updating-the-remote" id="toc-updating-the-remote" class="nav-link" data-scroll-target="#updating-the-remote">Updating the Remote</a></li>
                                                   <li><a href="#pulling-a-rebased-branch" id="toc-pulling-a-rebased-branch" class="nav-link" data-scroll-target="#pulling-a-rebased-branch">Pulling a Rebased Branch</a></li>
                                                   </ul>
                                               </nav>
            </div>
        <!-- main -->
        <main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>
        <header id="top" class="navbar navbar-expand-md top-nav carpentries">
          <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
            <symbol id="check2" viewbox="0 0 16 16">
              <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path>
            </symbol>
            <symbol id="circle-half" viewbox="0 0 16 16">
              <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
            </symbol>
            <symbol id="moon-stars-fill" viewbox="0 0 16 16">
              <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path>
              <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path>
            </symbol>
            <symbol id="sun-fill" viewbox="0 0 16 16">
              <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path>
            </symbol>
          </svg>
          <a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
          <div class="container-fluid top-nav-container">
            <div class="col-md-8">
              <div class="large-logo">
                <img id="cp-logo" alt="Carpentries" src="site_libs/quarto-contrib/carpentries-images-1.0.0/images/carpentries-logo.svg">
                                              </div>
            </div>
            <div class="selector-container">
              <div id="theme-selector">
                <li class="nav-item dropdown" id="theme-button-list">
                  <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                    <svg class="bi my-1 theme-icon-active">
                      <use href="#circle-half"></use>
                    </svg>
                    <i data-feather="chevron-down"></i>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
                    <li>
                      <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                        <svg class="bi me-2 theme-icon">
                          <use href="#sun-fill"></use>
                        </svg>
                        Light
                        <svg class="bi ms-auto d-none">
                          <use href="#check2"></use>
                        </svg>
                      </button>
                    </li>
                    <li>
                      <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                        <svg class="bi me-2 theme-icon">
                          <use href="#moon-stars-fill"></use>
                        </svg>
                        Dark
                        <svg class="bi ms-auto d-none">
                          <use href="#check2"></use>
                        </svg>
                      </button>
                    </li>
                    <li>
                      <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                        <svg class="bi me-2 theme-icon">
                          <use href="#circle-half"></use>
                        </svg>
                        Auto
                        <svg class="bi ms-auto d-none">
                          <use href="#check2"></use>
                        </svg>
                      </button>
                    </li>
                  </ul>
                </li>
              </div>
              <!-- NOTE: the language section will likely need to be generated on {sandpaper}, so we are not going to translate this now.
                {{#yaml}}{{#language}}
                <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle " type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                    English (US)  <i data-feather="chevron-down"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                    <li><button class="dropdown-item" type="button">French</button></li>
                  </ul>
                </div>
                {{/language}}{{/yaml}} -->
              <div class="dropdown" id="instructor-dropdown">
                        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
                  <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                  <li><button class="dropdown-item" type="button" onclick="window.location.href='./instructor/08-rebase.html';">Instructor View</button></li>
                </ul>
                      </div>
            </div>
          </div>
          <hr>
        </header>
        <nav class="navbar navbar-expand-xl bottom-nav carpentries" aria-label="Main Navigation">
          <div class="container-fluid nav-container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
              <span class="navbar-toggler-icon"></span>
              <span class="menu-title">Menu</span>
            </button>
            <div class="nav-logo">
              <img class="small-logo" alt="Carpentries" src="site_libs/quarto-contrib/carpentries-images-1.0.0/images/carpentries-logo-sm.svg">
            </div>
            <div class="lesson-title-md">
              Git &amp; GitHub Working Practices
            </div>
            <div class="search-icon-sm">
              <!-- TODO: do not show until we have search
                  <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
                -->
            </div>
            <div class="desktop-nav">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <span class="lesson-title">
                    Git &amp; GitHub Working Practices
                  </span>
                </li>
                <!-- We want to include a setup link prominently in the resources for overview pages -->
                <li>
                  <!-- NOTE: the reason why we do not use the site root here is because we would need to set the site context _before_ overview -->
                  <a class="nav-link" href="index.html#setup">Setup</a>
                </li>
                        <li class="nav-item">
                  <a class="nav-link" href="key-points.html">Key Points</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="reference.html#glossary">Glossary</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="profiles.html">Learner Profiles</a>
                </li>
                                  <li class="nav-item dropdown">
                    <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                      More <i data-feather="chevron-down"></i>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      

                      <li><a class="dropdown-item" href="reference.html">Git Cheatsheets for Quick Reference</a></li>
                      <li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
                      <li><a class="dropdown-item" href="fcm-git_cheat_sheet.html">FCM vs Git Cheat Sheet</a></li>            </ul>
                  </li>
                      </ul>
            </div>
            <!--
              <form class="d-flex col-md-2 search-form">
                <fieldset disabled>
                <input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search">
                  <button class="btn btn-outline-success tablet-search-button"  type="submit">
                    <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
                  </button>
                </fieldset>
              </form>
              -->
            <!--     <a id="search-button" class="btn btn-primary" href="aio.html" role="button"
              aria-label="Search the All In One page">Search the All In One page</a>
             -->
            <div class="input-group">
              <div id="quarto-search" class="form-outline" data-mdb-input-init="">
                <!-- <input type="search" id="form1" class="form-control" /> -->
                <!-- <label class="form-label" for="form1">Search</label> -->
              </div>
              <!-- <button type="button" class="btn btn-primary" data-mdb-ripple-init> -->
                <!-- <i class="fas fa-search"></i> -->
              <!-- </button> -->
            </div>
          </div><!--/div.container-fluid -->
        </nav>

        <div class="col-md-12 mobile-title">
          Git &amp; GitHub Working Practices
        </div>

        <aside class="col-md-12 lesson-progress">
          <div style="width: 0%" class="percentage">
            0%
          </div>
          <div class="progress carpentries">
            <div class="progress-bar carpentries" role="progressbar" style="width: 0%" aria-valuenow="0" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
            </div>
          </div>
        </aside>    <div class="container">
      <div class="row">
        <div id="sidebar-col" class="col-lg-4">
          <div id="sidebar" class="sidebar">
            <nav aria-labelledby="flush-headingEleven">
              <button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse" data-episodes="../Episodes">
                <i class="search-icon" data-feather="x" role="img"></i>
              </button>
              <div class="sidebar-inner">
                <div class="row mobile-row" id="theme-row-mobile">
                  <div class="col" id="theme-selector">
                    <li class="nav-item dropdown" id="theme-button-list">
                      <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                        <svg class="bi my-1 theme-icon-active">
                          <use href="#circle-half"></use>
                        </svg>
                        <span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                      </button>
                      <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
                        <li>
                          <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                            <svg class="bi me-2 theme-icon">
                              <use href="#sun-fill"></use>
                            </svg>
                            Light
                            <svg class="bi ms-auto d-none">
                              <use href="#check2"></use>
                            </svg>
                          </button>
                        </li>
                        <li>
                          <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                            <svg class="bi me-2 theme-icon">
                              <use href="#moon-stars-fill"></use>
                            </svg>
                            Dark
                            <svg class="bi ms-auto d-none">
                              <use href="#check2"></use>
                            </svg>
                          </button>
                        </li>
                        <li>
                          <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                            <svg class="bi me-2 theme-icon">
                              <use href="#circle-half"></use>
                            </svg>
                            Auto
                            <svg class="bi ms-auto d-none">
                              <use href="#check2"></use>
                            </svg>
                          </button>
                        </li>
                      </ul>
                    </li>
                  </div>
                </div>
                <div class="row mobile-row">
                  <div class="col">
                    <div class="sidenav-view-selector">
                      <div class="accordion accordion-flush" id="accordionFlush9">
                        <div class="accordion-item">
                                            <h2 class="accordion-header anchored" id="flush-headingNine">
                            <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                              <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                            </button>
                          </h2>
                          <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                            <div class="accordion-body">
                              <a href="instructor/08-rebase.html">Instructor View</a>
                            </div>
                          </div>
                                          </div><!--/div.accordion-item-->
                      </div><!--/div.accordion-flush-->
                    </div><!--div.sidenav-view-selector -->
                  </div><!--/div.col -->
                  <!-- {{#yaml}}{{#language}}
                  <div class="col">
                    <div class="sidenav-language-selector">
                      <div class="accordion accordion-flush" id="accordionFlush10">
                        <div class="accordion-item">
                          <h2 class="accordion-header" id="flush-headingTen">
                            <button class="accordion-button side-language collapsed" id="language" type="button"
                              data-bs-toggle="collapse" data-bs-target="#flush-collapseTen" aria-expanded="false"
                              aria-controls="flush-collapseTen">English (US)
                            </button>
                          </h2>
                          <div id="flush-collapseTen" class="accordion-collapse collapse" aria-labelledby="flush-headingNine"
                            data-bs-parent="#accordionFlush2">
                            <div class="accordion-body">
                              <a href="#">French</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  {{/language}}{{/yaml}} -->
                  <hr>
                </div><!--/div.mobile-row -->

                <div class="accordion accordion-flush" id="accordionFlush11">
                  <div class="accordion-item">

                    <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                      <h2 class="accordion-header chapters anchored" id="flush-headingEleven">../EPISODES</h2>
                    </button>
                    <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                      <div class="accordion-body">
                        

                                <div class="accordion accordion-flush" id="accordionFlush1">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading1">
                                      <a href="index.html">Summary and Setup</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush2">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading2">
                                      <a href="00-repo-access.html">1. Repository Access</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush3">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading3">
                                      <a href="01-issues.html">2. Issues</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush4">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading4">
                                      <a href="02-branching.html">3. Branching Models</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush5">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading5">
                                      <a href="03-feature-branch.html">4. Feature Branch Model</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush6">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading6">
                                      <a href="04-review.html">5. Review</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush7">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading7">
                                      <a href="Break.html">6. Break</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush8">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading8">
                                      <a href="05-forks.html">7. Forks</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush9">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading9">
                                      <a href="06-conflict.html">8. Conflicts</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush10">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading10">
                                      <a href="07-history.html">9. History</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush11">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading11">
                                      <a href="End.html">10. End</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush12">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading12">
                                      <a href="08-rebase.html">11. 'Rebasing'</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->


                                <div class="accordion accordion-flush" id="accordionFlush13">
                                  <div class="accordion-item">
                                    <div class="accordion-header" id="flush-heading13">
                                      <a href="09-pre-commit.html">12. 'Pre-commit'</a>
                                    </div><!--/div.accordion-header-->
                                  </div><!--/div.accordion-item-->
                                </div><!--/div.accordion-flush-->              </div>
                    </div>
                  </div>
                </div>
                <!-- <a href="index.html">Home</a> -->

                <hr class="half-width">
                          <div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
                    <div class="accordion-item">
                      <h2 class="accordion-header anchored" id="flush-headingTwelve">
                        <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                          RESOURCES
                        </button>
                      </h2>
                      <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                        <div class="accordion-body">
                          <ul>
                            <!-- We want to include a setup link prominently in the resources for overview pages -->
                            <li>
                              <!-- NOTE: the reason why we do not use the site root here is because we would need to set the site
                              context _before_ overview -->
                              <a href="index.html#setup">Setup</a>
                            </li>
                                                <li>
                              <a href="key-points.html">Key Points</a>
                            </li>
                            <li>
                              <a href="reference.html#glossary">Glossary</a>
                            </li>
                            <li>
                              <a href="profiles.html">Learner Profiles</a>
                            </li>
                                                <!-- {{{resources}}} -->
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- <hr class="half-width lesson-resources" /> -->
                  
                  
                  <hr class="d-none d-sm-block d-md-none">

                  <div class="d-grid gap-1">
                              </div>
                </div><!-- /div.accordion -->
              </nav></div><!-- /div.sidebar-inner -->
            
          </div><!-- /div.sidebar -->
        </div><!-- /div.sidebar-col -->                                <p>Rebasing a branch re-writes your git history and should be used with caution. You might want to rebase if:</p>
                      <ul>
                      <li>You need to tidy up your branches history before performing a normal merge via a PR. This will help keep the history of the <code>main</code> branch linear.</li>
                      <li>You need to update your branch with changes from the <code>main</code> branch.</li>
                      </ul>
                      <section id="tidying-your-commit-history" class="level2">
                      <h2 class="anchored" data-anchor-id="tidying-your-commit-history">Tidying your Commit History</h2>
                      <p>Consider the following scenario. You want to add a plotting script to the <code>git-training-demo</code> repository. You make a branch for the feature:</p>
                      <div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add_plot_script main</span></code></pre></div>
                      <pre class="output"><code>Switched to branch 'add_plot_script'</code></pre>
                      <p>And over the course of development you make three commits to the file <code>plot_lfric.py</code>. Use the commands in each tab make the same commits to your repository:</p>
                      <div class="tab">
                      <section id="commit-1" class="level3">
                      <h3 class="anchored" data-anchor-id="commit-1">Commit 1</h3>
                      <div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre></div>
                      <div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre></div>
                      <div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Adds in a Python script to plot LFRic data"</span></span></code></pre></div>
                      <pre class="output"><code>[add_plot_script 64ac261] Adds in a Python script to plot LFRic data
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 plot_lfric.py</code></pre>
                      </section>
                      <section id="commit-2" class="level3">
                      <h3 class="anchored" data-anchor-id="commit-2">Commit 2</h3>
                      <div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre></div>
                      <div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre></div>
                      <div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Extends the LFRic data plotting script to plot 2D fields"</span></span></code></pre></div>
                      <pre class="output"><code>[add_plot_script 7053de7] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)</code></pre>
                      </section>
                      <section id="commit-3" class="level3">
                      <h3 class="anchored" data-anchor-id="commit-3">Commit 3</h3>
                      <div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat plot_lfric.py</span></code></pre></div>
                      <div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre></div>
                      <div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-am</span> <span class="st">"Fixes the axis labels spelling in the LFRic data plotting script"</span></span></code></pre></div>
                      <pre class="output"><code>[add_plot_script 0bb7871] Fixes the axis labels spelling in the LFRic data plotting script
 1 file changed, 1 insertion(+)</code></pre>
                      </section>
                      </div>
                      <p>Before you push to the remote and open a PR you check your git history. The git history now looks something like this:</p>
                      <div class="cell" data-layout-align="default">
                      <div class="cell-output-display">
                      <div>
                      <p></p><figure class="figure"><p></p>
                      <div>
                      <pre class="mermaid mermaid-js">gitGraph
                          accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the first commit of main.}
                          commit id: 'ed14d18'
                          branch add_plot_script
                          checkout add_plot_script
                          commit id: '64ac261'
                          commit id: '7053de7'
                          commit id: '0bb7871'
                      </pre>
                      </div>
                      <p></p></figure><p></p>
                      </div>
                      </div>
                      </div>
                      <p>We can also visualise these changes with <code>git log</code>:</p>
                      <div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre></div>
                      <pre class="output"><code>* 0bb7871 (HEAD -&gt; add_plot_script) Fixes the axis labels spelling in the LFRic data plotting script
* 7053de7 Extends the LFRic data plotting script to plot 2D fields
* 64ac261 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
                      <p>You realise that perhaps the spelling fix in the third commit should have been a correction to the first commit which added in the script. We can use rebase to re-write our history and combine these two commits.</p>
                      </section>
                      <section id="backup-your-branch" class="level2 caution">
                      <h2 class="anchored" data-anchor-id="backup-your-branch">Backup your Branch</h2>
                      <p>It is a good idea to create a backup of your feature branch just in case something goes wrong during the rebase:</p>
                      <div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch add_plot_script.backup</span></code></pre></div>
                      <p>If at anytime you want to restore the branch from your backup switch to the backup:</p>
                      <div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git switch add_plot_script.backup</span></code></pre></div>
                      <p>Delete the branch where rebasing was attempted:</p>
                      <div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch <span class="at">-D</span> add_plot_script</span></code></pre></div>
                      <p>Re-create the original branch while still on the backup branch:</p>
                      <div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git switch <span class="at">-c</span> add_plot_script</span></code></pre></div>
                      </section>
                      <p>We will rebase interactively using the <code>-i</code> flag. To rebase our three commits we need to provide the commit hash for the commit before our three feature branch commits which is <code>ed14d18</code> from the log above:</p>
                      <div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">-i</span> ed14d18</span></code></pre></div>
                      <pre class="output"><code>pick 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
pick 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script

# Rebase ed14d18..0bb7871 onto ed14d18 (3 commands)
#
# Commands:
# p, pick &lt;commit&gt; = use commit
# r, reword &lt;commit&gt; = use commit, but edit the commit message
# e, edit &lt;commit&gt; = use commit, but stop for amending
# s, squash &lt;commit&gt; = use commit, but meld into previous commit
# f, fixup [-C | -c] &lt;commit&gt; = like "squash" but keep only the previous
#                    commit's log message, unless -C is used, in which case
#                    keep only this commit's message; -c is same as -C but
#                    opens the editor
# x, exec &lt;command&gt; = run command (the rest of the line) using shell
# b, break = stop here (continue rebase later with 'git rebase --continue')
# d, drop &lt;commit&gt; = remove commit
# l, label &lt;label&gt; = label current HEAD with a name
# t, reset &lt;label&gt; = reset HEAD to a label
# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
# .   create a merge commit using the original merge commit's
# .   message (or the oneline, if no original merge commit was
# .   specified); use -c &lt;commit&gt; to reword the commit message
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#</code></pre>
                      <p>This file shows our three commits in order from oldest to newest. It also gives us options for each commit. You can re-arrange commit lines to re-order your history.</p>
                      <section id="aborting-a-rebase" class="level2 caution">
                      <h2 class="anchored" data-anchor-id="aborting-a-rebase">Aborting a Rebase</h2>
                      <p>If you want to cancel the rebase at the above stage either do nothing to the file or delete all the commit lines.</p>
                      <p>After you save and close the file, if your rebase has conflicts, you can abort at anytime using:</p>
                      <div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git rebase <span class="at">--abort</span></span></code></pre></div>
                      </section>
                      <p>We are going to drop our spelling fix and amend our first commit to fix the spelling:</p>
                      <pre class="output"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
                      <p>Save and close the file.</p>
                      <pre class="output"><code>Stopped at 64ac261...  Adds in a Python script to plot LFRic data
You can amend the commit now, with

  git commit --amend 

Once you are satisfied with your changes, run

  git rebase --continue
[git-training-demo]:(add_plot_script|REBASE 1/3)$</code></pre>
                      <p>The rebase has stopped at 64ac261, the commit which added in the <code>plot_lfric.py</code> file, because we asked to amend the commit. We can now open up the plotting script and make our changes.</p>
                      <p>Opening up the file now shows:</p>
                      <div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py</span></code></pre></div>
                      <div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span></code></pre></div>
                      <p>Modify and save the file so that it reads:</p>
                      <div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span></code></pre></div>
                      <p>Add the file and confirm the amendment:</p>
                      <div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git commit <span class="at">--amend</span></span></code></pre></div>
                      <pre class="output"><code>[detached HEAD 76fd423] Adds in a Python script to plot LFRic data
 Date: Mon Nov 18 10:49:25 2024 +0000
 1 file changed, 1 insertion(+)
 create mode 100644 plot_lfric.py</code></pre>
                      <p>For the last few commands we have included the full terminal prompt showing the git status provided by the <code>git-prompt.sh</code> script you set up in the <a href="https://www.astropython.com/git-novice/index.html#git-autocomplete">git-novice lesson</a>. You can see the prompt clearly states we are rebasing, <code>REBASE</code>, and that it is on line <code>1/3</code> of the rebase to-do file we edited earlier.</p>
                      <p>Now we have amended the commit we can continue with the rebase:</p>
                      <div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span><span class="kw">|</span><span class="ex">REBASE</span> 1/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Auto-merging</span> plot_lfric.py</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="ex">CONFLICT</span> <span class="er">(</span><span class="ex">content</span><span class="kw">)</span><span class="bu">:</span> Merge conflict in plot_lfric.py</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="ex">error:</span> could not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> Resolve all conflicts manually, mark them as resolved with</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> <span class="st">"git add/rm &lt;conflicted_files&gt;"</span>, then run <span class="st">"git rebase --continue"</span>.</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> You can instead skip this commit: run <span class="st">"git rebase --skip"</span>.</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> To abort and get back to the state before <span class="st">"git rebase"</span>, run <span class="st">"git rebase --abort"</span>.</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Could</span> not apply 7053de7... Extends the LFRic data plotting script to plot 2D fields</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> </span></code></pre></div>
                      <p>The rebase has tried to apply the second commit which still has the spelling mistake resulting in a merge error. Open the file again and resolve the conflict:</p>
                      <div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> nano plot_lfric.py </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> cat plot_lfric.py </span></code></pre></div>
                      <div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> HEAD</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="op">=======</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pretnd there is code here!</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># more Python</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="dv">3343</span><span class="er">f91</span></span></code></pre></div>
                      <p>Modify and save the file so that it reads:</p>
                      <div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pretend there is code here!</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># more Python</span></span></code></pre></div>
                      <p>Add the file and continue with the rebase:</p>
                      <div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> <span class="pp">*</span>+<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git add plot_lfric.py</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[git-training-demo]:</span><span class="er">(</span><span class="ex">add_plot_script</span> +<span class="kw">|</span><span class="ex">REBASE</span> 2/3<span class="kw">)</span><span class="ex">$</span> git rebase <span class="at">--continue</span></span></code></pre></div>
                      <pre class="output"><code>[detached HEAD d7def6a] Extends the LFRic data plotting script to plot 2D fields
 1 file changed, 1 insertion(+)
Successfully rebased and updated refs/heads/add_plot_script.
[git-training-demo]:(add_plot_script)$ </code></pre>
                      <p>We have now successfully rebased our feature branch. Our history shows:</p>
                      <div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code></pre></div>
                      <pre class="output"><code>* d7def6a (HEAD -&gt; add_plot_script) Extends the LFRic data plotting script to plot 2D fields
* e56ed99 Adds in a Python script to plot LFRic data
* ed14d18 (origin/main) Adds Robert FitzRoy as an author (#8)</code></pre>
                      <p>Itâ€™s a good idea here to diff against your backup branch to check that you havenâ€™t accidentally removed changes.</p>
                      <div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git diff add_plot_script.backup add_plot_script</span></code></pre></div>
                      <p>This command should show <strong>no</strong> output.</p>
                      <div class="callout callout-style-simple callout-none no-icon callout-titled">
                      <div class="callout-header d-flex align-content-center">
                      <div class="callout-icon-container">
                      <i class="callout-icon no-icon"></i>
                      </div>
                      <div class="callout-title-container flex-fill">
                      detached HEAD
                      </div>
                      </div>
                      <div class="callout-body-container callout-body">
                      <p>You may have noticed in some of the terminal outputs above the phrase <code>detached HEAD</code>. Remember <code>HEAD</code> simply points to the latest commit in a branch. You canâ€™t re-write the commit history of a branch while you are on the branch! <code>git rebase</code> moved you into a <code>detached HEAD</code> space where you arenâ€™t on any branch to perform the rebase. When the rebase successfully completed git re-attached <code>HEAD</code> to point to the new most recent commit, <code>d7def6a</code> in the output above, on the feature branch.</p>
                      </div>
                      </div>
                      <section id="updating-a-branch" class="level2">
                      <h2 class="anchored" data-anchor-id="updating-a-branch">Updating a Branch</h2>
                      <p>You can also use rebase to move your changes to branch off the <code>HEAD</code> of <code>main</code>. While we rebased our feature branch another PR was merged with <code>main</code>:</p>
                      <div class="cell" data-layout-align="default">
                      <div class="cell-output-display">
                      <div>
                      <p></p><figure class="figure"><p></p>
                      <div>
                      <pre class="mermaid mermaid-js">gitGraph
                          accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the first commit of main.}
                          commit id: 'ed14d18'
                          branch add_plot_script
                          checkout add_plot_script
                          commit id: 'e56ed99'
                          commit id: 'd7def6a'
                          checkout main
                          commit id: '4rtzk8g'
                      </pre>
                      </div>
                      <p></p></figure><p></p>
                      </div>
                      </div>
                      </div>
                      <p>We can use rebasing to move our feature branch so it branches off the <code>HEAD</code> of <code>main</code>, fixing any conflicts that arise. This is what we are aiming for:</p>
                      <div class="cell" data-layout-align="default">
                      <div class="cell-output-display">
                      <div>
                      <p></p><figure class="figure"><p></p>
                      <div>
                      <pre class="mermaid mermaid-js">gitGraph
                          accDescr {A Git graph showing the main branch with the add_plot_script branch branching off at the second commit of main.}
                          commit id: 'ed14d18'
                          commit id: '4rtzk8g'
                          branch add_plot_script
                          checkout add_plot_script
                          commit id: 'e56ed99'
                          commit id: 'd7def6a'
                      </pre>
                      </div>
                      <p></p></figure><p></p>
                      </div>
                      </div>
                      </div>
                      <p>Run <code>git pull</code> to fetch the changes from GitHub:</p>
                      <div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git pull origin main</span></code></pre></div>
                      <p>To rebase we run:</p>
                      <div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git rebase main</span></code></pre></div>
                      <pre class="output"><code>Successfully rebased and updated refs/heads/add_plot_script.</code></pre>
                      <p>Thatâ€™s it! There were no merge conflicts to resolve this time. If you are going to use rebase in this way consider rebasing on a regular basis.</p>
                      </section>
                      <section id="merge-rebase" class="level2 caution">
                      <h2 class="anchored" data-anchor-id="merge-rebase">Merge &amp; Rebase</h2>
                      <p>Stick to one strategy if you can, or rebase before merging. Rebasing a branch with merge commits is difficult to impossible.</p>
                      </section>
                      <section id="updating-a-branch-with-upstream-changes" class="level3">
                      <h3 class="anchored" data-anchor-id="updating-a-branch-with-upstream-changes">Updating a Branch with Upstream Changes</h3>
                      <p>Go back to your fork on GitHub and click on the <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/syncing-a-fork"><strong>Sync fork</strong></a> button.</p>
                      <p>Then you can follow the steps above to update your branch.</p>
                      <p>Itâ€™s a good idea to diff your origin feature branch here.</p>
                      <div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git diff feature origin/feature</span></code></pre></div>
                      <p>You should only see the changes brought in from the upstream repository <strong>not</strong> your feature branch changes.</p>
                      </section>
                      <section id="updating-the-remote" class="level2">
                      <h2 class="anchored" data-anchor-id="updating-the-remote">Updating the Remote</h2>
                      <p>If you are rebasing a feature branch you have already pushed to the GitHub remote you will need to overwrite the remote branch.</p>
                      <ul>
                      <li><strong>Always</strong> check you have updated your local branch from the remote <strong>before</strong> rebasing.</li>
                      <li><strong>Always</strong> check before pushing to the remote after rebasing that no new commits were added to the remote as these will be lost.</li>
                      </ul>
                      <p>You can fetch any changes to the remote:</p>
                      <div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git fetch</span></code></pre></div>
                      <p>And inspect the last commit with the log or <code>git show</code> to make sure itâ€™s the commit you expect:</p>
                      <div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git show origin/add_plot_script</span></code></pre></div>
                      <p>If the rebasing was successful and there have been no new commits to the remote feature branch by any collaborators it is safe to push the rebased feature branch to the GitHub remote, overwriting itâ€™s history.</p>
                      <div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">--force-with-lease</span></span></code></pre></div>
                      <p>The <code>--force-with-lease</code> flag will warn you if there are commits on the remote branch you would override by pushing if you forgot to check yourself.</p>
                      </section>
                      <section id="pulling-a-rebased-branch" class="level2">
                      <h2 class="anchored" data-anchor-id="pulling-a-rebased-branch">Pulling a Rebased Branch</h2>
                      <p>If you have rebased a feature branch and then overwritten the remote branch on GitHub your collaborators may need to pull these changes to their local copies.</p>
                      <p>If the collaborator already had a copy of your branch from before the rebase; attempting a normal pull will result in a lot of conflicts due to the incompatible histories of the original and the rebased branches.</p>
                      <p>The collaborator should first switch to the local branch they want to overwrite with the rebased remote version:</p>
                      <div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git switch add_plot_script</span></code></pre></div>
                      <p>Now fetch but donâ€™t attempt to merge the remote branch:</p>
                      <div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git fetch origin add_plot_script</span></code></pre></div>
                      <p>Reset the local branch to match the remote origin:</p>
                      <div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git reset <span class="at">--hard</span> origin/add_plot_script</span></code></pre></div>
                      <p>Now their local branch matches the rebased feature branch from GitHub and everyoneâ€™s branches are in sync.</p>
                      <div id="discussion1" class="callout discussion">
                      <div class="callout-square">
                      <i class="callout-icon" data-feather="message-circle"></i>
                      </div>
                      <section id="modifying-commit-messages" class="level3 callout-title callout-inner">
                      <h3 class="callout-title anchored" data-anchor-id="modifying-commit-messages">Modifying Commit Messages</h3>
                      <div class="callout-content">
                      <p><code>git rebase</code> can also be used to modify commit messages.</p>
                      <p>Look again at the output of the interactive rebase in this lesson. Which keyword lets you edit the commit message?</p>
                      <div class="proof solution">
                      <p><span class="proof-title"><em>Solution</em> (Solution). </span>Edit the commit message:</p>
                      <pre class="text"><code># r, reword &lt;commit&gt; = use commit, but edit the commit message</code></pre>
                      </div>
                      </div>
                      </section>
                      </div>
                      <div id="discussion2" class="callout discussion">
                      <div class="callout-square">
                      <i class="callout-icon" data-feather="message-circle"></i>
                      </div>
                      <section id="re-ordering-commits" class="level3 callout-title callout-inner">
                      <h3 class="callout-title anchored" data-anchor-id="re-ordering-commits">Re-ordering Commits</h3>
                      <div class="callout-content">
                      <p>In the first example removing the spelling mistake we used the following keywords in our rebase to-do list:</p>
                      <pre class="output"><code>edit 64ac261 Adds in a Python script to plot LFRic data
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields
drop 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script</code></pre>
                      <p>You can also re-order the lines in this file to re-order commits. Look at the possible rebase options again. What other combination of keywords and/or line-reordering would have given us the same result?</p>
                      <div class="proof solution">
                      <p><span class="proof-title"><em>Solution</em> (Solution). </span></p>
                      <pre class="output"><code>pick 64ac261 Adds in a Python script to plot LFRic data
fixup 0bb7871 Fixes the axis labels spelling in the LFRic data plotting script
pick 7053de7 Extends the LFRic data plotting script to plot 2D fields</code></pre>
                      <p>This is one possibility. We move the last commit just underneath the first which introduced the mistake. We use the <code>fixup</code> keyword to fix this change up into the previous commit.</p>
                      </div>
                      </div>
                      </section>
                      </div>
                      <div id="keypoints1" class="callout keypoints">
                      <div class="callout-square">
                      <i class="callout-icon" data-feather="key"></i>
                      </div>
                      <section class="level3 callout-title callout-inner">
                      <h3 class="callout-title anchored" data-anchor-id="">Keypoints</h3>
                      <div class="callout-content">
                      <ul>
                      <li>Rebasing helps keep your git history linear which can be useful when using commands such as git bisect to find the commit that introduced a bug.</li>
                      <li>Rebasing re-writes your git history. Make a backup of your branch before rebasing. <code>git branch &lt;branch-name&gt;.backup</code></li>
                      <li>Use an interactive rebase with the <code>-i</code> flag when you want to tidy your git history.</li>
                      <li>Use <code>git rebase main</code> to rebase your feature branch onto the <code>HEAD</code> of the <code>main</code> branch.</li>
                      <li><strong>Always</strong> check you have updated your local branch from the remote <strong>before</strong> rebasing.</li>
                      <li><strong>Always</strong> check before pushing to the remote after rebasing that no new commits were added to the remote as these will be lost, use the <code>--force-with-lease</code> flag with <code>git push</code> to help prevent this.</li>
                      <li>Use <code>git push --force-with-lease</code> to update the remote branch.</li>
                      </ul>
                      </div>
                      </section>
                      </div>
                      
                      
                      </section>
      </div>
      		<footer class="row footer mx-md-3">
      			<hr>
      			<div class="col-md-6">
              <p>This lesson is subject to the &lt;(Code of Conduct)&gt;</p>
              <a href="https://github.com/MetOffice/git-working-practices/edit/main/README.md">Edit on GitHub</a>
              | <a href="https://github.com/MetOffice/git-working-practices/blob/main/CONTRIBUTING.md">Contributing</a>
              | <a href="https://github.com/MetOffice/git-working-practices/">Source</a><p></p>
      				<p><a href="https://github.com/MetOffice/git-working-practices/blob/main/CITATION.cff">Cite</a> | <a href="mailto:d.theodorakis@metoffice.gov.uk">Contact</a> | <a href="https://carpentries.org/about/">About</a></p>
      			</div>
      			<div class="col-md-6">
                      <p>Materials licensed under &lt;({license})&gt; by the authors</p>
                      <p>Template licensed under &lt;(CC-BY 4.0)&gt; by {template_authors}</p>
              <p>Built with Quarto</p>
      			</div>
      		</footer>
      	</main></div> <!-- / div.container -->
      	<div id="to-top">
      		<a href="#top">
            <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br>
      			<!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top -->
            Back To Top
      		</a>
      	</div>
        <!-- {{#json}}
        <script type="application/ld+json">
          {{ meta json}}
        </script>
        {{/json}} -->
      	<script>
      		feather.replace();
      	</script>

        <!-- {{#analytics}}
        {{ meta analytics}}
        {{/analytics}} -->      <!-- footer closes the container class div -->
         <!-- /main -->
        <script id="quarto-html-after-body" type="application/javascript">
        window.document.addEventListener("DOMContentLoaded", function (event) {
          const toggleBodyColorMode = (bsSheetEl) => {
            const mode = bsSheetEl.getAttribute("data-mode");
            const bodyEl = window.document.querySelector("body");
            if (mode === "dark") {
              bodyEl.classList.add("quarto-dark");
              bodyEl.classList.remove("quarto-light");
            } else {
              bodyEl.classList.add("quarto-light");
              bodyEl.classList.remove("quarto-dark");
            }
          }
          const toggleBodyColorPrimary = () => {
            const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
            if (bsSheetEl) {
              toggleBodyColorMode(bsSheetEl);
            }
          }
          toggleBodyColorPrimary();  
          const icon = "î§‹";
          const anchorJS = new window.AnchorJS();
          anchorJS.options = {
            placement: 'right',
            icon: icon
          };
          anchorJS.add('.anchored');
            var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
            var mailtoRegex = new RegExp(/^mailto:/);
              var filterRegex = new RegExp("https:\/\/metoffice\.github\.io\/git-working-practices\/");
            var isInternal = (href) => {
                return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
            }
            // Inspect non-navigation links and adorn them if external
         	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
            for (var i=0; i<links.length; i++) {
              const link = links[i];
              if (!isInternal(link.href)) {
                // undo the damage that might have been done by quarto-nav.js in the case of
                // links that we want to consider external
                if (link.dataset.originalHref !== undefined) {
                  link.href = link.dataset.originalHref;
                }
              }
            }
          function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
            const config = {
              allowHTML: true,
              maxWidth: 500,
              delay: 100,
              arrow: false,
              appendTo: function(el) {
                  return el.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: 'quarto',
              placement: 'bottom-start',
            };
            if (contentFn) {
              config.content = contentFn;
            }
            if (onTriggerFn) {
              config.onTrigger = onTriggerFn;
            }
            if (onUntriggerFn) {
              config.onUntrigger = onUntriggerFn;
            }
            window.tippy(el, config); 
          }
          const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
          for (var i=0; i<noterefs.length; i++) {
            const ref = noterefs[i];
            tippyHover(ref, function() {
              // use id or data attribute instead here
              let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
              try { href = new URL(href).hash; } catch {}
              const id = href.replace(/^#\/?/, "");
              const note = window.document.getElementById(id);
              if (note) {
                return note.innerHTML;
              } else {
                return "";
              }
            });
          }
          const xrefs = window.document.querySelectorAll('a.quarto-xref');
          const processXRef = (id, note) => {
            // Strip column container classes
            const stripColumnClz = (el) => {
              el.classList.remove("page-full", "page-columns");
              if (el.children) {
                for (const child of el.children) {
                  stripColumnClz(child);
                }
              }
            }
            stripColumnClz(note)
            if (id === null || id.startsWith('sec-')) {
              // Special case sections, only their first couple elements
              const container = document.createElement("div");
              if (note.children && note.children.length > 2) {
                container.appendChild(note.children[0].cloneNode(true));
                for (let i = 1; i < note.children.length; i++) {
                  const child = note.children[i];
                  if (child.tagName === "P" && child.innerText === "") {
                    continue;
                  } else {
                    container.appendChild(child.cloneNode(true));
                    break;
                  }
                }
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(container);
                }
                return container.innerHTML
              } else {
                if (window.Quarto?.typesetMath) {
                  window.Quarto.typesetMath(note);
                }
                return note.innerHTML;
              }
            } else {
              // Remove any anchor links if they are present
              const anchorLink = note.querySelector('a.anchorjs-link');
              if (anchorLink) {
                anchorLink.remove();
              }
              if (window.Quarto?.typesetMath) {
                window.Quarto.typesetMath(note);
              }
              if (note.classList.contains("callout")) {
                return note.outerHTML;
              } else {
                return note.innerHTML;
              }
            }
          }
          for (var i=0; i<xrefs.length; i++) {
            const xref = xrefs[i];
            tippyHover(xref, undefined, function(instance) {
              instance.disable();
              let url = xref.getAttribute('href');
              let hash = undefined; 
              if (url.startsWith('#')) {
                hash = url;
              } else {
                try { hash = new URL(url).hash; } catch {}
              }
              if (hash) {
                const id = hash.replace(/^#\/?/, "");
                const note = window.document.getElementById(id);
                if (note !== null) {
                  try {
                    const html = processXRef(id, note.cloneNode(true));
                    instance.setContent(html);
                  } finally {
                    instance.enable();
                    instance.show();
                  }
                } else {
                  // See if we can fetch this
                  fetch(url.split('#')[0])
                  .then(res => res.text())
                  .then(html => {
                    const parser = new DOMParser();
                    const htmlDoc = parser.parseFromString(html, "text/html");
                    const note = htmlDoc.getElementById(id);
                    if (note !== null) {
                      const html = processXRef(id, note);
                      instance.setContent(html);
                    } 
                  }).finally(() => {
                    instance.enable();
                    instance.show();
                  });
                }
              } else {
                // See if we can fetch a full url (with no hash to target)
                // This is a special case and we should probably do some content thinning / targeting
                fetch(url)
                .then(res => res.text())
                .then(html => {
                  const parser = new DOMParser();
                  const htmlDoc = parser.parseFromString(html, "text/html");
                  const note = htmlDoc.querySelector('main.content');
                  if (note !== null) {
                    // This should only happen for chapter cross references
                    // (since there is no id in the URL)
                    // remove the first header
                    if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                      note.children[0].remove();
                    }
                    const html = processXRef(null, note);
                    instance.setContent(html);
                  } 
                }).finally(() => {
                  instance.enable();
                  instance.show();
                });
              }
            }, function(instance) {
            });
          }
              let selectedAnnoteEl;
              const selectorForAnnotation = ( cell, annotation) => {
                let cellAttr = 'data-code-cell="' + cell + '"';
                let lineAttr = 'data-code-annotation="' +  annotation + '"';
                const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
                return selector;
              }
              const selectCodeLines = (annoteEl) => {
                const doc = window.document;
                const targetCell = annoteEl.getAttribute("data-target-cell");
                const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
                const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                const lines = annoteSpan.getAttribute("data-code-lines").split(",");
                const lineIds = lines.map((line) => {
                  return targetCell + "-" + line;
                })
                let top = null;
                let height = null;
                let parent = null;
                if (lineIds.length > 0) {
                    //compute the position of the single el (top and bottom and make a div)
                    const el = window.document.getElementById(lineIds[0]);
                    top = el.offsetTop;
                    height = el.offsetHeight;
                    parent = el.parentElement.parentElement;
                  if (lineIds.length > 1) {
                    const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                    const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                    height = bottom - top;
                  }
                  if (top !== null && height !== null && parent !== null) {
                    // cook up a div (if necessary) and position it 
                    let div = window.document.getElementById("code-annotation-line-highlight");
                    if (div === null) {
                      div = window.document.createElement("div");
                      div.setAttribute("id", "code-annotation-line-highlight");
                      div.style.position = 'absolute';
                      parent.appendChild(div);
                    }
                    div.style.top = top - 2 + "px";
                    div.style.height = height + 4 + "px";
                    div.style.left = 0;
                    let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                    if (gutterDiv === null) {
                      gutterDiv = window.document.createElement("div");
                      gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                      gutterDiv.style.position = 'absolute';
                      const codeCell = window.document.getElementById(targetCell);
                      const gutter = codeCell.querySelector('.code-annotation-gutter');
                      gutter.appendChild(gutterDiv);
                    }
                    gutterDiv.style.top = top - 2 + "px";
                    gutterDiv.style.height = height + 4 + "px";
                  }
                  selectedAnnoteEl = annoteEl;
                }
              };
              const unselectCodeLines = () => {
                const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
                elementsIds.forEach((elId) => {
                  const div = window.document.getElementById(elId);
                  if (div) {
                    div.remove();
                  }
                });
                selectedAnnoteEl = undefined;
              };
                // Handle positioning of the toggle
            window.addEventListener(
              "resize",
              throttle(() => {
                elRect = undefined;
                if (selectedAnnoteEl) {
                  selectCodeLines(selectedAnnoteEl);
                }
              }, 10)
            );
            function throttle(fn, ms) {
            let throttle = false;
            let timer;
              return (...args) => {
                if(!throttle) { // first call gets through
                    fn.apply(this, args);
                    throttle = true;
                } else { // all the others get throttled
                    if(timer) clearTimeout(timer); // cancel #2
                    timer = setTimeout(() => {
                      fn.apply(this, args);
                      timer = throttle = false;
                    }, ms);
                }
              };
            }
              // Attach click handler to the DT
              const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
              for (const annoteDlNode of annoteDls) {
                annoteDlNode.addEventListener('click', (event) => {
                  const clickedEl = event.target;
                  if (clickedEl !== selectedAnnoteEl) {
                    unselectCodeLines();
                    const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                    if (activeEl) {
                      activeEl.classList.remove('code-annotation-active');
                    }
                    selectCodeLines(clickedEl);
                    clickedEl.classList.add('code-annotation-active');
                  } else {
                    // Unselect the line
                    unselectCodeLines();
                    clickedEl.classList.remove('code-annotation-active');
                  }
                });
              }
          const findCites = (el) => {
            const parentEl = el.parentElement;
            if (parentEl) {
              const cites = parentEl.dataset.cites;
              if (cites) {
                return {
                  el,
                  cites: cites.split(' ')
                };
              } else {
                return findCites(el.parentElement)
              }
            } else {
              return undefined;
            }
          };
          var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
          for (var i=0; i<bibliorefs.length; i++) {
            const ref = bibliorefs[i];
            const citeInfo = findCites(ref);
            if (citeInfo) {
              tippyHover(citeInfo.el, function() {
                var popup = window.document.createElement('div');
                citeInfo.cites.forEach(function(cite) {
                  var citeDiv = window.document.createElement('div');
                  citeDiv.classList.add('hanging-indent');
                  citeDiv.classList.add('csl-entry');
                  var biblioDiv = window.document.getElementById('ref-' + cite);
                  if (biblioDiv) {
                    citeDiv.innerHTML = biblioDiv.innerHTML;
                  }
                  popup.appendChild(citeDiv);
                });
                return popup.innerHTML;
              });
            }
          }
        });
        </script>
         <!-- /content -->
      

</body></html>